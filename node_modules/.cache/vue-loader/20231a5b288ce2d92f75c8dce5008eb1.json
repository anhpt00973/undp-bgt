{"remainingRequest":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vuejs-sourcode\\undp-bgt\\src\\views\\Login.vue?vue&type=style&index=0&id=26084dc2&lang=scss&","dependencies":[{"path":"F:\\vuejs-sourcode\\undp-bgt\\src\\views\\Login.vue","mtime":1665053037814},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\css-loader\\dist\\cjs.js","mtime":1665053118453},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1665053120726},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\postcss-loader\\src\\index.js","mtime":1665053119174},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1665053118004},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665053118014},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053120378}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiRpbWFnZS1sb2dpbjogJHB1YmxpYy1wYXRoICsgJy9pbWFnZXMvYmctbG9naW4ucG5nP3Q9MzkxMzEyMyc7CiNhcHAgewogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQKfQoud3JhcC1sb2dpbiB7CiAgYmFja2dyb3VuZDogdXJsKCRpbWFnZS1sb2dpbikgbm8tcmVwZWF0OwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgaGVpZ2h0OiAxMDB2aDsKICB3aWR0aDogMTAwJTsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLndyYXAtbG9naW4gaW5wdXQgewogIHBhZGRpbmctdG9wOiAwcHggIWltcG9ydGFudDsKfQojbG9naW4tcGFnZSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG1hcmdpbjogMCBhdXRvOwp9Ci5jb250YWluZXItd3JhcCB7CiAgLy8gYmFja2dyb3VuZDogcmdiYSgxNCwgNDIsIDY2LCAwLjgpOwogIC8vIGJveC1zaGFkb3c6IGluc2V0IC00cHggNHB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgd2lkdGg6IGF1dG87CiAgaGVpZ2h0OiAzNjVweDsKICAvLyBwYWRkaW5nOiA0NXB4OwogIG1hcmdpbjogMCBhdXRvOwogIG1hcmdpbi10b3A6IDQwcHg7Cn0KI2xvZ2luLXBhZ2UgLnRleHQtMSB7CiAgZm9udC1mYW1pbHk6ICJSb2JvdG8gU2xhYiI7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgZm9udC1zaXplOiAyNHB4OwogIGxpbmUtaGVpZ2h0OiAyNHB4OwogIGNvbG9yOiAjZmZmZmZmOwogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KI2xvZ2luLXBhZ2UgLnRleHQtMiB7CiAgZm9udC1mYW1pbHk6ICJSb2JvdG8gU2xhYiI7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgZm9udC1zaXplOiAyMnB4OwogIGxpbmUtaGVpZ2h0OiAyOHB4OwogIGNvbG9yOiAjZmZmZmZmOwp9Ci53cmFwLWZvcm0gewogIG1heC13aWR0aDogNDUwcHg7CiAgbWFyZ2luOiAwIGF1dG87CiAgYmFja2dyb3VuZDogcmdiYSgxNCwgNDIsIDY2LCAwLjgpOwogIGJvcmRlcjogMXB4IHNvbGlkICNCQUI3QjU7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIG1hcmdpbi10b3A6IDQ1cHg7Cn0KLnRleHQtbG9naW4gewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvIFNsYWInOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXNpemU6IDE4cHg7CiAgbGluZS1oZWlnaHQ6IDIxcHg7CiAgY29sb3I6ICNmZmY7CiAgdGV4dC1zaGFkb3c6IDBweCAzcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xNyk7CiAgbWFyZ2luLWJvdHRvbTogMTVweDsKICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoud3JhcC1sb2dpbiAuaW5wdXQtdGV4dCAudi1pbnB1dF9fc2xvdDpiZWZvcmUgewogIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7Cn0KLndyYXAtbG9naW4gLmlucHV0LXRleHQgLnYtaW5wdXRfX3Nsb3Q6OmFmdGVyIHsKICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQKfQoud3JhcC1sb2dpbiAuaW5wdXQtdGV4dCAudi1pbnB1dF9fc2xvdCB7CiAgYm9yZGVyOiAxcHggc29saWQgI0JBQjdCNTsKICBwYWRkaW5nOiA0cHggNXB4OwogIGJvcmRlci1yYWRpdXM6IDVweDsKICBoZWlnaHQ6IDMycHgKfQouaW5wdXQtdGV4dCAudi1pY29uewogIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7CiAgZm9udC1zaXplOiAyMHB4ICFpbXBvcnRhbnQ7Cn0KLmlucHV0LXRleHQgaW5wdXQgewogIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7CiAgZm9udC1zaXplOiAxNHB4Owp9Ci5pbnB1dC10ZXh0ICAudi1pbnB1dF9fc2xvdCB7CiAgYm94LXNoYWRvdzogMHB4IDNweCAxcHggLTJweCByZ2IoMCAwIDAgLyA4JSksIDBweCAycHggMnB4IDBweCByZ2IoMCAwIDAgLyAwJSksIDBweCAxcHggNXB4IDBweCByZ2IoMCAwIDAgLyA3JSkgIWltcG9ydGFudDsKfQouaW5wdXQtdGV4dCBpbnB1dDo6cGxhY2Vob2xkZXIgeyAvKiBDaHJvbWUsIEZpcmVmb3gsIE9wZXJhLCBTYWZhcmkgMTAuMSsgKi8KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50OwogIG9wYWNpdHk6IDE7IC8qIEZpcmVmb3ggKi8KfQoKLmlucHV0LXRleHQgaW5wdXQ6LW1zLWlucHV0LXBsYWNlaG9sZGVyIHsgLyogSW50ZXJuZXQgRXhwbG9yZXIgMTAtMTEgKi8KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Owp9CgouaW5wdXQtdGV4dCBpbnB1dDo6LW1zLWlucHV0LXBsYWNlaG9sZGVyIHsgLyogTWljcm9zb2Z0IEVkZ2UgKi8KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Owp9Ci5idG4tbG9naW4gewogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzExNDA3OCAwJSwgIzM3NTdBQSAxMDAlKTsKfQovLyAud3JhcC1mb3JtIC50aGVtZS0tbGlnaHQudi10ZXh0LWZpZWxkID4gLnYtaW5wdXRfX2NvbnRyb2wgPiAudi1pbnB1dF9fc2xvdDpiZWZvcmUgewovLyAgIGJvcmRlci1jb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ci8vIH0KLy8gLndyYXAtZm9ybSAudGhlbWUtLWxpZ2h0LnYtdGV4dC1maWVsZCA+IC52LWlucHV0X19jb250cm9sID4gLnYtaW5wdXRfX3Nsb3Q6YWZ0ZXIgewovLyAgIGJvcmRlci1jb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ci8vIH0KLy8gCi53cmFwLXRpdGxlLCAud3JhcC1idG4tbG9naW4gewogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoud3JhcC1jb250YWN0LWluZm8gewogIG1heC13aWR0aDogMTM2NnB4ICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiAxMjBweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwOwogIGxlZnQ6IDEwMHB4OwogIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMzIwcHgpIGFuZCAobWF4LXdpZHRoOiA3NjhweCkgewogIC5jb250YWluZXItd3JhcCB7CiAgICB3aWR0aDogMzAwcHg7CiAgICBwYWRkaW5nOiA4cHg7CiAgICBtYXJnaW4tdG9wOiAyMCUKICB9CiAgLnRleHQtMSwgLnRleHQtMiB7CiAgICBmb250LXNpemU6IDE2cHg7CiAgfQogIC53cmFwLXRpdGxlLCAud3JhcC1idG4tbG9naW4gewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogIH0KfQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAzNzVweCkgYW5kIChtYXgtd2lkdGg6IDc2OHB4KXsKICAuY29udGFpbmVyLXdyYXAgewogICAgd2lkdGg6IDM1MHB4OwogICAgcGFkZGluZzogOHB4OwogIH0KfQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3NjhweCl7CiAgLmltZy1sb2dpbi1sb2dvIHsKICAgIHdpZHRoOiA4NXB4OwogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"wrap-login\">\r\n    <v-container\r\n      id=\"login-page\"\r\n      class=\"px-0 pt-0\"\r\n      fluid\r\n      tag=\"section\"\r\n    >\r\n      <div class=\"container-wrap\">\r\n        <div class=\"wrap-title\">\r\n          <v-flex style=\"text-align: center;\">\r\n            <img class=\"img-login-logo\" :src=\"`${publicPath}/images/image-logo.png?t=93111413`\">\r\n          </v-flex>\r\n          <v-flex style=\"text-align: center;margin-top: 20px;\" class=\"pt-1\">\r\n            <div class=\"text-1\">HỆ THỐNG GIÁM SÁT VÀ ĐÁNH GIÁ THÍCH ỨNG BIẾN ĐỔI KHÍ HẬU</div>\r\n            <div class=\"text-2\">BỘ GIAO THÔNG VẬN TẢI</div>\r\n          </v-flex>\r\n        </div>\r\n\r\n        <div class=\"wrap-form px-4 py-3\" v-if=\"!signed\">\r\n          <div>\r\n            <v-form ref=\"form\" v-model=\"valid\" lazy-validation class=\"\">\r\n              <v-flex xs12 class=\"mb-5\" style=\"text-align: center;\r\n                font-size: 22px;\r\n                font-family: 'Roboto Slab';\r\n                color: #fff;\r\n                font-weight: 700;\">\r\n                <div>ĐĂNG NHẬP</div>\r\n              </v-flex>\r\n              <v-flex xs12>\r\n                <v-text-field\r\n                  dense\r\n                  class=\"input-text\"\r\n                  placeholder=\"Tên đăng nhập\"\r\n                  v-model=\"userName\"\r\n                  :rules=\"[v => !!v || 'Tên đăng nhập là bắt buộc']\"\r\n                  required\r\n                  prepend-inner-icon=\"mdi-account\"\r\n                  @keyup.enter=\"login\"\r\n                  hide-details=\"auto\"\r\n                ></v-text-field>\r\n              </v-flex>\r\n              <v-flex xs12 class=\"\" style=\"margin-top: 30px\">\r\n                <v-text-field\r\n                  class=\"input-text\"\r\n                  dense\r\n                  placeholder=\"Mật khẩu\"\r\n                  v-model=\"password\"\r\n                  :type=\"'password'\"\r\n                  :rules=\"[v => !!v || 'Mật khẩu là bắt buộc']\"\r\n                  required\r\n                  prepend-inner-icon=\"mdi-key\"\r\n                  @keyup.enter=\"login\"\r\n                  hide-details=\"auto\"\r\n                ></v-text-field>\r\n              </v-flex>\r\n              <v-flex xs12 class=\"wrap-btn-login\" style=\"margin-top: 30px;margin-bottom: 20px\">\r\n                <v-btn class=\"my-0 white--text mr-3 btn-login\" style=\"padding: 0 15px !important;\"\r\n                  :loading=\"loading\"\r\n                  :disabled=\"loading\"\r\n                  @click=\"login\"\r\n                >\r\n                  <v-icon size=\"20\">mdi-login</v-icon>&nbsp;\r\n                  Đăng nhập\r\n                </v-btn>\r\n              </v-flex>\r\n              \r\n              <!-- <v-flex xs12 class=\"wrap-btn-login\" style=\"margin-top: 100px;\">\r\n                <v-btn class=\"my-0 white--text mr-3 btn-login\" style=\"padding: 0 15px !important;\"\r\n                  :loading=\"loading\"\r\n                  :disabled=\"loading\"\r\n                  @click=\"loginKeyCloak\"\r\n                >\r\n                  <v-icon size=\"20\">mdi-login</v-icon>&nbsp;\r\n                  Đăng nhập hệ thống\r\n                </v-btn>\r\n              </v-flex> -->\r\n            </v-form>\r\n          </div>\r\n        </div>\r\n        <div class=\"wrap-form px-3 py-3\" v-if=\"signed\">\r\n          <div class=\"text-login\">TÀI KHOẢN ĐÃ ĐĂNG NHẬP HỆ THỐNG</div>\r\n          <v-flex xs12  style=\"margin: 20px 0;text-align: center;\">\r\n            <v-btn class=\"my-0 white--text mr-3 btn-login\" style=\"padding: 0 15px !important;\"\r\n              :loading=\"loading\"\r\n              :disabled=\"loading\"\r\n              @click=\"submitLogout\"\r\n            >\r\n              <div class=\"v-btn__content\">\r\n                <v-icon size=\"18\">mdi-logout-variant</v-icon>&nbsp;\r\n                <span>Đăng xuất</span>\r\n              </div>\r\n            </v-btn>\r\n            <v-btn class=\"my-0 white--text mr-3 btn-login\" style=\"padding: 0 15px !important;\"\r\n              :loading=\"loading\"\r\n              :disabled=\"loading\"\r\n              @click=\"goToPage\"\r\n            >\r\n                <v-icon size=\"20\">mdi-home-circle-outline</v-icon>&nbsp;\r\n                <span>Truy cập hệ thống</span>\r\n            </v-btn>\r\n          </v-flex>\r\n        </div>\r\n      </div> \r\n      \r\n    </v-container>\r\n    <div class=\"wrap-contact-info\">\r\n      <div class=\"mb-1\">Trung tâm công nghệ thông tin - Bộ Giao thông vận tải</div>\r\n      <div class=\"mb-1\">\r\n        <v-icon size=\"18\" color=\"#fff\">mdi-map-marker-outline</v-icon>&nbsp;\r\n        <span>Trụ sở: Số 80 Trần Hưng Đạo, Hoàn Kiếm, Hà Nội</span>\r\n      </div>\r\n      <div class=\"mb-1\">\r\n        <v-icon size=\"18\" color=\"#fff\">mdi-phone-in-talk-outline</v-icon>&nbsp;\r\n        <span>1900 0318 - (024) 3.822.2979</span>\r\n      </div>\r\n      <div class=\"mb-1\">\r\n        <v-icon size=\"18\" color=\"#fff\">mdi-email-outline</v-icon>&nbsp;\r\n        <span>bophanhotro@mt.gov.vn</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"text-center\">\r\n      <v-overlay :value=\"overlay\">\r\n        <v-progress-circular\r\n          indeterminate\r\n          size=\"64\"\r\n        ></v-progress-circular>\r\n      </v-overlay>\r\n    </div>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\n  import Vue from 'vue'\r\n  import axios from 'axios'\r\n  import toastr from 'toastr'\r\n  toastr.options = {\r\n    'closeButton': true,\r\n    'timeOut': '5000',\r\n    \"positionClass\": \"toast-top-center\"\r\n  }\r\n  export default {\r\n    name: 'Login',\r\n\r\n    data: () => ({\r\n      publicPath: process.env.VUE_APP_PULIC_PATH,\r\n      apiSso: process.env.VUE_APP_PATH_API_SSO,\r\n      overlay: false,\r\n      loading: false,\r\n      valid: true,\r\n      userName: '',\r\n      password: '',\r\n      client_secret: '',\r\n      code: '',\r\n      signed: false\r\n    }),\r\n    created () {\r\n      let vm = this\r\n      // let searchParams = ''\r\n      // let params = window.location.search.substring(1)\r\n      // if (params) {\r\n      //   let isLogin = Vue.$cookies.get('Token')\r\n      //   searchParams = JSON.parse('{\"' + decodeURI(params).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}')\r\n      //   if (!isLogin && searchParams && searchParams['code']) {\r\n      //     vm.overlay = true\r\n      //     vm.code = searchParams['code']\r\n      //     vm.getToken()\r\n      //   }\r\n      // }\r\n      if (Vue.$cookies.get('Token')) {\r\n        vm.signed = true\r\n      } else {\r\n        vm.signed = false\r\n      }\r\n    },\r\n    computed: {\r\n    },\r\n    methods: {\r\n      login () {\r\n        let vm = this\r\n        if (vm.loading || !vm.userName || !vm.password) {\r\n          return\r\n        }\r\n        vm.loading = true\r\n        let filter = {\r\n          data: {\r\n            username: vm.userName,\r\n            password: vm.password,\r\n            app: 'dvc-mobile'\r\n          }\r\n        }\r\n        vm.$store.dispatch('login', filter).then(function (result) {\r\n          vm.loading = false\r\n          if (result && result.access_token) {\r\n            try {\r\n              let payload = String(result.access_token.split('.')[1]).replace(/_/g, \"/\")\r\n              let dataUser = JSON.parse(atob(payload))\r\n              let roleUser = dataUser && dataUser.hasOwnProperty('realm_access') && dataUser.realm_access['roles'] ? dataUser.realm_access.roles : ''\r\n              let admin = roleUser ? roleUser.find(function (item) {\r\n                return item === 'site-admin'\r\n              }) : false\r\n              // console.log('roleUser', roleUser)\r\n              if (roleUser && roleUser.length) {\r\n                vm.$cookies.set('Token', result.access_token, result.expires_in)\r\n                vm.$cookies.set('RefreshToken', result.refresh_token, result.refresh_expires_in)\r\n                axios.defaults.headers['Authorization'] = 'Bearer ' + result.access_token\r\n                vm.$store.commit('SET_ISSIGNED', true)\r\n                if (admin) {\r\n                  vm.$cookies.set('admin', true, result.expires_in)\r\n                  let dataUser1 = {\r\n                    hoVaTen: 'Quản trị',\r\n                    maSoCanBo: '',\r\n                    viTriChucDanh: 'Quản trị hệ thống',\r\n                    vaiTroSuDung: ''\r\n                  }\r\n                  vm.$cookies.set('UserInfo', dataUser1, result.expires_in)\r\n                  vm.$cookies.set('Roles', '', result.expires_in)\r\n                  vm.goToPage()\r\n                } else {\r\n                  // get roles\r\n                  let filter = {\r\n                    token: 'Bearer ' + result.access_token,\r\n                    email: dataUser.email\r\n                  }\r\n                  vm.$store.dispatch('getThongTinUserDangNhap', filter).then(function (result) {\r\n                    let chucDanh = ''\r\n                    let vaiTroSuDung = ''\r\n                    let dataUser2 = {\r\n                      hoVaTen: result.hoVaTen ? result.hoVaTen : '',\r\n                      maSoCanBo: result.maSoCanBo ? result.maSoCanBo : '',\r\n                      viTriChucDanh: chucDanh,\r\n                      vaiTroSuDung: vaiTroSuDung\r\n                    }\r\n                    if (result.viTriChucDanh && result.viTriChucDanh.length) {\r\n                      vaiTroSuDung = []\r\n                      chucDanh = Array.from(result.viTriChucDanh, function (item) {\r\n                        return item.tenGoi\r\n                      })\r\n                      dataUser.viTriChucDanh = chucDanh\r\n                      result.viTriChucDanh.forEach(element => {\r\n                        if (element.vaiTroSuDung && element.vaiTroSuDung.length) {\r\n                          let vaiTroItem = Array.from(element.vaiTroSuDung, function (item) {\r\n                            return item.maMuc\r\n                          })\r\n                          vaiTroSuDung = vaiTroSuDung.concat(vaiTroItem)\r\n                        }\r\n                      })\r\n                      dataUser.vaiTroSuDung = vaiTroSuDung\r\n                      let isAdmin = vaiTroSuDung.find(function (item) {\r\n                        return item == 'QUANTRIHETHONG'\r\n                      })\r\n                      if (isAdmin) {\r\n                        vm.$cookies.set('admin', true, result.expires_in)\r\n                      } else {\r\n                        vm.$cookies.set('admin', '', result.expires_in)\r\n                      }\r\n                      vm.$cookies.set('UserInfo', dataUser2, result.expires_in)\r\n                      vm.$cookies.set('Roles', vaiTroSuDung, result.expires_in)\r\n                    } else {\r\n                      vm.$cookies.set('admin', '', result.expires_in)\r\n                      vm.$cookies.set('UserInfo', dataUser2, result.expires_in)\r\n                      vm.$cookies.set('Roles', vaiTroSuDung, result.expires_in)\r\n                    }\r\n                    setTimeout(function () {\r\n                      vm.goToPage()\r\n                    }, 200)\r\n                  }).catch (function () {\r\n                    vm.loading = false\r\n                    toastr.error('TÀI KHOẢN CHƯA ĐƯỢC CẤP QUYỀN CÁN BỘ')\r\n                    setTimeout(function () {\r\n                      vm.submitLogout()\r\n                    }, 500)\r\n                  })\r\n                }                \r\n              } else {\r\n                vm.loading = false\r\n                vm.overlay = false\r\n                toastr.error('TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG')\r\n                setTimeout(function () {\r\n                  vm.submitLogout()\r\n                }, 500)\r\n              }\r\n            } catch (error) {\r\n              vm.loading = false\r\n              toastr.error('TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG')\r\n              setTimeout(function () {\r\n                vm.submitLogout()\r\n              }, 500)\r\n            }\r\n          } else {\r\n            toastr.remove()\r\n            toastr.error('Tên đăng nhập hoặc mật khẩu không chính xác')\r\n          }\r\n        }).catch(function (result) {\r\n          vm.loading = false\r\n          toastr.remove()\r\n          toastr.error('Tên đăng nhập hoặc mật khẩu không chính xác')\r\n        })\r\n      },\r\n      loginKeyCloak () {\r\n        let vm = this\r\n        if (vm.loading) {\r\n          return\r\n        }\r\n        vm.loading = true\r\n        let filter = {\r\n          uri: process.env.VUE_APP_PATH_REDIRECT_SSO\r\n        }\r\n        vm.$store.dispatch('loginKeyCloak', filter).then(function (result) {\r\n          vm.loading = false\r\n          if (result) {\r\n            window.location.href = result.endpoint\r\n          }\r\n        }).catch(function (result) {\r\n          vm.loading = false\r\n        })\r\n      },\r\n      getToken () {\r\n        let vm = this\r\n        vm.loading = false\r\n        let filter = {\r\n          code: vm.code,\r\n          redirect_uri: process.env.VUE_APP_PATH_REDIRECT_SSO\r\n        }\r\n        vm.$store.dispatch('getTokenKeyCloak', filter).then(function (result) {\r\n          vm.loading = false\r\n          vm.overlay = false\r\n          if (result.access_token) {\r\n            try {\r\n              let payload = String(result.access_token.split('.')[1]).replace(/_/g, \"/\")\r\n              let dataUser = JSON.parse(atob(payload))\r\n              let roleUser = dataUser && dataUser.hasOwnProperty('realm_access') && dataUser.realm_access['roles'] ? dataUser.realm_access.roles : ''\r\n              let admin = roleUser ? roleUser.find(function (item) {\r\n                return item === 'site-admin'\r\n              }) : false\r\n              if (roleUser && roleUser.length) {\r\n                vm.$cookies.set('Token', result.access_token, result.expires_in)\r\n                vm.$cookies.set('RefreshToken', result.refresh_token, result.refresh_expires_in)\r\n                axios.defaults.headers['Authorization'] = 'Bearer ' + result.access_token\r\n                vm.$store.commit('SET_ISSIGNED', true)\r\n                if (admin) {\r\n                  vm.$cookies.set('admin', true, result.expires_in)\r\n                  let dataUser1 = {\r\n                    hoVaTen: 'Quản trị',\r\n                    maSoCanBo: '',\r\n                    viTriChucDanh: 'Quản trị hệ thống',\r\n                    vaiTroSuDung: ''\r\n                  }\r\n                  vm.$cookies.set('UserInfo', dataUser1, result.expires_in)\r\n                  vm.$cookies.set('Roles', '', result.expires_in)\r\n                  window.location.href = window.location.origin  + \"/#/\"\r\n                } else {\r\n                  let filter = {\r\n                    token: 'Bearer ' + result.access_token,\r\n                    email: dataUser.email\r\n                  }\r\n                  vm.$store.dispatch('getEmployee', filter).then(function (result) {\r\n                    let data = result\r\n                    let userId = data.mappingUser.userId ? data.mappingUser.userId : ''\r\n                    let groupId = data.groupId ? data.groupId : ''\r\n                    vm.$cookies.set('userId', String(userId), result.expires_in)\r\n                    vm.$cookies.set('groupId', groupId, result.expires_in)\r\n                  })\r\n                  vm.$store.dispatch('getThongTinUserDangNhap', filter).then(function (result) {\r\n                    let chucDanh = ''\r\n                    let vaiTroSuDung = ''\r\n                    let dataUser2 = {\r\n                      hoVaTen: result.hoVaTen ? result.hoVaTen : '',\r\n                      maSoCanBo: result.maSoCanBo ? result.maSoCanBo : '',\r\n                      viTriChucDanh: chucDanh,\r\n                      vaiTroSuDung: vaiTroSuDung\r\n                    }\r\n                    if (result.viTriChucDanh && result.viTriChucDanh.length) {\r\n                      vaiTroSuDung = []\r\n                      chucDanh = Array.from(result.viTriChucDanh, function (item) {\r\n                        return item.tenGoi\r\n                      })\r\n                      dataUser.viTriChucDanh = chucDanh\r\n                      result.viTriChucDanh.forEach(element => {\r\n                        if (element.vaiTroSuDung && element.vaiTroSuDung.length) {\r\n                          let vaiTroItem = Array.from(element.vaiTroSuDung, function (item) {\r\n                            return item.maMuc\r\n                          })\r\n                          vaiTroSuDung = vaiTroSuDung.concat(vaiTroItem)\r\n                        }\r\n                      })\r\n                      dataUser.vaiTroSuDung = vaiTroSuDung\r\n                      let isAdmin = vaiTroSuDung.find(function (item) {\r\n                        return item == 'QUANTRIHETHONG'\r\n                      })\r\n                      if (isAdmin) {\r\n                        vm.$cookies.set('admin', true, result.expires_in)\r\n                      } else {\r\n                        vm.$cookies.set('admin', '', result.expires_in)\r\n                      }\r\n                    } else {\r\n                      vm.$cookies.set('admin', '', result.expires_in)\r\n                      vm.$cookies.set('UserInfo', dataUser2, result.expires_in)\r\n                      vm.$cookies.set('Roles', vaiTroSuDung, result.expires_in)\r\n                    }\r\n                    \r\n                    vm.$cookies.set('UserInfo', dataUser2, result.expires_in)\r\n                    vm.$cookies.set('Roles', vaiTroSuDung, result.expires_in)\r\n                    setTimeout(function () {\r\n                      window.location.href = window.location.origin  + \"/#/\"\r\n                    }, 200)\r\n                  }).catch (function () {\r\n                    vm.loading = false\r\n                    vm.overlay = false\r\n                    toastr.error('TÀI KHOẢN CHƯA ĐƯỢC CẤP QUYỀN CÁN BỘ')\r\n                    setTimeout(function () {\r\n                      vm.submitLogout()\r\n                    }, 500)\r\n                  })\r\n                }\r\n              } else {\r\n                vm.loading = false\r\n                vm.overlay = false\r\n                toastr.error('TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG')\r\n                setTimeout(function () {\r\n                  vm.submitLogout()\r\n                }, 500)\r\n              }\r\n            } catch (error) {\r\n              vm.loading = false\r\n              vm.overlay = false\r\n              toastr.error('TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG')\r\n              setTimeout(function () {\r\n                vm.submitLogout()\r\n              }, 500)\r\n            }\r\n          }\r\n        }).catch(function (result) {\r\n          vm.loading = false\r\n          vm.overlay = false\r\n          toastr.error('Đăng nhập không thành công')\r\n        })\r\n      },\r\n      submitLogout () {\r\n        let vm = this\r\n        vm.signed = false\r\n        vm.$store.commit('SET_ISSIGNED', false)\r\n        localStorage.setItem('user', null)\r\n        vm.$cookies.set('Token', '')\r\n        vm.$cookies.set('RefreshToken', '')\r\n        // vm.$store.dispatch('logoutKeyCloak').then(function (result) {\r\n        //   let redirect_uri = process.env.VUE_APP_PATH_REDIRECT_SSO\r\n        //   window.location.href = result.endpoint + '?redirect_uri='+ redirect_uri\r\n        // }).catch(function () {\r\n        //   window.location.href = window.location.origin + window.location.pathname + \"#/login\"\r\n        // })\r\n      },\r\n      goToPage () {\r\n        let vm = this\r\n        if (vm.isAdmin || vm.checkRole('THEMMOIBAOCAO')) {\r\n          vm.$router.push({ path: '/' })\r\n        } else if (vm.checkRole('XEMBAOCAODONVI') || vm.checkRole('XEMTATCABAOCAO')) {\r\n          vm.$router.push({ path: '/bao-cao/cho-xu-ly' })\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  $image-login: $public-path + '/images/bg-login.png?t=3913123';\r\n  #app {\r\n    background: transparent !important\r\n  }\r\n  .wrap-login {\r\n    background: url($image-login) no-repeat;\r\n    background-size: cover;\r\n    height: 100vh;\r\n    width: 100%;\r\n    position: relative;\r\n  }\r\n  .wrap-login input {\r\n    padding-top: 0px !important;\r\n  }\r\n  #login-page {\r\n    position: relative;\r\n    margin: 0 auto;\r\n  }\r\n  .container-wrap {\r\n    // background: rgba(14, 42, 66, 0.8);\r\n    // box-shadow: inset -4px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 20px;\r\n    width: auto;\r\n    height: 365px;\r\n    // padding: 45px;\r\n    margin: 0 auto;\r\n    margin-top: 40px;\r\n  }\r\n  #login-page .text-1 {\r\n    font-family: \"Roboto Slab\";\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 24px;\r\n    line-height: 24px;\r\n    color: #ffffff;\r\n    margin-bottom: 20px;\r\n  }\r\n  #login-page .text-2 {\r\n    font-family: \"Roboto Slab\";\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 22px;\r\n    line-height: 28px;\r\n    color: #ffffff;\r\n  }\r\n  .wrap-form {\r\n    max-width: 450px;\r\n    margin: 0 auto;\r\n    background: rgba(14, 42, 66, 0.8);\r\n    border: 1px solid #BAB7B5;\r\n    border-radius: 5px;\r\n    margin-top: 45px;\r\n  }\r\n  .text-login {\r\n    font-family: 'Roboto Slab';\r\n    font-style: normal;\r\n    font-size: 18px;\r\n    line-height: 21px;\r\n    color: #fff;\r\n    text-shadow: 0px 3px 3px rgba(0, 0, 0, 0.17);\r\n    margin-bottom: 15px;\r\n    text-transform: uppercase;\r\n    text-align: center;\r\n  }\r\n  .wrap-login .input-text .v-input__slot:before {\r\n    border-color: transparent;\r\n    border: none !important;\r\n  }\r\n  .wrap-login .input-text .v-input__slot::after {\r\n    display: none !important\r\n  }\r\n  .wrap-login .input-text .v-input__slot {\r\n    border: 1px solid #BAB7B5;\r\n    padding: 4px 5px;\r\n    border-radius: 5px;\r\n    height: 32px\r\n  }\r\n  .input-text .v-icon{\r\n    color: #ffffff !important;\r\n    font-size: 20px !important;\r\n  }\r\n  .input-text input {\r\n    color: #ffffff !important;\r\n    font-size: 14px;\r\n  }\r\n  .input-text  .v-input__slot {\r\n    box-shadow: 0px 3px 1px -2px rgb(0 0 0 / 8%), 0px 2px 2px 0px rgb(0 0 0 / 0%), 0px 1px 5px 0px rgb(0 0 0 / 7%) !important;\r\n  }\r\n  .input-text input::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\r\n    color: #ffffff !important;\r\n    opacity: 1; /* Firefox */\r\n  }\r\n\r\n  .input-text input:-ms-input-placeholder { /* Internet Explorer 10-11 */\r\n    color: #ffffff !important;\r\n  }\r\n\r\n  .input-text input::-ms-input-placeholder { /* Microsoft Edge */\r\n    color: #ffffff !important;\r\n  }\r\n  .btn-login {\r\n    background: linear-gradient(90deg, #114078 0%, #3757AA 100%);\r\n  }\r\n  // .wrap-form .theme--light.v-text-field > .v-input__control > .v-input__slot:before {\r\n  //   border-color: #ffffff !important\r\n  // }\r\n  // .wrap-form .theme--light.v-text-field > .v-input__control > .v-input__slot:after {\r\n  //   border-color: #ffffff !important\r\n  // }\r\n  // \r\n  .wrap-title, .wrap-btn-login {\r\n    text-align: center;\r\n  }\r\n  .wrap-contact-info {\r\n    max-width: 1366px !important;\r\n    height: 120px;\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 100px;\r\n    color: #ffffff !important;\r\n  }\r\n  @media screen and (min-width: 320px) and (max-width: 768px) {\r\n    .container-wrap {\r\n      width: 300px;\r\n      padding: 8px;\r\n      margin-top: 20%\r\n    }\r\n    .text-1, .text-2 {\r\n      font-size: 16px;\r\n    }\r\n    .wrap-title, .wrap-btn-login {\r\n      text-align: center;\r\n    }\r\n  }\r\n  @media screen and (min-width: 375px) and (max-width: 768px){\r\n    .container-wrap {\r\n      width: 350px;\r\n      padding: 8px;\r\n    }\r\n  }\r\n  @media screen and (min-width: 768px){\r\n    .img-login-logo {\r\n      width: 85px;\r\n    }\r\n  }\r\n</style>\r\n"]}]}