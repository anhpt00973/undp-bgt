{"remainingRequest":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vuejs-sourcode\\undp-bgt\\src\\views\\QuanLyDanhMuc.vue?vue&type=style&index=0&id=6cd8d9dc&lang=scss&","dependencies":[{"path":"F:\\vuejs-sourcode\\undp-bgt\\src\\views\\QuanLyDanhMuc.vue","mtime":1665053037814},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\css-loader\\dist\\cjs.js","mtime":1665053118453},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1665053120726},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\postcss-loader\\src\\index.js","mtime":1665053119174},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1665053118004},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665053118014},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053120378}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNkYW5obXVjLXBhZ2UgLnYtbGlzdCB7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKfQojZGFuaG11Yy1wYWdlIC52LWxpc3QtaXRlbSB7CiAgcGFkZGluZzogMCA4cHggIWltcG9ydGFudAp9CiNkYW5obXVjLXBhZ2UgLnYtbGlzdC1pdGVtLS1kZW5zZSAudi1saXN0LWl0ZW1fX2ljb24sIC52LWxpc3QtLWRlbnNlIC52LWxpc3QtaXRlbSAudi1saXN0LWl0ZW1fX2ljb24gewogIGhlaWdodDogMjBweCAhaW1wb3J0YW50Owp9Ci5kYW5oLW11Yy0xIHsKICB3aWR0aDogMjM1cHg7CiAgbWF4LXdpZHRoOiAyMzVweDsKICBwYWRkaW5nLXJpZ2h0OiAxNXB4OwogIGhlaWdodDogMTAwJTsKfQouZGFuaC1tdWMtMSAudi1saXN0IHsKICBwYWRkaW5nLXRvcDogMHB4Owp9Ci5kYW5oLW11Yy0yIHsKICB3aWR0aDogY2FsYygxMDAlIC0gMjM1cHgpOwogIGJvcmRlci10b3A6IDBweDsKfQoubmF2LWNvbnRlbnQgewogIG1pbi1oZWlnaHQ6IGNhbGMoMTAwdmggLSAzNnB4KTsKICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjREREREREOwp9CgoKLndyYXAtY29udGVudC0yIHsKICBwYWRkaW5nOiAxMnB4Cn0KCiN0YWJsZS1kYW5obXVjIHRkewogIGhlaWdodDogNDJweCAhaW1wb3J0YW50Owp9Ci50ZXh0LWxhYmVsIHsKICB3aWR0aDogMTUwcHg7CiAgbWF4LXdpZHRoOiAxNTBweDsKICBjb2xvcjogYmxhY2s7CiAgZm9udC1zaXplOiAxNHB4OwogIGxpbmUtaGVpZ2h0OiAyOHB4Owp9Cg=="},{"version":3,"sources":["QuanLyDanhMuc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAy3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QuanLyDanhMuc.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-card\r\n    class=\"mx-auto px-3 pt-3 \"\r\n    outlined\r\n    flat\r\n    id=\"danhmuc-page\"\r\n  >\r\n    <v-row justify=\"end\" class=\"mt-0 mb-0 mx-0\" style=\"border-bottom: 1px solid #2161B1\">\r\n      <v-col class=\"d-flex align-center justify-start py-0 px-0\" style=\"color: #2161B1;font-weight: 500;\">\r\n        <div class=\"header-content\">\r\n          DỮ LIỆU DANH MỤC\r\n        </div>\r\n        <div class=\"triangle-header\"></div>\r\n      </v-col>\r\n      <v-spacer></v-spacer>\r\n    </v-row>\r\n    <v-layout wrap>\r\n      <v-flex class=\"danh-muc-1\">\r\n        <div class=\"nav-content\">\r\n          <v-list dense>\r\n            <v-list-item\r\n              v-for=\"(item, i) in items\"\r\n              :key=\"item.maDanhMuc\"\r\n              @click=\"selectMenu(item, i)\"\r\n              :style=\"selectedItem == item.maDanhMuc ? 'background: #dedede;' : ''\"\r\n            >\r\n              <v-list-item-icon class=\"mr-2\">\r\n                <v-icon size=\"20\" color=\"primary\" v-if=\"selectedItem == item.maDanhMuc\">mdi-play</v-icon>\r\n              </v-list-item-icon>\r\n              <v-list-item-content>\r\n                <v-list-item-title v-text=\"item.tenDanhMuc\"></v-list-item-title>\r\n              </v-list-item-content>\r\n            </v-list-item>\r\n          </v-list>\r\n        </div>\r\n      </v-flex>\r\n      <v-flex class=\"danh-muc-2\">\r\n        <!-- <v-row class=\"mx-0 my-0\" style=\"border-bottom: 1px solid #2161B1\">\r\n          <v-col class=\"d-flex justify-start px-0 py-0\" style=\"max-width: 250px;color: #2161B1;font-weight: 500;height: 36px;\">\r\n            <div class=\"header-content\" style=\"min-width: 100px;\">\r\n              <span>{{itemSelect['text']}}</span>\r\n            </div>\r\n          </v-col>\r\n        </v-row> -->\r\n        <v-layout wrap class=\"wrap-content-2 pb-0 pl-0\">\r\n          <v-flex xs12 :class=\"itemSelect['collectionName'] === 'phuongxa' ? 'md6 pr-2 mb-2' : 'md12 mb-2'\" v-if=\"itemSelect['collectionName'] === 'quanhuyen' || itemSelect['collectionName'] === 'phuongxa'\">\r\n            <v-autocomplete\r\n              class=\"flex input-form\"\r\n              hide-no-data\r\n              :items=\"itemsTinhThanh\"\r\n              v-model=\"tinhThanhSearch\"\r\n              item-text=\"tenMuc\"\r\n              item-value=\"maMuc\"\r\n              dense\r\n              solo\r\n              hide-details=\"auto\"\r\n              :rules=\"required\"\r\n              required\r\n              @change=\"changeTinhThanhSearch\"\r\n              placeholder=\"Chọn Tỉnh/ thành\"\r\n            >\r\n              <template v-slot:selection=\"data\">\r\n                <span>{{ data.item.tenMuc }} - {{ data.item.maMuc }}</span>\r\n              </template>\r\n              <template v-slot:item=\"data\">\r\n                <span>{{ data.item.tenMuc }} - {{ data.item.maMuc }}</span>\r\n              </template>\r\n            </v-autocomplete>\r\n          </v-flex>\r\n          <v-flex xs12 md6 v-if=\"itemSelect['collectionName'] === 'phuongxa'\">\r\n            <v-autocomplete\r\n              class=\"flex input-form\"\r\n              hide-no-data\r\n              :items=\"itemsQuanHuyenSearch\"\r\n              v-model=\"quanHuyenSearch\"\r\n              item-text=\"tenMuc\"\r\n              item-value=\"maMuc\"\r\n              dense\r\n              solo\r\n              hide-details=\"auto\"\r\n              :rules=\"required\"\r\n              required\r\n              placeholder=\"Chọn Quận/ huyện\"\r\n            >\r\n              <template v-slot:selection=\"data\">\r\n                <span>{{ data.item.tenMuc }} - {{ data.item.maMuc }}</span>\r\n              </template>\r\n              <template v-slot:item=\"data\">\r\n                <span>{{ data.item.tenMuc }} - {{ data.item.maMuc }}</span>\r\n              </template>\r\n            </v-autocomplete>\r\n          </v-flex>\r\n          <v-flex xs12 md12 class=\"\">\r\n            <v-text-field\r\n              class=\"input-form\"\r\n              dense\r\n              solo\r\n              placeholder=\"Nhập mã danh mục hoặc tên danh mục\"\r\n              v-model=\"dictName\"\r\n              @keyup.enter=\"getDanhMuc\"\r\n              hide-details=\"auto\"\r\n              height=\"32px\"\r\n            ></v-text-field>\r\n          </v-flex>\r\n          <!-- <v-flex xs12 md6 class=\"\">\r\n            <v-autocomplete\r\n              class=\"input-form\"\r\n              dense\r\n              solo\r\n              placeholder=\"Trạng thái\"\r\n              v-model=\"statusFilter\"\r\n              :items=\"itemsStatus\"\r\n              item-text=\"name\"\r\n              item-value=\"value\"\r\n              @keyup.enter=\"\"\r\n              hide-details=\"auto\"\r\n              height=\"32px\"\r\n              clearable\r\n            ></v-autocomplete>\r\n          </v-flex> -->\r\n          <v-flex xs12 class=\"mt-3\">\r\n            <v-btn\r\n              small\r\n              class=\"btn-form mx-0 mr-2 left\"\r\n              color=\"primary\"\r\n              :loading=\"loading\" :disabled=\"loading\"\r\n              @click.stop=\"pickFileImport()\"\r\n              v-if=\"itemSelect['collectionName'] === 'tinhthanh'\"\r\n            >\r\n              <v-icon size=\"18\">mdi-import</v-icon>&nbsp;\r\n              Import dữ liệu\r\n            </v-btn>\r\n            <!-- <v-btn\r\n              small\r\n              class=\"btn-form mx-0 left\"\r\n              color=\"primary\"\r\n              @click=\"showForm()\"\r\n            >\r\n              <v-icon size=\"18\">mdi-plus</v-icon>&nbsp;\r\n              Thêm mới\r\n            </v-btn> -->\r\n            <v-btn small @click=\"getDanhMuc('reset')\" color=\"primary\" class=\"mx-0 text-white\" style=\"float: right;\">\r\n              <v-icon size=\"18\">mdi-magnify</v-icon>&nbsp;\r\n              Tìm kiếm\r\n            </v-btn>\r\n          </v-flex>\r\n        </v-layout>\r\n        <v-card\r\n            class=\"mx-auto pa-3 pl-0 mb-7\"\r\n            flat\r\n        >\r\n            <v-data-table\r\n              flat\r\n              :headers=\"headers\"\r\n              :items=\"itemsDanhMuc\"\r\n              :items-per-page=\"itemsPerPage\"\r\n              item-key=\"maMuc\"\r\n              hide-default-footer\r\n              class=\"elevation-1\"\r\n              no-data-text=\"Không có\"\r\n              :loading=\"loadingData\"\r\n              loading-text=\"Đang tải... \"\r\n              id=\"table-danhmuc\"\r\n            >\r\n                <template v-slot:item.index=\"{ item, index }\">\r\n                    <div>{{ (page+1) * itemsPerPage - itemsPerPage + index + 1 }}</div>\r\n                </template>\r\n                <template v-slot:item.tinhTrang=\"{ item }\">\r\n                    <div :style=\"item.tinhTrang == '1' ? 'color: green' : 'color: red'\">\r\n                        {{ getStatus(item.tinhTrang) }}\r\n                    </div>\r\n                </template>\r\n                <template v-slot:item.action=\"{ item }\">\r\n                  <div>\r\n                    <v-tooltip top>\r\n                      <template v-slot:activator=\"{ on, attrs }\">\r\n                        <v-btn small @click=\"showForm(item)\" color=\"blue\" text icon class=\" mr-3\" v-bind=\"attrs\" v-on=\"on\">\r\n                          <v-icon size=\"22\">mdi-pencil</v-icon>\r\n                        </v-btn>\r\n                      </template>\r\n                      <span>Sửa</span>\r\n                    </v-tooltip>\r\n                    <v-tooltip top>\r\n                      <template v-slot:activator=\"{ on, attrs }\">\r\n                        <v-btn small @click=\"deleteDanhMuc(item)\" color=\"red\" text icon class=\"\" v-bind=\"attrs\" v-on=\"on\">\r\n                          <v-icon size=\"22\">mdi-delete</v-icon>\r\n                        </v-btn>\r\n                      </template>\r\n                      <span>Xóa</span>\r\n                    </v-tooltip>\r\n                  </div>\r\n                </template>\r\n            </v-data-table>\r\n            <pagination v-if=\"pageCount\" :pageInput=\"page\" :pageCount=\"pageCount\" :total=\"total\" @tiny:change-page=\"changePage\"></pagination>\r\n        </v-card>\r\n      </v-flex>\r\n    </v-layout>\r\n    <v-dialog\r\n      max-width=\"900\"\r\n      v-model=\"dialogAddDanhMuc\"\r\n      persistent\r\n    >\r\n      <v-card>\r\n        <v-toolbar\r\n          dark\r\n          color=\"primary\" class=\"px-3\"\r\n        >\r\n          <v-toolbar-title v-if=\"typeAction === 'add'\">Thêm danh mục</v-toolbar-title>\r\n          <v-toolbar-title v-else>Cập nhật danh mục</v-toolbar-title>\r\n          <v-spacer></v-spacer>\r\n          <v-toolbar-items>\r\n            <v-btn\r\n              small\r\n              icon\r\n              dark\r\n              @click=\"dialogAddDanhMuc = false\"\r\n            >\r\n              <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n          </v-toolbar-items>\r\n        </v-toolbar>\r\n        <v-card-text class=\"mt-5\">\r\n          <v-form\r\n            ref=\"formAddDanhMuc\"\r\n            v-model=\"validFormAdd\"\r\n            lazy-validation\r\n          >\r\n              <v-layout wrap>\r\n                <v-flex xs12 class=\"mb-2\">\r\n                  <v-layout wrap>\r\n                    <div class=\"flex text-label\">\r\n                      <span>Mã mục</span>\r\n                      <span class=\"red--text\"> (*)</span>\r\n                    </div>\r\n                    <v-text-field\r\n                      class=\"flex input-form\"\r\n                      v-model=\"maMuc\"\r\n                      solo\r\n                      dense\r\n                      :readonly=\"typeAction === 'update'\"\r\n                      :rules=\"required\"\r\n                      required\r\n                      hide-details=\"auto\"\r\n                    ></v-text-field>\r\n                  </v-layout>\r\n                </v-flex>\r\n                <v-flex xs12 class=\"mb-2\">\r\n                  <v-layout wrap>\r\n                    <div class=\"flex text-label\">\r\n                      <span>Tên mục</span>\r\n                      <span class=\"red--text\"> (*)</span>\r\n                    </div>\r\n                    <v-text-field\r\n                      class=\"flex input-form\"\r\n                      v-model=\"tenMuc\"\r\n                      solo\r\n                      dense\r\n                      :rules=\"required\"\r\n                      required\r\n                      hide-details=\"auto\"\r\n                      clearable\r\n                    ></v-text-field>\r\n                  </v-layout>\r\n                </v-flex>\r\n                <!-- <v-flex xs12 class=\"mb-2\">\r\n                  <v-layout wrap>\r\n                    <div class=\"flex text-label\">\r\n                      <span>Trạng thái</span>\r\n                      <span class=\"red--text\"> (*)</span>\r\n                    </div>\r\n                    <v-autocomplete\r\n                      class=\"flex input-form\"\r\n                      hide-no-data\r\n                      :items=\"itemsStatus\"\r\n                      v-model=\"statusCreate\"\r\n                      item-text=\"name\"\r\n                      item-value=\"value\"\r\n                      :rules=\"required\"\r\n                      required\r\n                      dense\r\n                      solo\r\n                      hide-details=\"auto\"\r\n                    ></v-autocomplete>\r\n                  </v-layout>\r\n                </v-flex> -->\r\n                <v-flex class=\"mb-2\" xs12 v-if=\"itemSelect['collectionName'] === 'quanhuyen' || itemSelect['collectionName'] === 'phuongxa'\">\r\n                  <v-layout wrap>\r\n                    <div class=\"flex text-label\">\r\n                      <span>Danh mục cha</span>\r\n                      <span class=\"red--text\"> (*)</span>\r\n                    </div>\r\n                    <v-autocomplete\r\n                      class=\"flex input-form\"\r\n                      hide-no-data\r\n                      :items=\"itemsTinhThanh\"\r\n                      v-model=\"danhMucChaQuanHuyen\"\r\n                      item-text=\"tenMuc\"\r\n                      item-value=\"maMuc\"\r\n                      dense\r\n                      solo\r\n                      hide-details=\"auto\"\r\n                      :rules=\"required\"\r\n                      required\r\n                      return-object\r\n                      @change=\"changeTinhThanh\"\r\n                      :label=\"itemSelect['collectionName'] === 'phuongxa' ? 'Tỉnh/ thành' : ''\"\r\n                    >\r\n                      <template v-slot:selection=\"data\">\r\n                        <span>{{ data.item.tenMuc }} - {{ data.item.maMuc }}</span>\r\n                      </template>\r\n                      <template v-slot:item=\"data\">\r\n                        <span>{{ data.item.tenMuc }} - {{ data.item.maMuc }}</span>\r\n                      </template>\r\n                    </v-autocomplete>\r\n                  </v-layout>\r\n                </v-flex>\r\n                <v-flex class=\"mb-2\" v-if=\"itemSelect['collectionName'] === 'phuongxa'\">\r\n                  <v-layout wrap>\r\n                    <div class=\"flex text-label\">\r\n                    </div>\r\n                    <v-autocomplete\r\n                      class=\"flex input-form\"\r\n                      hide-no-data\r\n                      :items=\"itemsQuanHuyen\"\r\n                      v-model=\"danhMucChaPhuongXa\"\r\n                      item-text=\"tenMuc\"\r\n                      item-value=\"maMuc\"\r\n                      dense\r\n                      solo\r\n                      hide-details=\"auto\"\r\n                      :rules=\"required\"\r\n                      required\r\n                      return-object\r\n                      label=\"Quận/ huyện\"\r\n                    >\r\n                      <template v-slot:selection=\"data\">\r\n                        <span>{{ data.item.tenMuc }} - {{ data.item.maMuc }}</span>\r\n                      </template>\r\n                      <template v-slot:item=\"data\">\r\n                        <span>{{ data.item.tenMuc }} - {{ data.item.maMuc }}</span>\r\n                      </template>\r\n                    </v-autocomplete>\r\n                  </v-layout>\r\n                </v-flex>\r\n                <v-flex xs12 class=\"mb-2\">\r\n                  <v-layout wrap>\r\n                    <div class=\"flex text-label\">\r\n                      <span>Ghi chú</span>\r\n                    </div>\r\n                    <v-textarea\r\n                      class=\"flex input-form\"\r\n                      v-model=\"ghiChu\"\r\n                      solo\r\n                      dense\r\n                      hide-details=\"auto\"\r\n                      rows=\"3\"\r\n                      clearable\r\n                    ></v-textarea>\r\n                  </v-layout>\r\n                </v-flex>\r\n              </v-layout>\r\n          </v-form>\r\n        </v-card-text>\r\n        <v-card-actions class=\"justify-end\">\r\n          <v-btn small color=\"red\" class=\"white--text mr-2\" :loading=\"loading\" :disabled=\"loading\" @click=\"dialogAddDanhMuc = false\">\r\n            <v-icon left>\r\n              mdi-close\r\n            </v-icon>\r\n            Thoát\r\n          </v-btn>\r\n          <v-btn small v-if=\"typeAction === 'add'\" class=\"mr-2\" color=\"primary\" :loading=\"loading\" :disabled=\"loading\" @click=\"submitAddDanhMuc\">\r\n            <v-icon left>\r\n              mdi-content-save\r\n            </v-icon>\r\n            <span>Thêm mới</span>\r\n          </v-btn>\r\n          <v-btn small v-else class=\"mr-2\" color=\"primary\" :loading=\"loading\" :disabled=\"loading\" @click=\"submitUpdateDanhMuc\">\r\n            <v-icon left>\r\n              mdi-content-save\r\n            </v-icon>\r\n            <span>Cập nhật</span>\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <input type=\"file\" id=\"file_import\" accept=\".xml\" @input=\"uploadFileImport()\" style=\"display:none\">\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\n  import $ from 'jquery'\r\n  import Pagination from './Pagination.vue'\r\n  import toastr from 'toastr'\r\n\r\n  toastr.options = {\r\n    'closeButton': true,\r\n    'timeOut': '5000',\r\n    \"positionClass\": \"toast-top-center\"\r\n  }\r\n\r\n  export default {\r\n    name: 'DanhMuc',\r\n    components: {\r\n      Pagination\r\n    },\r\n    data: () => ({\r\n      loading: false,\r\n      dialogAddDanhMuc: false,\r\n      typeAction: 'add',\r\n      dataAction: '',\r\n      validFormAdd: false,\r\n      itemsStatus: [\r\n        {name: 'Sử dụng', value: '1'},\r\n        {name: 'Không sử dụng', value: '0'}\r\n      ],\r\n      statusFilter: '',\r\n      statusCreate: '',\r\n      itemsDanhMucCha: [],\r\n      danhMucChaQuanHuyen: '',\r\n      danhMucChaPhuongXa: '',\r\n      dictName: '',\r\n      dictCode: '',\r\n      selectedItem: '1',\r\n      itemSelect: '',\r\n      items: [\r\n        { text: 'Giới tính', value: '1', collectionName: 'gioitinh'},\r\n        { text: 'Dân tộc', value: '2', collectionName: 'dantoc' },\r\n        { text: 'Tôn giáo', value: '3', collectionName: 'tongiao' },\r\n        { text: 'Quốc gia', value: '4', collectionName: 'quocgia' },\r\n        { text: 'Tỉnh/ thành', value: '5', collectionName: 'tinhthanh' },\r\n        { text: 'Quận/ huyện', value: '6', collectionName: 'quanhuyen' },\r\n        { text: 'Xã/ phường', value: '7', collectionName: 'phuongxa' },\r\n        { text: 'Vai trò sử dụng', value: '8', collectionName: 'vaitrosudung' },\r\n        { text: 'Loại giấy tờ tùy thân', value: '9', collectionName: 'loaigiaytotuythan' },\r\n        { text: 'Trạng thái dữ liệu', value: '10', collectionName: 'trangthaidulieu' },\r\n        { text: 'Tình trạng tổ chức', value: '11', collectionName: 'tinhtrangtochuc' },\r\n        { text: 'Tình trạng công tác', value: '12', collectionName: 'tinhtrangcongtac' },\r\n        { text: 'Tình trạng sử dụng tài khoản', value: '13', collectionName: 'tinhtrangsudungtaikhoan' }\r\n      ],\r\n      headers: [\r\n        {\r\n            sortable: false,\r\n            text: 'STT',\r\n            align: 'center',\r\n            value: 'index'\r\n        },\r\n        {\r\n            sortable: false,\r\n            text: 'Mã mục',\r\n            align: 'left',\r\n            value: 'maMuc'\r\n        },\r\n        {\r\n            sortable: false,\r\n            text: 'Tên mục',\r\n            align: 'left',\r\n            value: 'tenMuc'\r\n        },\r\n        // {\r\n        //     sortable: false,\r\n        //     text: 'Trạng thái',\r\n        //     align: 'left',\r\n        //     value: 'tinhTrang'\r\n        // },\r\n        // {\r\n        //     sortable: false,\r\n        //     text: 'Thao tác',\r\n        //     align: 'center',\r\n        //     value: 'action',\r\n        //     width: 120\r\n        // },\r\n      ],\r\n      itemsDanhMuc: [],\r\n      page: 0,\r\n      itemsPerPage: 20,\r\n      total: 0,\r\n      pageCount: 0,\r\n      loadingData: false,\r\n      required: [\r\n        v => (v !== '' && v !== null && v !== undefined) || 'Thông tin bắt buộc'\r\n      ],\r\n      tenMuc: '',\r\n      maMuc: '',\r\n      ghiChu: '',\r\n      itemUpdate: '',\r\n      itemsTinhThanh: [],\r\n      itemsQuanHuyen: [],\r\n      itemsQuanHuyenSearch: [],\r\n      tinhThanhSearch: '',\r\n      quanHuyenSearch: '',\r\n      tinhThanhDefault: process.env.VUE_APP_MA_TINH_THANH\r\n    }),\r\n    created () {\r\n      let vm = this\r\n      if (!vm.isAdmin) {\r\n        vm.$router.push({ path: '/login'})\r\n        return\r\n      }\r\n      vm.$store.commit('SET_INDEXTAB', 3)\r\n      vm.getDanhSachDanhMuc()\r\n    },\r\n    computed: {\r\n    },\r\n    watch: {\r\n    },\r\n    methods: {\r\n      showForm (item) {\r\n        let vm = this\r\n        if (item) {\r\n          vm.typeAction = 'update'\r\n          vm.itemUpdate = item\r\n          vm.danhMucChaQuanHuyen = ''\r\n          vm.danhMucChaPhuongXa = ''\r\n        } else {\r\n          vm.typeAction = 'add'\r\n        }\r\n        vm.dialogAddDanhMuc = true\r\n        setTimeout(function () {\r\n          if (item) {\r\n            vm.maMuc = item.maMuc\r\n            vm.tenMuc = item.tenMuc\r\n            vm.ghiChu = item.ghiChu\r\n            if (vm.itemSelect.collectionName === 'quanhuyen') {\r\n              vm.danhMucChaQuanHuyen = item.thamChieu\r\n            }\r\n            if (vm.itemSelect.collectionName === 'phuongxa') {\r\n              vm.itemsQuanHuyen = vm.itemsQuanHuyenSearch\r\n              vm.danhMucChaQuanHuyen = vm.itemsTinhThanh.find(function (item) {\r\n                return item.maMuc == vm.tinhThanhSearch\r\n              })\r\n              vm.danhMucChaPhuongXa = item.thamChieu\r\n            }\r\n            try {\r\n              vm.statusCreate = vm.itemsStatus.find(function (itemFilter) {\r\n                return item.tinhTrang == itemFilter.value\r\n              })['value']\r\n            } catch (error) {\r\n            }\r\n          } else {\r\n            vm.maMuc = ''\r\n            vm.tenMuc = ''\r\n            vm.ghiChu = ''\r\n            // vm.danhMucChaQuanHuyen = vm.itemsTinhThanh.find(function (item) {\r\n            //   return item.maMuc === vm.tinhThanhDefault\r\n            // })\r\n            vm.danhMucChaQuanHuyen = vm.itemsTinhThanh.find(function (item) {\r\n              return item.maMuc == vm.tinhThanhSearch\r\n            })\r\n            vm.danhMucChaPhuongXa = ''\r\n            vm.statusCreate = '1'\r\n            if (vm.itemSelect.collectionName === 'phuongxa') {\r\n              // vm.getDanhMucCha('quanhuyen')\r\n              vm.itemsQuanHuyen = vm.itemsQuanHuyenSearch\r\n              vm.danhMucChaPhuongXa = vm.itemsQuanHuyenSearch.find(function (item) {\r\n                return item.maMuc === vm.quanHuyenSearch\r\n              })\r\n            }\r\n          }\r\n          vm.$refs.formAddDanhMuc.resetValidation()\r\n        }, 200)\r\n      },\r\n      submitAddDanhMuc () {\r\n        let vm = this\r\n        vm.dataAction = {\r\n          maMuc: vm.maMuc,\r\n          tenMuc: vm.tenMuc,\r\n          tinhTrang: vm.statusCreate,\r\n          ghiChu: vm.ghiChu,\r\n          nguoiTaoLap: {\r\n            maSoID: '',\r\n            tenDinhDanh: '',\r\n            type: ''\r\n          },\r\n          thamChieu: {\r\n            maMuc: '',\r\n            tenMuc: '',\r\n            type: ''\r\n          }\r\n        }\r\n        if (vm.itemSelect.collectionName === 'quanhuyen') {\r\n          vm.dataAction.thamChieu = {\r\n            maMuc: vm.danhMucChaQuanHuyen.maMuc,\r\n            tenMuc: vm.danhMucChaQuanHuyen.tenMuc,\r\n            type: vm.danhMucChaQuanHuyen.type\r\n          }\r\n        }\r\n        if (vm.itemSelect.collectionName === 'phuongxa') {\r\n          vm.dataAction.thamChieu = {\r\n            maMuc: vm.danhMucChaPhuongXa.maMuc,\r\n            tenMuc: vm.danhMucChaPhuongXa.tenMuc,\r\n            type: vm.danhMucChaPhuongXa.type\r\n          }\r\n        }\r\n        if (vm.loading) {\r\n          return\r\n        }\r\n        vm.loading = true\r\n        if (vm.$refs.formAddDanhMuc.validate()) {\r\n          let filter = {\r\n            collectionName: vm.itemSelect.collectionName,\r\n            data: vm.dataAction\r\n          }\r\n          vm.$store.dispatch('collectionCreate', filter).then(function (result) {\r\n            vm.loading = false\r\n            toastr.remove()\r\n            toastr.success('Thêm danh mục thành công')\r\n            vm.getDanhMuc()\r\n            vm.dialogAddDanhMuc = false\r\n          }).catch(function (response) {\r\n            vm.loading = false\r\n            toastr.remove()\r\n            if (response && response.status == 409) {\r\n              toastr.error('Mã danh mục đã tồn tại')\r\n              return\r\n            }\r\n            toastr.error('Thêm danh mục thất bại')\r\n          })\r\n        } else {\r\n          vm.loading = false\r\n        }\r\n      },\r\n      submitUpdateDanhMuc () {\r\n        let vm = this\r\n        vm.dataAction = {\r\n          maMuc: vm.itemUpdate.maMuc,\r\n          tenMuc: vm.tenMuc,\r\n          tinhTrang: vm.statusCreate,\r\n          type: vm.itemUpdate.type,\r\n          nguoiTaoLap: {\r\n            maSoID: '',\r\n            tenDinhDanh: '',\r\n            type: ''\r\n          },\r\n          thamChieu: {\r\n            maMuc: '',\r\n            tenMuc: '',\r\n            type: ''\r\n          },\r\n          ghiChu: vm.ghiChu\r\n        }\r\n        if (vm.itemSelect.collectionName === 'quanhuyen') {\r\n          vm.dataAction.thamChieu = {\r\n            maMuc: vm.danhMucChaQuanHuyen.maMuc,\r\n            tenMuc: vm.danhMucChaQuanHuyen.tenMuc,\r\n            type: vm.danhMucChaQuanHuyen.type\r\n          }\r\n        }\r\n        if (vm.itemSelect.collectionName === 'phuongxa') {\r\n          vm.dataAction.thamChieu = {\r\n            maMuc: vm.danhMucChaPhuongXa.maMuc,\r\n            tenMuc: vm.danhMucChaPhuongXa.tenMuc,\r\n            type: vm.danhMucChaPhuongXa.type\r\n          }\r\n        }\r\n        if (vm.loading) {\r\n          return\r\n        }\r\n        vm.loading = true\r\n        if (vm.$refs.formAddDanhMuc.validate()) {\r\n          let filter = {\r\n            collectionName: vm.itemSelect.collectionName,\r\n            id: vm.itemUpdate.primKey,\r\n            data: vm.dataAction\r\n          }\r\n          vm.$store.dispatch('collectionUpdate', filter).then(function (result) {\r\n            vm.loading = false\r\n            toastr.remove()\r\n            toastr.success('Cập nhật danh mục thành công')\r\n            vm.getDanhMuc()\r\n            vm.dialogAddDanhMuc = false\r\n          }).catch(function (response) {\r\n            vm.loading = false\r\n            toastr.remove()\r\n            toastr.error('Cập nhật danh mục thất bại')\r\n          })\r\n        }\r\n      },\r\n      deleteDanhMuc (item) {\r\n        let vm = this\r\n        vm.$store.commit('SET_SHOWCONFIRM', true)\r\n        let confirm = {\r\n          auth: false,\r\n          title: 'Xóa danh mục',\r\n          message: 'Bạn có chắc chắn xóa danh mục?',\r\n          button: {\r\n            yes: 'Có',\r\n            no: 'Không'\r\n          },\r\n          callback: () => {\r\n            vm.loading = true\r\n            let filter = {\r\n              collectionName: vm.itemSelect.collectionName,\r\n              id: item.primKey\r\n            }\r\n            vm.$store.dispatch('collectionDelete', filter).then(function (result) {\r\n              vm.loading = false\r\n              toastr.remove()\r\n              toastr.success('Xóa danh mục thành công')\r\n              vm.getDanhMuc()\r\n            }).catch(function (response) {\r\n              vm.loading = false\r\n              toastr.remove()\r\n              toastr.error('Xóa danh mục thất bại')\r\n            })\r\n          }\r\n        }\r\n        vm.$store.commit('SET_CONFIG_CONFIRM_DIALOG', confirm)\r\n      },\r\n      getDanhSachDanhMuc (type) {\r\n        let vm = this\r\n        let filter = {\r\n          collectionName: 'danhmuc',\r\n          data: {\r\n            page: 0,\r\n            size: 500,\r\n            orderFields: 'maMuc',\r\n            orderTypes: 'asc',\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          vm.items = response.content\r\n          vm.selectedItem = vm.items[0]['maDanhMuc']\r\n          vm.itemSelect = vm.items[0]\r\n          vm.getDanhMuc('reset')\r\n        }).catch(function () {\r\n        })\r\n      },\r\n      getDanhMuc (type) {\r\n        let vm = this\r\n        let thamChieu = ''\r\n        if (type === 'reset') {\r\n          vm.itemsDanhMuc = []\r\n          vm.total = 0\r\n          vm.pageCount = 0\r\n          vm.page = 0\r\n        }\r\n        if (vm.loadingData) {\r\n          return\r\n        }\r\n        // if (vm.itemSelect.collectionName === 'quanhuyen') {\r\n        //   thamChieu = vm.tinhThanhSearch\r\n        // }\r\n        // if (vm.itemSelect.collectionName === 'phuongxa') {\r\n        //   thamChieu = vm.quanHuyenSearch\r\n        // }\r\n        vm.loadingData = true\r\n        let filter = {\r\n          collectionName: 'dulieudanhmuc',\r\n          data: {\r\n            danhMuc_maDanhMuc: vm.itemSelect['maDanhMuc'],\r\n            keyword: vm.dictName,\r\n            page: vm.page,\r\n            size: vm.itemsPerPage,\r\n            orderFields: 'maMuc',\r\n            orderTypes: 'asc',\r\n            tinhTrang: !vm.statusFilter ? '1,0' : vm.statusFilter,\r\n            // thamChieu_maMuc: thamChieu\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          vm.itemsDanhMuc = response.content\r\n          vm.total = response.totalElements\r\n          vm.pageCount = response.totalPages\r\n          vm.loadingData = false\r\n        }).catch(function () {\r\n          vm.loadingData = false\r\n        })\r\n      },\r\n      getDanhMucCha (name, type, getData) {\r\n        let vm = this\r\n        let filter = {\r\n          collectionName: name,\r\n          data: {\r\n            keyword: '',\r\n            page: 0,\r\n            size: 100,\r\n            orderFields: 'maMuc',\r\n            orderTypes: 'asc',\r\n            tinhTrang: '1',\r\n            thamChieu_maMuc: ''\r\n          }\r\n        }\r\n        if (name === 'quanhuyen') {\r\n          if (type === 'search') {\r\n            filter.data.thamChieu_maMuc = vm.tinhThanhSearch\r\n          } else {\r\n            filter.data.thamChieu_maMuc = vm.danhMucChaQuanHuyen['maMuc']\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          if (name === 'tinhthanh') {\r\n            vm.itemsTinhThanh = response.content\r\n            // if (vm.tinhThanhDefault) {\r\n            //   vm.tinhThanhSearch = vm.tinhThanhDefault\r\n            // }\r\n          } else {\r\n            if (type === 'search') {\r\n              vm.itemsQuanHuyenSearch = response.content\r\n              vm.quanHuyenSearch = vm.itemsQuanHuyenSearch[0]['maMuc']\r\n              if (getData) {\r\n                vm.getDanhMuc()\r\n              }\r\n            } else {\r\n              vm.itemsQuanHuyen = response.content\r\n              vm.danhMucChaPhuongXa = vm.itemsQuanHuyen.find(function (item) {\r\n                item.maMuc === vm.quanHuyenSearch\r\n              })\r\n            }\r\n          }\r\n        }).catch(function () {\r\n        })\r\n      },\r\n      changeTinhThanh () {\r\n        let vm = this\r\n        if (vm.itemSelect.collectionName === 'phuongxa' && vm.danhMucChaQuanHuyen) {\r\n          setTimeout (function () {\r\n            vm.getDanhMucCha('quanhuyen')\r\n          }, 200)\r\n        }\r\n      },\r\n      changeTinhThanhSearch () {\r\n        let vm = this\r\n        if (vm.itemSelect.collectionName === 'phuongxa' && vm.tinhThanhSearch) {\r\n          setTimeout (function () {\r\n            vm.getDanhMucCha('quanhuyen', 'search')\r\n          }, 200)\r\n        }\r\n      },\r\n      selectMenu(item, index) {\r\n        let vm = this\r\n        vm.selectedItem = item.maDanhMuc\r\n        vm.itemSelect = item\r\n        vm.dictName = ''\r\n        vm.statusFilter = ''\r\n        if (vm.itemSelect.collectionName === 'quanhuyen' || vm.itemSelect.collectionName === 'phuongxa') {\r\n          vm.getDanhMucCha('tinhthanh')\r\n          vm.tinhThanhSearch = vm.tinhThanhDefault\r\n        }\r\n        if (vm.itemSelect.collectionName === 'phuongxa') {\r\n          setTimeout (function () {\r\n            vm.getDanhMucCha('quanhuyen', 'search', 'getData')\r\n          }, 50)\r\n        } else {\r\n          vm.getDanhMuc('reset')\r\n        }\r\n      },\r\n      changePage(config) {\r\n        let vm = this\r\n        vm.page = config.page\r\n        vm.getDanhMuc()\r\n      },\r\n      getStatus(status) {\r\n        switch(status) {\r\n          case '1':\r\n              return 'Sử dụng'\r\n          case '0':\r\n              return 'Không sử dụng'\r\n          default:\r\n              return ''\r\n        }\r\n      },\r\n      pickFileImport () {\r\n        document.getElementById('file_import').value = ''\r\n        document.getElementById('file_import').click()\r\n      },\r\n      uploadFileImport () {\r\n        let vm = this\r\n        let files = $('#file_import')[0].files\r\n        let file = files[0]\r\n        vm.loading = true\r\n        let filter = {\r\n          file: file,\r\n          danhMuc: 'donvihanhchinh'\r\n        }\r\n        vm.$store.dispatch('importDanhMuc', filter).then(function(result) {\r\n          vm.loading = false\r\n          toastr.remove()\r\n          toastr.success('Import dữ liệu thành công')\r\n        }).catch(function () {\r\n          vm.loading = false\r\n          toastr.remove()\r\n          toastr.error('Import dữ liệu thất bại')\r\n        })\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  #danhmuc-page .v-list {\r\n    background: transparent !important;\r\n  }\r\n  #danhmuc-page .v-list-item {\r\n    padding: 0 8px !important\r\n  }\r\n  #danhmuc-page .v-list-item--dense .v-list-item__icon, .v-list--dense .v-list-item .v-list-item__icon {\r\n    height: 20px !important;\r\n  }\r\n  .danh-muc-1 {\r\n    width: 235px;\r\n    max-width: 235px;\r\n    padding-right: 15px;\r\n    height: 100%;\r\n  }\r\n  .danh-muc-1 .v-list {\r\n    padding-top: 0px;\r\n  }\r\n  .danh-muc-2 {\r\n    width: calc(100% - 235px);\r\n    border-top: 0px;\r\n  }\r\n  .nav-content {\r\n    min-height: calc(100vh - 36px);\r\n    border-right: 1px solid #DDDDDD;\r\n  }\r\n\r\n  \r\n  .wrap-content-2 {\r\n    padding: 12px\r\n  }\r\n  \r\n  #table-danhmuc td{\r\n    height: 42px !important;\r\n  }\r\n  .text-label {\r\n    width: 150px;\r\n    max-width: 150px;\r\n    color: black;\r\n    font-size: 14px;\r\n    line-height: 28px;\r\n  }\r\n</style>\r\n"]}]}