{"remainingRequest":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vuejs-sourcode\\undp-bgt\\src\\views\\ThongKeMauBaoCao.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vuejs-sourcode\\undp-bgt\\src\\views\\ThongKeMauBaoCao.vue","mtime":1665391804596},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665053118014},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053119199},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665053118014},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053120378}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgJCBmcm9tICdqcXVlcnknDQppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICcuL1BhZ2luYXRpb24udnVlJw0KaW1wb3J0IEZvcm1NYXVUaG9uZ0tlIGZyb20gJy4vRm9ybU1hdVRob25nS2UudnVlJw0KaW1wb3J0IHRvYXN0ciBmcm9tICd0b2FzdHInDQp0b2FzdHIub3B0aW9ucyA9IHsNCiAgJ2Nsb3NlQnV0dG9uJzogdHJ1ZSwNCiAgJ3RpbWVPdXQnOiAnNTAwMCcsDQogICJwb3NpdGlvbkNsYXNzIjogInRvYXN0LXRvcC1jZW50ZXIiDQp9DQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ0Jhb0NhbycsDQogICAgY29tcG9uZW50czogew0KICAgICAgUGFnaW5hdGlvbiwNCiAgICAgICdmb3JtLXRoZW0tdGhhbmgtcGhhbic6IEZvcm1NYXVUaG9uZ0tlDQogICAgfSwNCiAgICBwcm9wczogWyd0eXBlJywgJ2lkJ10sDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGRpYWxvZ0Nob25NYXVCYW9DYW86IHRydWUsDQogICAgICAgIHJlYWRvbmx5Rm9ybTogZmFsc2UsDQogICAgICAgIG1hdVRob25nS2VGb3JtOiAnJywNCiAgICAgICAgZGF0YUlucHV0OiAnJywNCiAgICAgICAgZm9ybURhdGE6ICcnLA0KICAgICAgICBjaGlUaWV0QmFvQ2FvOiAnJywNCiAgICAgICAgY2hpVGlldE1hdUJhb0NhbzogJycsDQogICAgICAgIHNlbGVjdGVkOiBbXSwNCiAgICAgICAga2V5d29yZFNlYXJjaDogJycsDQogICAgICAgIGxvYWRpbmdEYXRhOiBmYWxzZSwNCiAgICAgICAgZGFuaFNhY2hUaGFuaFBoYW46IFtdLA0KICAgICAgICB0YWJsZUNvbmZpZzogJycsDQogICAgICAgIG1hQmFvQ2FvU2VhcmNoOiAnJywNCiAgICAgICAga3lCYW9DYW9JdGVtczogW10sDQogICAgICAgIGt5QmFvQ2FvU2VhcmNoOiAnJywNCiAgICAgICAgZG9uVmlEdW9jR2lhb0l0ZW1zOiBbXSwNCiAgICAgICAgZG9uVmlEdW9jR2lhb1NlYXJjaDogJycsDQogICAgICAgIGxvYWlCYW9DYW9JdGVtczogW10sDQogICAgICAgIGxvYWlCYW9DYW9TZWFyY2g6ICcnLA0KICAgICAgICB0cmFuZ1RoYWlJdGVtczogW10sDQogICAgICAgIHRyYW5nVGhhaVNlYXJjaDogJycsDQogICAgICAgIC8vIGhlYWRlcnM6IFtdLA0KICAgICAgICBwYWdlOiAwLA0KICAgICAgICBpdGVtc1BlclBhZ2U6IDAsDQogICAgICAgIHRvdGFsOiAwLA0KICAgICAgICBwYWdlQ291bnQ6IDAsDQogICAgICAgIG1lbnVEYXRlMTogZmFsc2UsDQogICAgICAgIG1lbnVEYXRlMjogZmFsc2UsDQogICAgICAgIGZyb21SZWNlaXZlRGF0ZTogJycsDQogICAgICAgIGZyb21SZWNlaXZlRGF0ZUZvcm1hdHRlZDogJycsDQogICAgICAgIHRvUmVjZWl2ZURhdGU6ICcnLA0KICAgICAgICB0b1JlY2VpdmVEYXRlRm9ybWF0dGVkOiAnJywNCiAgICAgICAgZGlhbG9nVGhlbVRoYW5oUGhhbjogZmFsc2UsDQogICAgICAgIGVkaXRUaGFuaFBoYW46IGZhbHNlLA0KICAgICAgICB0aGFuaFBoYW5FZGl0OiAnJywNCiAgICAgICAgbG9hZGluZ0FjdGlvbjogZmFsc2UsDQogICAgICAgIGFjdGlvbkl0ZW1zOiBbXSwNCiAgICAgICAgYWN0aW9uU2VsZWN0ZWQ6ICcnLA0KICAgICAgICB2YWxpZEZvcm1Eb0FjdGlvbjogZmFsc2UsDQogICAgICAgIGRpYWxvZ0RvQWN0aW9uOiBmYWxzZSwNCiAgICAgICAgZ2hpQ2h1RG9BY3Rpb246ICcnLA0KICAgICAgICBkaWFsb2dMaWNoU3U6IGZhbHNlLA0KICAgICAgICBkYW5oU2FjaFRpZW5UcmluaDogW10sDQogICAgICAgIG5ob21CYW9DYW86ICcnLA0KICAgICAgICBkYW5oU2FjaE1hdUJhb0NhbzogJycsDQogICAgICAgIGRhbmhTYWNoQmFvQ2FvOiBbXSwNCiAgICAgICAgaGVhZGVyczogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICB0ZXh0OiAnU1RUJywNCiAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLA0KICAgICAgICAgICAgICB2YWx1ZTogJ2luZGV4Jw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsDQogICAgICAgICAgICAgIHRleHQ6ICdNw6MgYsOhbyBjw6FvJywNCiAgICAgICAgICAgICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAgICAgdmFsdWU6ICdtYUJhb0NhbycsDQogICAgICAgICAgICAgIGNsYXNzOiAndGgtY2VudGVyJywNCiAgICAgICAgICAgICAgd2lkdGg6IDE1MA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsDQogICAgICAgICAgICAgIHRleHQ6ICdMb+G6oWkgYsOhbyBjw6FvJywNCiAgICAgICAgICAgICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAgICAgdmFsdWU6ICd0ZW5CYW9DYW8nLA0KICAgICAgICAgICAgICBjbGFzczogJ3RoLWNlbnRlcicNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICB0ZXh0OiAnS+G7syBiw6FvIGPDoW8nLA0KICAgICAgICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICAgICAgICB2YWx1ZTogJ2t5QmFvQ2FvJywNCiAgICAgICAgICAgICAgY2xhc3M6ICd0aC1jZW50ZXInLA0KICAgICAgICAgICAgICB3aWR0aDogMTAwDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICAgICAgdGV4dDogJ8SQxqFuIHbhu4sgxJHGsOG7o2MgZ2lhbycsDQogICAgICAgICAgICAgIGFsaWduOiAnbGVmdCcsDQogICAgICAgICAgICAgIHZhbHVlOiAnY29RdWFuVGh1Y0hpZW4nLA0KICAgICAgICAgICAgICBjbGFzczogJ3RoLWNlbnRlcicsDQogICAgICAgICAgICAgIHdpZHRoOiAyMDANCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICB0ZXh0OiAnTmfDoHkgdOG6oW8nLA0KICAgICAgICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICAgICAgICB2YWx1ZTogJ3Rob2lHaWFuVGFvJywNCiAgICAgICAgICAgICAgY2xhc3M6ICd0aC1jZW50ZXInDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICAgICAgdGV4dDogJ0jhuqFuIHjhu60gbMO9JywNCiAgICAgICAgICAgICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAgICAgdmFsdWU6ICdoYW5YdUx5JywNCiAgICAgICAgICAgICAgY2xhc3M6ICd0aC1jZW50ZXInDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICAgICAgdGV4dDogJ1TDrG5oIHRy4bqhbmcnLA0KICAgICAgICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICAgICAgICB2YWx1ZTogJ3RpbmhUcmFuZycsDQogICAgICAgICAgICAgIGNsYXNzOiAndGgtY2VudGVyJywNCiAgICAgICAgICAgICAgd2lkdGg6IDEyMA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsDQogICAgICAgICAgICAgIHRleHQ6ICdUaGFvIHTDoWMnLA0KICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsDQogICAgICAgICAgICAgIHZhbHVlOiAnYWN0aW9uJywNCiAgICAgICAgICAgICAgY2xhc3M6ICd0aC1jZW50ZXInLA0KICAgICAgICAgICAgICB3aWR0aDogMTAwDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQgKCkgew0KICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgaWYgKCF2bS5pc0FkbWluICYmICF2bS5jaGVja1JvbGUoJ1hFTUJBT0NBT0RPTlZJJykgJiYgIXZtLmNoZWNrUm9sZSgnWEVNVEFUQ0FCQU9DQU8nKSkgew0KICAgICAgICB2bS4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2xvZ2luJ30pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdm0uZGFuaFNhY2hCYW9DYW8gPSBbXQ0KICAgICAgdm0uZ2V0Q2hpVGlldEJhb0NhbygpDQogICAgICB2bS5nZXREYW5oTXVjKCdOSE9NQkFPQ0FPJykNCiAgICAgIHZtLmdldERhbmhTYWNoTWF1QmFvQ2FvKCkNCiAgICAgIHZtLmdldERhbmhTYWNoQmFvQ2FvKCdyZXNldCcpDQogICAgfSwNCiAgICB3YXRjaDogew0KICAgICAgJyRyb3V0ZSc6IGZ1bmN0aW9uIChuZXdSb3V0ZSwgb2xkUm91dGUpIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICB2bS5nZXRDaGlUaWV0QmFvQ2FvKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIC8vIGxheXRob25ndGluKCkgew0KICAgICAgLy8gICBsZXQgdm0gPSB0aGlzDQogICAgICAvLyAgIGxldCBmaWx0ZXIgPSB7DQogICAgICAvLyAgICAgY29sbGVjdGlvbk5hbWU6ICdiYW9jYW8nLA0KICAgICAgICAgIA0KICAgICAgLy8gICB9DQogICAgICAvLyAgIC8vIHZtLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvdGhvbmcta2UtbWF1LWJhby1jYW8vJyArIGl0ZW0ucHJpbUtleX0pDQogICAgICAvLyAgIHZtLiRzdG9yZS5kaXNwYXRjaCgnY29sbGVjdGlvbkxpc3RBbGwnLCAnMDEnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgLy8gICAgIHZtLmRhbmhTYWNoQmFvQ2FvID0gcmVzcG9uc2UuY29udGVudA0KICAgICAgLy8gICAgIC8vIHZtLnRvdGFsID0gcmVzcG9uc2UudG90YWxFbGVtZW50cw0KICAgICAgLy8gICAgIC8vIHZtLnBhZ2VDb3VudCA9IHJlc3BvbnNlLnRvdGFsUGFnZXMNCiAgICAgIC8vICAgICAvLyB2bS5sb2FkaW5nRGF0YSA9IGZhbHNlDQogICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOw0KICAgICAgLy8gICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7DQogICAgICAvLyAgICAgdm0ubG9hZGluZ0RhdGEgPSBmYWxzZQ0KICAgICAgLy8gICB9KQ0KICAgICAgICANCiAgICAgIC8vIH0sDQogICAgICBnZXREYW5oU2FjaEJhb0NhbyAodHlwZSkgew0KICAgICAgICBsZXQgdm0gPSB0aGlzDQogICAgICAgIGlmICh0eXBlID09PSAncmVzZXQnKSB7DQogICAgICAgICAgdm0udG90YWwgPSAwDQogICAgICAgICAgdm0ucGFnZUNvdW50ID0gMA0KICAgICAgICAgIHZtLnBhZ2UgPSAwDQogICAgICAgICAgdm0ucmVzZXRGb3JtVGltS2llbSgpDQogICAgICAgIH0NCiAgICAgICAgaWYgKHZtLmxvYWRpbmdEYXRhKSB7DQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgdm0ubG9hZGluZ0RhdGEgPSB0cnVlDQogICAgICAgIGxldCBmaWx0ZXIgPSB7DQogICAgICAgICAgY29sbGVjdGlvbk5hbWU6ICdiYW9jYW8nLA0KICAgICAgICAgIGRhdGE6IHsNCiAgICAgICAgICAgIHBhZ2U6IHZtLnBhZ2UsDQogICAgICAgICAgICBzaXplOiB2bS5pdGVtc1BlclBhZ2UsDQogICAgICAgICAgICBvcmRlckZpZWxkczogJ3Rob2lHaWFuVGFvJywNCiAgICAgICAgICAgIG9yZGVyVHlwZXM6ICdhc2MnLA0KICAgICAgICAgICAgLy8ga3lCYW9DYW9fbWFNdWM6IHZtLmt5QmFvQ2FvU2VhcmNoID8gdm0ua3lCYW9DYW9TZWFyY2hbJ21hTXVjJ10gOiAnJywNCiAgICAgICAgICAgIC8vIG5hbUJhb0Nhbzogdm0ubmFtQmFvQ2FvU2VhcmNoID8gdm0ubmFtQmFvQ2FvU2VhcmNoWydtYU11YyddIDogJycsDQogICAgICAgICAgICAvLyBtYUJhb0Nhbzogdm0ubWFCYW9DYW9TZWFyY2gsDQogICAgICAgICAgICAvLyB0aW5oVHJhbmdfbWFNdWM6IHZtLnRyYW5nVGhhaVNlYXJjaCA/IHZtLnRyYW5nVGhhaVNlYXJjaFsnbWFNdWMnXSA6ICcnLA0KICAgICAgICAgICAgbWF1QmFvQ2FvX21hTWF1QmFvQ2FvOiB2bS5sb2FpQmFvQ2FvU2VhcmNoID8gdm0ubG9haUJhb0Nhb1NlYXJjaFsnbWFNYXVCYW9DYW8nXSA6ICcnLA0KICAgICAgICAgICAgLy8gY29RdWFuVGh1Y0hpZW5fbWFIYW5oQ2hpbmg6IHZtLmRvblZpRHVvY0dpYW9TZWFyY2ggPyB2bS5kb25WaUR1b2NHaWFvU2VhcmNoWydtYUhhbmhDaGluaCddIDogJycsDQogICAgICAgICAgICAvLyB0dU5nYXk6IHZtLmZyb21SZWNlaXZlRGF0ZUZvcm1hdHRlZCA/IHZtLnBhcnNlRGF0ZSh2bS5mcm9tUmVjZWl2ZURhdGVGb3JtYXR0ZWQpIDogJycsDQogICAgICAgICAgICAvLyBkZW5OZ2F5OiB2bS50b1JlY2VpdmVEYXRlRm9ybWF0dGVkID8gdm0ucGFyc2VEYXRlKHZtLnRvUmVjZWl2ZURhdGVGb3JtYXR0ZWQpIDogJycNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdm0uJHN0b3JlLmRpc3BhdGNoKCdjb2xsZWN0aW9uRmlsdGVyJywgZmlsdGVyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgIHZtLmRhbmhTYWNoQmFvQ2FvID0gcmVzcG9uc2UuY29udGVudA0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHZtLmRhbmhTYWNoQmFvQ2FvWzBdLm1hdUJhb0Nhby5tYURpbmhEYW5oKQ0KICAgICAgICAgIHZtLnRvdGFsID0gcmVzcG9uc2UudG90YWxFbGVtZW50cw0KICAgICAgICAgIHZtLnBhZ2VDb3VudCA9IHJlc3BvbnNlLnRvdGFsUGFnZXMNCiAgICAgICAgICB2bS5sb2FkaW5nRGF0YSA9IGZhbHNlDQogICAgICAgICAgDQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2bS5sb2FkaW5nRGF0YSA9IGZhbHNlDQogICAgICAgIH0pDQogICAgICAgIHZtLmRpYWxvZ0Nob25NYXVCYW9DYW8gPSBmYWxzZQ0KICAgICAgfSwNCiAgICAgIHhlbUNoaVRpZXRCYW9DYW8gKGl0ZW0pIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICB2bS4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2Jhby1jYW8vJyArIHZtLnR5cGUgKyAnLycgKyBpdGVtLnByaW1LZXl9KQ0KICAgICAgfSwNCiAgICAgIC8vIGdldENoaVRpZXRCYW9DYW8wICh0eXBlKSB7DQogICAgICAvLyAgIGxldCB2bSA9IHRoaXMNCiAgICAgIC8vICAgaWYgKHR5cGUgPT09ICdyZXNldCcpIHsNCiAgICAgIC8vICAgICB2bS50b3RhbCA9IDANCiAgICAgIC8vICAgICB2bS5wYWdlQ291bnQgPSAwDQogICAgICAvLyAgICAgdm0ucGFnZSA9IDANCiAgICAgIC8vICAgICB2bS5yZXNldEZvcm1UaW1LaWVtKCkNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gICBpZiAodm0ubG9hZGluZ0RhdGEpIHsNCiAgICAgIC8vICAgICByZXR1cm4NCiAgICAgIC8vICAgfQ0KICAgICAgLy8gICB2bS5sb2FkaW5nRGF0YSA9IHRydWUNCiAgICAgIC8vICAgbGV0IGZpbHRlciA9IHsNCiAgICAgIC8vICAgICBjb2xsZWN0aW9uTmFtZTogJ2Jhb2NhbycsDQogICAgICAvLyAgICAgZGF0YTogew0KICAgICAgLy8gICAgICAgcGFnZTogdm0ucGFnZSwNCiAgICAgIC8vICAgICAgIHNpemU6IHZtLml0ZW1zUGVyUGFnZSwNCiAgICAgIC8vICAgICAgIG9yZGVyRmllbGRzOiAndGhvaUdpYW5UYW8nLA0KICAgICAgLy8gICAgICAgb3JkZXJUeXBlczogJ2FzYycsDQogICAgICAvLyAgICAgICBreUJhb0Nhb19tYU11Yzogdm0ua3lCYW9DYW9TZWFyY2ggPyB2bS5reUJhb0Nhb1NlYXJjaFsnbWFNdWMnXSA6ICcnLA0KICAgICAgLy8gICAgICAgbmFtQmFvQ2FvOiB2bS5uYW1CYW9DYW9TZWFyY2ggPyB2bS5uYW1CYW9DYW9TZWFyY2hbJ21hTXVjJ10gOiAnJywNCiAgICAgIC8vICAgICAgIG1hQmFvQ2FvOiB2bS5tYUJhb0Nhb1NlYXJjaCwNCiAgICAgIC8vICAgICAgIHRpbmhUcmFuZ19tYU11Yzogdm0udHJhbmdUaGFpU2VhcmNoID8gdm0udHJhbmdUaGFpU2VhcmNoWydtYU11YyddIDogJycsDQogICAgICAvLyAgICAgICBtYXVCYW9DYW9fbWFNYXVCYW9DYW86IHZtLmxvYWlCYW9DYW9TZWFyY2ggPyB2bS5sb2FpQmFvQ2FvU2VhcmNoWydtYU1hdUJhb0NhbyddIDogJycsDQogICAgICAvLyAgICAgICBjb1F1YW5UaHVjSGllbl9tYUhhbmhDaGluaDogdm0uZG9uVmlEdW9jR2lhb1NlYXJjaCA/IHZtLmRvblZpRHVvY0dpYW9TZWFyY2hbJ21hSGFuaENoaW5oJ10gOiAnJywNCiAgICAgIC8vICAgICAgIHR1TmdheTogdm0uZnJvbVJlY2VpdmVEYXRlRm9ybWF0dGVkID8gdm0ucGFyc2VEYXRlKHZtLmZyb21SZWNlaXZlRGF0ZUZvcm1hdHRlZCkgOiAnJywNCiAgICAgIC8vICAgICAgIGRlbk5nYXk6IHZtLnRvUmVjZWl2ZURhdGVGb3JtYXR0ZWQgPyB2bS5wYXJzZURhdGUodm0udG9SZWNlaXZlRGF0ZUZvcm1hdHRlZCkgOiAnJw0KICAgICAgLy8gICAgIH0NCiAgICAgIC8vICAgfQ0KICAgICAgLy8gICB2bS4kc3RvcmUuZGlzcGF0Y2goJ2NvbGxlY3Rpb25GaWx0ZXInLCBmaWx0ZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAvLyAgICAgdm0uZGFuaFNhY2hCYW9DYW8gPSByZXNwb25zZS5jb250ZW50DQogICAgICAvLyAgICAgdm0udG90YWwgPSByZXNwb25zZS50b3RhbEVsZW1lbnRzDQogICAgICAvLyAgICAgdm0ucGFnZUNvdW50ID0gcmVzcG9uc2UudG90YWxQYWdlcw0KICAgICAgLy8gICAgIHZtLmxvYWRpbmdEYXRhID0gZmFsc2UNCiAgICAgIC8vICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgew0KICAgICAgLy8gICAgIHZtLmxvYWRpbmdEYXRhID0gZmFsc2UNCiAgICAgIC8vICAgfSkNCiAgICAgIC8vIH0sDQoNCiAgICAgIC8vIHNob3cgY2hpVGlldEJhb0Nhbw0KICAgICAgZ2V0RGFuaE11YyAoY29sbGVjdGlvbikgew0KICAgICAgICBsZXQgdm0gPSB0aGlzDQogICAgICAgIGxldCBmaWx0ZXIgPSB7DQogICAgICAgICAgY29sbGVjdGlvbk5hbWU6ICdkdWxpZXVkYW5obXVjJywNCiAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICBvcmRlckZpZWxkczogJ21hTXVjJywNCiAgICAgICAgICAgIG9yZGVyVHlwZXM6ICdhc2MnLA0KICAgICAgICAgICAgcGFnZTogMCwNCiAgICAgICAgICAgIHNpemU6IDEwMDAsDQogICAgICAgICAgICBkYW5oTXVjX21hRGFuaE11YzogY29sbGVjdGlvbg0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB2bS4kc3RvcmUuZGlzcGF0Y2goJ2NvbGxlY3Rpb25GaWx0ZXInLCBmaWx0ZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgaWYgKGNvbGxlY3Rpb24gPT09ICdOSE9NQkFPQ0FPJykgew0KICAgICAgICAgICAgdm0uZGFuaFNhY2hOaG9tQmFvQ2FvID0gcmVzcG9uc2UuY29udGVudA0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgew0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIGdldERhbmhTYWNoTWF1QmFvQ2FvICgpIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICBsZXQgZmlsdGVyID0gew0KICAgICAgICAgIGNvbGxlY3Rpb25OYW1lOiAnbWF1YmFvY2FvJywNCiAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICBvcmRlckZpZWxkczogJ3RlbkdvaScsDQogICAgICAgICAgICBvcmRlclR5cGVzOiAnYXNjJywNCiAgICAgICAgICAgIG5ob21CYW9DYW9fbWFNdWM6IHZtLm5ob21CYW9DYW8gPyB2bS5uaG9tQmFvQ2FvLm1hTXVjIDogJycsDQogICAgICAgICAgICBwYWdlOiAwLA0KICAgICAgICAgICAgc2l6ZTogMTAwMCwNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdm0uJHN0b3JlLmRpc3BhdGNoKCdjb2xsZWN0aW9uRmlsdGVyJywgZmlsdGVyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgICAgdm0uZGFuaFNhY2hNYXVCYW9DYW8gPSByZXNwb25zZS5jb250ZW50DQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgfSkNCiAgICAgIH0sDQoNCiAgICAgIGdldENoaVRpZXRCYW9DYW8gKCkgew0KICAgICAgICBsZXQgdm0gPSB0aGlzDQogICAgICAgIGlmICh2bS5sb2FkaW5nRGF0YSkgew0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgIHZtLmxvYWRpbmdEYXRhID0gdHJ1ZQ0KICAgICAgICBsZXQgZmlsdGVyID0gew0KICAgICAgICAgIGNvbGxlY3Rpb25OYW1lOiAnYmFvY2FvJywNCiAgICAgICAgICBpZDogJzYzM2NlZmJiY2E4ZWNlMTViYWYzODcwZScsDQogICAgICAgICAgLy8gbWF1QmFvQ2FvOiB7DQogICAgICAgICAgLy8gICBtYXVUaG9uZ0tlOiB7DQogICAgICAgICAgLy8gICAgIG1hTWF1OiAnMDEnLA0KICAgICAgICAgIC8vICAgfSwNCiAgICAgICAgICAvLyB9DQogICAgICAgIH0NCiAgICAgICAgdm0uYWN0aW9uSXRlbXMgPSBbXQ0KICAgICAgICAvLyB2bS5sb2FkaW5nRGF0YSA9IHRydWUNCg0KICAgICAgICB2bS4kc3RvcmUuZGlzcGF0Y2goJ2NvbGxlY3Rpb25EZXRhaWwnLCBmaWx0ZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgdm0ubG9hZGluZ0RhdGEgPSBmYWxzZQ0KICAgICAgICAgIHZtLmNoaVRpZXRCYW9DYW8gPSByZXNwb25zZQ0KICAgICAgICAgIC8vIHZtLmRhbmhTYWNoVGllblRyaW5oID0gdm0uY2hpVGlldEJhb0Nhby50aWVuVHJpbmgNCiAgICAgICAgICBsZXQgcm9sZVVzZXIgPSB2bS4kY29va2llcy5nZXQoJ1JvbGVzJywgJycpID8gdm0uJGNvb2tpZXMuZ2V0KCdSb2xlcycsICcnKS5zcGxpdCgnLCcpIDogW10NCiAgICAgICAgICBsZXQgYWN0aW9ucyA9IHZtLmNoaVRpZXRCYW9DYW8uaGFzT3duUHJvcGVydHkoJ2NoaVRpZXRRdXlUcmluaCcpID8gdm0uY2hpVGlldEJhb0Nhby5jaGlUaWV0UXV5VHJpbmggOiBbXQ0KICAgICAgICAgIGlmICh2bS5pc0FkbWluKSB7DQogICAgICAgICAgICB2bS5hY3Rpb25JdGVtcyA9IGFjdGlvbnMNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7DQogICAgICAgICAgICAgIGxldCB2YWlUcm9BY3Rpb24gPSBhY3Rpb25zW2luZGV4XVsndmFpVHJvJ10NCiAgICAgICAgICAgICAgaWYgKHZhaVRyb0FjdGlvbiAmJiB2YWlUcm9BY3Rpb24ubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXgyID0gMDsgaW5kZXgyIDwgdmFpVHJvQWN0aW9uLmxlbmd0aDsgaW5kZXgyKyspIHsNCiAgICAgICAgICAgICAgICAgIGxldCBlbGVtZW50ID0gdmFpVHJvQWN0aW9uW2luZGV4Ml1bJ21hTXVjJ10NCiAgICAgICAgICAgICAgICAgIGxldCBwZXJtID0gcm9sZVVzZXIuZmluZChmdW5jdGlvbiAoaXRlbTIpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0yID09IGVsZW1lbnQNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICBpZiAocGVybSkgew0KICAgICAgICAgICAgICAgICAgICB2bS5hY3Rpb25JdGVtcy5wdXNoKGFjdGlvbnNbaW5kZXhdKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICB2bS5nZXRDaGlUaWV0TWF1QmFvQ2FvKHZtLmNoaVRpZXRCYW9DYW9bJ21hdUJhb0NhbyddWydtYURpbmhEYW5oJ10pDQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2bS5sb2FkaW5nRGF0YSA9IGZhbHNlDQogICAgICAgIH0pDQoNCiAgICAgICAgDQogICAgICB9LA0KICAgICAgLy8gc2hvdyBjaGkgdGlldCByYSB0YWJsZQ0KICAgICAgZ2V0Q2hpVGlldE1hdUJhb0NhbyAoa2V5KSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgbGV0IGZpbHRlciA9IHsNCiAgICAgICAgICBjb2xsZWN0aW9uTmFtZTogJ21hdWJhb2NhbycsDQogICAgICAgICAga2V5U2VhcmNoOiAnbWFkaW5oZGFuaCcsDQogICAgICAgICAgaWQ6IGtleQ0KICAgICAgICB9DQogICAgICAgIHZtLiRzdG9yZS5kaXNwYXRjaCgnY29sbGVjdGlvbkRldGFpbFNlYXJjaFRlc3QnLCBmaWx0ZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgdm0uY2hpVGlldE1hdUJhb0NhbyA9IHJlc3BvbnNlLnJlc3ANCiAgICAgICAgICB2bS5tYXVUaG9uZ0tlRm9ybSA9IHZtLmNoaVRpZXRNYXVCYW9DYW8ubWF1VGhvbmdLZQ0KICAgICAgICAgIHZtLmhlYWRlcnMgPSB2bS5jaGlUaWV0TWF1QmFvQ2FvLm1hdVRob25nS2VbMF0ubGlzdFZpZXdbMF1bJ2hlYWRlcnMnXQ0KICAgICAgICAgIHZtLml0ZW1zUGVyUGFnZSA9IHZtLmNoaVRpZXRNYXVCYW9DYW8ubWF1SGllblRoaVswXS5oYXNPd25Qcm9wZXJ0eSgnaXRlbXNQZXJQYWdlJykgPyB2bS5jaGlUaWV0TWF1QmFvQ2FvLm1hdUhpZW5UaGlbMF0uaXRlbXNQZXJQYWdlIDogMA0KICAgICAgICAgIHZtLmdldGRhbmhTYWNoVGhhbmhQaGFuKCkNCiAgICAgICAgICBjb25zb2xlLmxvZyhmaWx0ZXIpDQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICAvLyBsYXkgZGFuaFNhY2hUaGFuaFBoYW4NCiAgICAgIGdldGRhbmhTYWNoVGhhbmhQaGFuICh0eXBlKSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgaWYgKHR5cGUgPT09ICdyZXNldCcpIHsNCiAgICAgICAgICB2bS50b3RhbCA9IDANCiAgICAgICAgICB2bS5wYWdlQ291bnQgPSAwDQogICAgICAgICAgdm0ucGFnZSA9IDANCiAgICAgICAgICAvLyB2bS5yZXNldEZvcm1UaW1LaWVtKCkNCiAgICAgICAgfQ0KICAgICAgICBpZiAodm0ubG9hZGluZ0RhdGEpIHsNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICB2bS5sb2FkaW5nRGF0YSA9IHRydWUNCiAgICAgICAgbGV0IGZpbHRlciA9IHsNCiAgICAgICAgICBjb2xsZWN0aW9uTmFtZTogJ3RoYW5ocGhhbmJhb2NhbycsDQogICAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgcGFnZTogdm0ucGFnZSwNCiAgICAgICAgICAgIHNpemU6IHZtLml0ZW1zUGVyUGFnZSwNCiAgICAgICAgICAgIG9yZGVyRmllbGRzOiAnYmFvQ2FvX21hQmFvQ2FvJywNCiAgICAgICAgICAgIG9yZGVyVHlwZXM6ICdhc2MnLA0KICAgICAgICAgICAgYmFvQ2FvX21hQmFvQ2FvOiB2bS5jaGlUaWV0QmFvQ2FvLm1hQmFvQ2FvDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHZtLiRzdG9yZS5kaXNwYXRjaCgnY29sbGVjdGlvbkZpbHRlcicsIGZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgICB2bS5kYW5oU2FjaFRoYW5oUGhhbiA9IHJlc3BvbnNlLmNvbnRlbnQNCiAgICAgICAgICB2bS50b3RhbCA9IHJlc3BvbnNlLnRvdGFsRWxlbWVudHMNCiAgICAgICAgICB2bS5wYWdlQ291bnQgPSByZXNwb25zZS50b3RhbFBhZ2VzDQogICAgICAgICAgdm0ubG9hZGluZ0RhdGEgPSBmYWxzZQ0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdm0ubG9hZGluZ0RhdGEgPSBmYWxzZQ0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIC8vIGNsaWNrIGJ0biB0aGVtTW9pVGhhbmhQaGFuDQogICAgICBzaG93QWRkVGhhbmhQaGFuICgpIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICBpZiAodm0uZGFuaFNhY2hUaGFuaFBoYW4ubGVuZ3RoICYmIHZtLmNoaVRpZXRNYXVCYW9DYW8ubmhhcE5oaWV1VGhhbmhQaGFuICE9ICd0cnVlJykgew0KICAgICAgICAgIHRvYXN0ci5lcnJvcignS2jDtG5nIHRo4buDIHRow6ptIHRow6BuaCBwaOG6p24uIExv4bqhaSBiw6FvIGPDoW8gY2jhu4kgY8OzIDEgdGjDoG5oIHBo4bqnbicpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgdm0ucmVhZG9ubHlGb3JtID0gZmFsc2UNCiAgICAgICAgdm0uZGlhbG9nVGhlbVRoYW5oUGhhbiA9IHRydWUNCiAgICAgICAgdm0uZWRpdFRoYW5oUGhhbiA9IGZhbHNlDQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHZtLiRyZWZzLmZvcm1UaGFuaFBoYW4uaW5pdEZvcm0oKQ0KICAgICAgICAgIHZtLiRyZWZzLmZvcm1UaGFuaFBoYW4ucmVzZXRGb3JtKCkNCiAgICAgICAgfSwgMjAwKQ0KICAgICAgfSwNCiAgICAgIC8vIGNsaWNrIGJ0biBlZGl0VGhhbmhQaGFuDQogICAgICBzaG93VXBkYXRlVGhhbmhQaGFuIChpdGVtKSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgdm0ucmVhZG9ubHlGb3JtID0gZmFsc2UNCiAgICAgICAgdm0udGhhbmhQaGFuRWRpdCA9IGl0ZW0NCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICB2bS5kYXRhSW5wdXQgPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtLm5vaUR1bmcpDQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgdm0uZGF0YUlucHV0ID0ge30NCiAgICAgICAgfQ0KICAgICAgICB2bS5kaWFsb2dUaGVtVGhhbmhQaGFuID0gdHJ1ZQ0KICAgICAgICB2bS5lZGl0VGhhbmhQaGFuID0gdHJ1ZQ0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2bS4kcmVmcy5mb3JtVGhhbmhQaGFuLmluaXRGb3JtKCd1cGRhdGUnKQ0KICAgICAgICB9LCAyMDApDQogICAgICB9LA0KICAgICAgLy8gY2xpY2sgYnRuIHRoZW1UaGFuaFBoYW4NCiAgICAgIHN1Ym1pdFRoZW1UaGFuaFBoYW4gKCkgew0KICAgICAgICBsZXQgdm0gPSB0aGlzDQogICAgICAgIGxldCB2YWxpZGF0ZSA9IHZtLiRyZWZzLmZvcm1UaGFuaFBoYW4udmFsaWRhdGVGb3JtKCkNCiAgICAgICAgaWYgKHZhbGlkYXRlKSB7DQogICAgICAgICAgdm0uJHJlZnMuZm9ybVRoYW5oUGhhbi5zdWJtaXRUYW9CYW9DYW8oKQ0KICAgICAgICAgIGxldCBmb3JtRGF0YSA9IHZtLiRzdG9yZS5nZXR0ZXJzLmdldEZvcm1EYXRhDQogICAgICAgICAgbGV0IGZpbHRlciA9IHsNCiAgICAgICAgICAgIGNvbGxlY3Rpb25OYW1lOiAndGhhbmhwaGFuYmFvY2FvJywNCiAgICAgICAgICAgIGRhdGE6IHsNCiAgICAgICAgICAgICAgImJhb0NhbyI6IHsNCiAgICAgICAgICAgICAgICAibWFEaW5oRGFuaCI6IHZtLmNoaVRpZXRCYW9DYW9bJ21hRGluaERhbmgnXSwNCiAgICAgICAgICAgICAgICAibWFCYW9DYW8iOiB2bS5jaGlUaWV0QmFvQ2FvWydtYUJhb0NhbyddDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICJtYXVCYW9DYW8iOiB7DQogICAgICAgICAgICAgICAgIm1hRGluaERhbmgiOiB2bS5jaGlUaWV0TWF1QmFvQ2FvLm1hRGluaERhbmgsDQogICAgICAgICAgICAgICAgIm1hTWF1QmFvQ2FvIjogdm0uY2hpVGlldE1hdUJhb0Nhby5tYU1hdUJhb0Nhbw0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAia3lCYW9DYW8iOiB7DQogICAgICAgICAgICAgICAgIm1hTXVjIjogdm0uY2hpVGlldEJhb0Nhb1sna3lCYW9DYW8nXVsnbWFNdWMnXSwNCiAgICAgICAgICAgICAgICAidGVuTXVjIjogdm0uY2hpVGlldEJhb0Nhb1sna3lCYW9DYW8nXVsndGVuTXVjJ10NCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgIm5vaUR1bmciOiBmb3JtRGF0YQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGF0YUJhb0NhbycsIGZpbHRlci5kYXRhKQ0KICAgICAgICAgIHZtLmxvYWRpbmdBY3Rpb24gPSB0cnVlDQogICAgICAgICAgaWYgKCF2bS5lZGl0VGhhbmhQaGFuKSB7DQogICAgICAgICAgICB2bS4kc3RvcmUuZGlzcGF0Y2goJ2NvbGxlY3Rpb25DcmVhdGUnLCBmaWx0ZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgew0KICAgICAgICAgICAgICB2bS5ydW5Qcm9jZXNzVXBsb2FkRmlsZXMocmVzdWx0LnJlc3ApDQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgICAgICAgdm0ubG9hZGluZ0FjdGlvbiA9IGZhbHNlDQogICAgICAgICAgICAgIHRvYXN0ci5yZW1vdmUoKQ0KICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ1Row6ptIG3hu5tpIHRo4bqldCBi4bqhaScpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBmaWx0ZXJbJ2lkJ10gPSB2bS50aGFuaFBoYW5FZGl0LnByaW1LZXkNCiAgICAgICAgICAgIHZtLiRzdG9yZS5kaXNwYXRjaCgnY29sbGVjdGlvblVwZGF0ZScsIGZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7DQogICAgICAgICAgICAgIHZtLnJ1blByb2Nlc3NVcGxvYWRGaWxlcyh2bS50aGFuaFBoYW5FZGl0KQ0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAgIHZtLmxvYWRpbmdBY3Rpb24gPSBmYWxzZQ0KICAgICAgICAgICAgICB0b2FzdHIucmVtb3ZlKCkNCiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdD4bqtcCBuaOG6rXQgdGjhuqV0IGLhuqFpJykNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgLy8gY2xpY2sgY2hpVGlldFRoYW5oUGhhbg0KICAgICAgc2hvd1Rob25nVGluVGhhbmhQaGFuIChpdGVtKSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgdm0ucmVhZG9ubHlGb3JtID0gdHJ1ZQ0KICAgICAgICB2bS5lZGl0VGhhbmhQaGFuID0gbnVsbA0KICAgICAgICB2bS5kYXRhSW5wdXQgPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtLm5vaUR1bmcpDQogICAgICAgIHZtLmRpYWxvZ1RoZW1UaGFuaFBoYW4gPSB0cnVlDQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHZtLiRyZWZzLmZvcm1UaGFuaFBoYW4uaW5pdEZvcm0oJ3VwZGF0ZScpDQogICAgICAgIH0sIDIwMCkNCiAgICAgIH0sDQogICAgICBleGl0Rm9ybSAoKSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgdm0uJHJlZnMuZm9ybVRoYW5oUGhhbi5yZXNldEZvcm0oKQ0KICAgICAgICB2bS5kaWFsb2dUaGVtVGhhbmhQaGFuID0gZmFsc2UNCiAgICAgIH0sDQogICAgICB4b2FUaGFuaFBoYW4gKGl0ZW0pIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICB2bS4kc3RvcmUuY29tbWl0KCdTRVRfU0hPV0NPTkZJUk0nLCB0cnVlKQ0KICAgICAgICBsZXQgY29uZmlybSA9IHsNCiAgICAgICAgICBhdXRoOiBmYWxzZSwNCiAgICAgICAgICB0aXRsZTogJ1jDs2EgdGjDoG5oIHBo4bqnbicsDQogICAgICAgICAgbWVzc2FnZTogJ0LhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB4w7NhIHRow6BuaCBwaOG6p24gYsOhbyBjw6FvIG7DoHknLA0KICAgICAgICAgIGJ1dHRvbjogew0KICAgICAgICAgICAgeWVzOiAnQ8OzJywNCiAgICAgICAgICAgIG5vOiAnS2jDtG5nJw0KICAgICAgICAgIH0sDQogICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHsNCiAgICAgICAgICAgIGxldCBmaWx0ZXIgPSB7DQogICAgICAgICAgICAgIGNvbGxlY3Rpb25OYW1lOiAndGhhbmhwaGFuYmFvY2FvJywNCiAgICAgICAgICAgICAgaWQ6IGl0ZW0ucHJpbUtleQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdm0ubG9hZGluZyA9IHRydWUNCiAgICAgICAgICAgIHZtLiRzdG9yZS5kaXNwYXRjaCgnY29sbGVjdGlvbkRlbGV0ZScsIGZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7DQogICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgICB0b2FzdHIucmVtb3ZlKCkNCiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1jDs2EgdGjDoG5oIHBo4bqnbiB0aMOgbmggY8O0bmcnKQ0KICAgICAgICAgICAgICB2bS5nZXRkYW5oU2FjaFRoYW5oUGhhbigpDQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgIHRvYXN0ci5yZW1vdmUoKQ0KICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ1jDs2EgdGjDoG5oIHBo4bqnbiB0aOG6pXQgYuG6oWknKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdm0uJHN0b3JlLmNvbW1pdCgnU0VUX0NPTkZJR19DT05GSVJNX0RJQUxPRycsIGNvbmZpcm0pDQogICAgICB9LA0KICAgICAgc2hvd0RvQWN0aW9uIChpdGVtKSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgdm0uYWN0aW9uU2VsZWN0ZWQgPSBpdGVtDQogICAgICAgIHZtLmRpYWxvZ0RvQWN0aW9uID0gdHJ1ZQ0KICAgICAgICB2bS5naGlDaHVEb0FjdGlvbiA9ICcnDQogICAgICB9LA0KICAgICAgZG9BY3Rpb24gKGl0ZW0pIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICB2bS5sb2FkaW5nQWN0aW9uID0gdHJ1ZQ0KICAgICAgICBsZXQgdXNlckluZm8gPSB2bS4kY29va2llcy5nZXQoJ1VzZXJJbmZvJywgJycpDQogICAgICAgIGxldCBmaWx0ZXIgPSB7DQogICAgICAgICAgaWQ6IHZtLmNoaVRpZXRCYW9DYW8ucHJpbUtleSwNCiAgICAgICAgICBjb2xsZWN0aW9uTmFtZTogJ2Jhb2NhbycsDQogICAgICAgICAgZGF0YTogT2JqZWN0LmFzc2lnbih2bS5jaGlUaWV0QmFvQ2FvLCB7DQogICAgICAgICAgICAidGluaFRyYW5nIjogew0KICAgICAgICAgICAgICAibWFNdWMiOiBpdGVtLm1hVHJhbmdUaGFpLA0KICAgICAgICAgICAgICAidGVuTXVjIjogaXRlbS50ZW5UcmFuZ1RoYWkNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAidGllblRyaW5oIjogew0KICAgICAgICAgICAgICAiaG9WYVRlbiI6IHVzZXJJbmZvID8gdXNlckluZm8uaG9WYVRlbiA6ICcnLA0KICAgICAgICAgICAgICAidGhvaUdpYW5DYXBOaGF0IjogKG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksDQogICAgICAgICAgICAgICJoYW5oRG9uZyI6IGl0ZW0udGVuSGFuaERvbmcsDQogICAgICAgICAgICAgICJtYUhhbmhEb25nIjogaXRlbS5tYUhhbmhEb25nLA0KICAgICAgICAgICAgICAibm9pRHVuZyI6IFN0cmluZyh2bS5naGlDaHVEb0FjdGlvbikudHJpbSgpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICB2bS4kc3RvcmUuZGlzcGF0Y2goJ2NvbGxlY3Rpb25VcGRhdGUnLCBmaWx0ZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgew0KICAgICAgICAgIHZtLmxvYWRpbmdBY3Rpb24gPSBmYWxzZQ0KICAgICAgICAgIHRvYXN0ci5yZW1vdmUoKQ0KICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdUaOG7sWMgaGnhu4duIHRow6BuaCBjw7RuZycpDQogICAgICAgICAgdm0uZGlhbG9nRG9BY3Rpb24gPSBmYWxzZQ0KICAgICAgICAgIHZtLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvYmFvLWNhby8nICsgdm0udHlwZX0pDQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2bS5sb2FkaW5nQWN0aW9uID0gZmFsc2UNCiAgICAgICAgICB2bS5kaWFsb2dEb0FjdGlvbiA9IGZhbHNlDQogICAgICAgICAgdG9hc3RyLnJlbW92ZSgpDQogICAgICAgICAgdG9hc3RyLmVycm9yKCdUaOG7sWMgaGnhu4duIHRo4bqldCBi4bqhaScpDQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgY2hlY2tSb2xlQWN0aW9uIChyb2xlKSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgbGV0IHJvbGVVc2VyID0gdm0uJGNvb2tpZXMuZ2V0KCdSb2xlcycsICcnKQ0KICAgICAgICBpZiAoIXJvbGUgfHwgIXJvbGVVc2VyKSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgICAgbGV0IHJvbGVzID0gcm9sZVVzZXIuc3BsaXQoJywnKQ0KICAgICAgICBsZXQgZXhpdHMgPSByb2xlcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgICAgcmV0dXJuIGl0ZW0gPT0gcm9sZQ0KICAgICAgICB9KQ0KICAgICAgICBpZiAoZXhpdHMpIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgdXBsb2FkRmlsZXMgKGluZGV4KSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgbGV0IGZpbGVzID0gJycNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBmaWxlcyA9ICQoJyNmaWxlX3VwbG9hZCcpWzBdLmZpbGVzDQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIH0NCiAgICAgICAgbGV0IGZpbGUgPSBmaWxlc1tpbmRleF0NCiAgICAgICAgbGV0IGZpbGVOYW1lID0gZmlsZVsnbmFtZSddDQogICAgICAgIGlmIChmaWxlWyduYW1lJ10pIHsNCiAgICAgICAgICBmaWxlTmFtZSA9IGZpbGVbJ25hbWUnXS5yZXBsYWNlKC9cJS9nLCAnJykNCiAgICAgICAgICBmaWxlTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1wvL2csICcnKQ0KICAgICAgICAgIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwvZywgJycpDQogICAgICAgIH0NCiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkNCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpZCcsIHZtLnRoYW5oUGhhbkVkaXQucHJpbUtleSkNCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlcycsIGZpbGUsIGZpbGVOYW1lKQ0KDQogICAgICAgIGF4aW9zLnBvc3QoJy92MS9kYXRhc2hhcmluZy90aGFuaHBoYW5iYW9jYW8vdXBsb2FkJywgZm9ybURhdGEsIHsNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLA0KICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhOyBib3VuZGFyeT08Y2FsY3VsYXRlZCB3aGVuIHJlcXVlc3QgaXMgc2VudD4nDQogICAgICAgICAgfQ0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgIGxldCBmaWxlcyA9ICcnDQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGZpbGVzID0gJCgnI2ZpbGVfdXBsb2FkJylbMF0uZmlsZXMNCiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIH0NCiAgICAgICAgICBsZXQgZmlsZSA9IGZpbGVzW2luZGV4ICsgMV0NCiAgICAgICAgICBpZiAoIWZpbGUpIHsNCiAgICAgICAgICAgIHZtLmxvYWRpbmdBY3Rpb24gPSBmYWxzZQ0KICAgICAgICAgICAgdm0uZGlhbG9nVGhlbVRoYW5oUGhhbiA9IGZhbHNlDQogICAgICAgICAgICB0b2FzdHIucmVtb3ZlKCkNCiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdUaOG7sWMgaGnhu4duIHRow6BuaCBjw7RuZycpDQogICAgICAgICAgICB2bS5nZXRkYW5oU2FjaFRoYW5oUGhhbigpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdm0udXBsb2FkRmlsZXMoaW5kZXggKyAxKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHhocikgew0KICAgICAgICAgIHRvYXN0ci5jbGVhcigpDQogICAgICAgICAgdG9hc3RyLmVycm9yKCdUw6BpIGxp4buHdSAnICsgZmlsZU5hbWUgKyAnIHThuqNpIGzDqm4ga2jDtG5nIHRow6BuaCBjw7RuZy4gVnVpIGzDsm5nIGtp4buDbSB0cmEgbOG6oWkuJykNCiAgICAgICAgICBsZXQgZmlsZXMgPSAnJw0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBmaWxlcyA9ICQoJyNmaWxlX3VwbG9hZCcpWzBdLmZpbGVzDQogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICB9DQogICAgICAgICAgbGV0IGZpbGUgPSBmaWxlc1tpbmRleCArIDFdDQogICAgICAgICAgaWYgKCFmaWxlKSB7DQogICAgICAgICAgICB2bS5sb2FkaW5nQWN0aW9uID0gZmFsc2UNCiAgICAgICAgICAgIHZtLmRpYWxvZ1RoZW1UaGFuaFBoYW4gPSBmYWxzZQ0KICAgICAgICAgICAgdG9hc3RyLnJlbW92ZSgpDQogICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnVGjhu7FjIGhp4buHbiB0aMOgbmggY8O0bmcnKQ0KICAgICAgICAgICAgdm0uZ2V0ZGFuaFNhY2hUaGFuaFBoYW4oKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZtLnVwbG9hZEZpbGVzKGluZGV4ICsgMSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgcnVuUHJvY2Vzc1VwbG9hZEZpbGVzICgpIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICBsZXQgZmlsZXMgPSAnJw0KICAgICAgICB0cnkgew0KICAgICAgICAgIGZpbGVzID0gJCgnI2ZpbGVfdXBsb2FkJylbMF0uZmlsZXMNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgfQ0KICAgICAgICBsZXQgY291bnQgPSBmaWxlcy5sZW5ndGgNCiAgICAgICAgaWYgKGNvdW50KSB7DQogICAgICAgICAgdm0udXBsb2FkRmlsZXMoMCkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB2bS5sb2FkaW5nQWN0aW9uID0gZmFsc2UNCiAgICAgICAgICB2bS5kaWFsb2dUaGVtVGhhbmhQaGFuID0gZmFsc2UNCiAgICAgICAgICB0b2FzdHIucmVtb3ZlKCkNCiAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnVGjhu7FjIGhp4buHbiB0aMOgbmggY8O0bmcnKQ0KICAgICAgICAgIHZtLmdldGRhbmhTYWNoVGhhbmhQaGFuKCkNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHZpZXdIaXN0b3J5ICgpIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICB2bS5kaWFsb2dMaWNoU3UgPSB0cnVlDQogICAgICB9LA0KICAgICAgY29udmVydERhdGFWaWV3IChpdGVtSGVhZGVyLCBpdGVtKSB7DQogICAgICAgIGxldCBvdXRwdXQgPSAnJw0KICAgICAgICB0cnkgew0KICAgICAgICAgIGxldCBjYWx1ID0gaXRlbUhlYWRlclsnY2FsY3VsYXRvciddLnJlcGxhY2UoL2RhdGFJbnB1dC9nLCAnaXRlbScpDQogICAgICAgICAgb3V0cHV0ID0gZXZhbChjYWx1KQ0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIG91dHB1dCA9ICcnDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG91dHB1dA0KICAgICAgfSwNCiAgICAgIGNvbnZlcnREYXRhQXJyYXkgKGl0ZW1IZWFkZXIsIGFycmF5KSB7DQogICAgICAgIGxldCBvdXRwdXQgPSAnJw0KICAgICAgICBpZiAoYXJyYXkpIHsNCiAgICAgICAgICBvdXRwdXQgPSBBcnJheS5mcm9tKGFycmF5LCBmdW5jdGlvbiAoaXRlbSkgew0KICAgICAgICAgICAgcmV0dXJuIGl0ZW1baXRlbUhlYWRlclsnbWFwcGluZyddXQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAnLCAnKQ0KICAgICAgICByZXR1cm4gb3V0cHV0DQogICAgICB9LA0KICAgICAgZ2V0U3RhdHVzKGRhbmhUaW5oRGllblR1KSB7DQogICAgICAgIHJldHVybiBkYW5oVGluaERpZW5UdVswXSA/IGRhbmhUaW5oRGllblR1WzBdLnRpbmhUcmFuZ1N1RHVuZ1RhaUtob2FuWyd0ZW5NdWMnXSA6ICdDaMawYSB04bqhbyB0w6BpIGtob+G6o24nDQogICAgICB9LA0KICAgICAgZ2V0Q29sb3IgKGRhbmhUaW5oRGllblR1KSB7DQogICAgICAgIGxldCBzdGF0dXMgPSBkYW5oVGluaERpZW5UdVswXSA/IFN0cmluZyhkYW5oVGluaERpZW5UdVswXS50aW5oVHJhbmdTdUR1bmdUYWlLaG9hblsnTWFNdWMnXSkgOiAnMCcNCiAgICAgICAgc3dpdGNoKHN0YXR1cykgew0KICAgICAgICAgIGNhc2UgJzEnOg0KICAgICAgICAgICAgICByZXR1cm4gJ2NvbG9yOiBibHVlJw0KICAgICAgICAgIGNhc2UgJzInOg0KICAgICAgICAgICAgICByZXR1cm4gJ2NvbG9yOiBncmVlbicNCiAgICAgICAgICBjYXNlICczJzoNCiAgICAgICAgICAgIHJldHVybiAnY29sb3I6IG9yYW5nZScNCiAgICAgICAgICBjYXNlICc0JzoNCiAgICAgICAgICAgIHJldHVybiAnY29sb3I6IHJlZCcNCiAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgcmV0dXJuICdjb2xvcjogYmxhY2snDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBjdXJyZW5jeSAodmFsdWUpIHsNCiAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgbGV0IG1vbmV5Q3VyID0gKHZhbHVlIC8gMSkudG9GaXhlZCgwKS5yZXBsYWNlKCcuJywgJywnKQ0KICAgICAgICAgIHJldHVybiBtb25leUN1ci50b1N0cmluZygpLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csICcuJykNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gJycNCiAgICAgIH0sDQogICAgICBkYXRlTG9jYWxlIChkYXRlSW5wdXQpIHsNCiAgICAgICAgaWYgKCFkYXRlSW5wdXQpIHsNCiAgICAgICAgICByZXR1cm4gJycNCiAgICAgICAgfQ0KICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKGRhdGVJbnB1dCkNCiAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0vJHsoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfS8ke2RhdGUuZ2V0RnVsbFllYXIoKX1gDQogICAgICB9LA0KICAgICAgZGF0ZUxvY2FsZVRpbWUgKGRhdGVJbnB1dCkgew0KICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKGRhdGVJbnB1dCkNCiAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0vJHsoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfS8ke2RhdGUuZ2V0RnVsbFllYXIoKX0gJHtkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke2RhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gDQogICAgICB9LA0KICAgICAgY2hhbmdlUGFnZSAoY29uZmlnKSB7DQogICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgdm0ucGFnZSA9IGNvbmZpZy5wYWdlDQogICAgICAgIHZtLmdldGRhbmhTYWNoVGhhbmhQaGFuKCkNCiAgICAgIH0sDQogICAgICByZXNldEZvcm1UaW1LaWVtICgpIHsNCiAgICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgICB2bS4kcmVmcy5mb3JtVGltS2llbS5yZXNldCgpDQogICAgICAgIHZtLiRyZWZzLmZvcm1UaW1LaWVtLnJlc2V0VmFsaWRhdGlvbigpDQogICAgICB9LA0KICAgICAgY2hhbmdlRGF0ZShpbmRleCkgew0KICAgICAgICBsZXQgdm0gPSB0aGlzDQogICAgICAgIHZtLm1lbnVEYXRlMSA9IGZhbHNlDQogICAgICAgIGlmIChpbmRleCA9PT0gJzEnKSB7DQogICAgICAgICAgdm0uZnJvbVJlY2VpdmVEYXRlRm9ybWF0dGVkID0gdm0uZm9ybWF0RGF0ZSh2bS5mcm9tUmVjZWl2ZURhdGUpDQogICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09ICcyJykgew0KICAgICAgICAgIHZtLnRvUmVjZWl2ZURhdGVGb3JtYXR0ZWQgPSB2bS5mb3JtYXREYXRlKHZtLnRvUmVjZWl2ZURhdGUpDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBmb3JtYXREYXRlKGRhdGUpIHsNCiAgICAgICAgaWYgKCFkYXRlKSByZXR1cm4gJycNCiAgICAgICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZS5zcGxpdCgnLScpDQogICAgICAgIHJldHVybiBgJHtkYXl9LyR7bW9udGh9LyR7eWVhcn1gDQogICAgICB9LA0KICAgICAgcGFyc2VEYXRlKGRhdGUpIHsNCiAgICAgICAgaWYgKCFkYXRlKSByZXR1cm4gJycNCiAgICAgICAgaWYgKFN0cmluZyhkYXRlKS5pbmRleE9mKCcvJykgPiAwKSB7DQogICAgICAgICAgY29uc3QgW2RheSwgbW9udGgsIHllYXJdID0gZGF0ZS5zcGxpdCgnLycpDQogICAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGgucGFkU3RhcnQoMiwgJzAnKX0tJHtkYXkucGFkU3RhcnQoMiwgJzAnKX1gDQogICAgICAgIH0gZWxzZSBpZiAoU3RyaW5nKGRhdGUpLmluZGV4T2YoJy0nKSA+IDApIHsNCiAgICAgICAgICBjb25zdCBbZGF5LCBtb250aCwgeWVhcl0gPSBkYXRlLnNwbGl0KCctJykNCiAgICAgICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aC5wYWRTdGFydCgyLCAnMCcpfS0ke2RheS5wYWRTdGFydCgyLCAnMCcpfWANCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsZXQgZGF0ZTEgPSBuZXcgRGF0ZShOdW1iZXIoZGF0ZSkpDQogICAgICAgICAgcmV0dXJuIGAke2RhdGUxLmdldEZ1bGxZZWFyKCl9LSR7KGRhdGUxLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9LSR7ZGF0ZTEuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBnZXRNaW5NYXggKGRhdGUpIHsNCiAgICAgICAgaWYgKCFkYXRlKSByZXR1cm4gbnVsbA0KICAgICAgICBjb25zdCBbZGF5LCBtb250aCwgeWVhcl0gPSBkYXRlLnNwbGl0KCcvJykNCiAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWANCiAgICAgIH0sDQogICAgICBnb0JhY2sgKCkgew0KICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCkNCiAgICAgIH0NCiAgICB9DQogIH0NCg=="},{"version":3,"sources":["ThongKeMauBaoCao.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThongKeMauBaoCao.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <v-card\r\n    class=\"mx-auto pa-3\"\r\n    style=\"padding-bottom: 36px !important\"\r\n    flat\r\n    >\r\n        <!--body page-->\r\n        <v-layout wrap>\r\n            <v-flex class=\"py-0\">\r\n\r\n                <!--header-content-->\r\n                <v-row justify=\"end\" class=\"mt-0 mb-0 mx-0\" style=\"border-bottom: 1px solid #2161B1\">\r\n                    <v-col class=\"d-flex align-center justify-start py-0 pl-0\" style=\"max-width: 300px;color: #2161B1;font-weight: 500;margin-bottom: -1px;\">\r\n                        <div class=\"header-content \">\r\n                            Thống kê mẫu báo cáo\r\n                        </div>\r\n                        <div class=\"triangle-header\"></div>\r\n                    </v-col>\r\n                    <v-spacer></v-spacer>\r\n                </v-row>\r\n\r\n                <!-- <v-btn @click=\"laythongtin()\">console.log</v-btn> -->\r\n\r\n                <!-- table danh sách thành phần -->\r\n                <!-- <v-row class=\"my-0 py-0 pt-3\">\r\n                  <v-col cols=\"12\"  class=\"pt-0\">\r\n                    <v-data-table\r\n                      :headers=\"headers\"\r\n                      :items=\"danhSachThanhPhan\"\r\n                      :items-per-page=\"itemsPerPage\"\r\n                      item-key=\"primKey\"\r\n                      hide-default-footer\r\n                      class=\"table-base mt-2\"\r\n                      no-data-text=\"Không có\"\r\n                      :loading=\"loadingData\"\r\n                      loading-text=\"Đang tải... \"\r\n                    >\r\n                      <template v-slot:body=\"{ items, headers}\">\r\n                        <tbody>\r\n                          <tr v-for=\"(item, index) in items\" :key=\"index\" @click=\"showThongTinThanhPhan(item)\">\r\n                            <td v-for=\"(itemHeader, indexHeader) in headers\" :key=\"indexHeader\" :class=\"itemHeader['class']\" :width=\"itemHeader.hasOwnProperty('width') ? itemHeader.width : ''\">\r\n                              <div v-if=\"itemHeader.type == 'index'\">\r\n                                <div v-if=\"itemsPerPage\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">{{ (page+1) * itemsPerPage - itemsPerPage + index + 1 }}</div>\r\n                                <div v-else :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">{{ index + 1 }}</div>\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'date'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? dateLocale(item['noiDung'][itemHeader.value]) : '' }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'datetime'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? dateLocaleTime(item['noiDung'][itemHeader.value]) : ''}}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'object'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? item['noiDung'][itemHeader.value][itemHeader.mapping] : '' }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'money'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? currency(item['noiDung'][itemHeader.value]) : '' }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'array'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? convertDataArray(itemHeader, item['noiDung'][itemHeader.value]) : '' }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'calculator'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ convertDataView(itemHeader, item['noiDung']) }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'action'\">\r\n                                <v-tooltip top >\r\n                                  <template v-slot:activator=\"{ on, attrs }\">\r\n                                    <v-btn @click.stop=\"showThongTinThanhPhan(item)\" color=\"#2161b1\" text icon class=\" mr-2\" v-bind=\"attrs\" v-on=\"on\">\r\n                                      <v-icon size=\"18\">mdi-file-document-multiple-outline</v-icon>\r\n                                    </v-btn>\r\n                                  </template>\r\n                                  <span>Chi tiết thành phần</span>\r\n                                </v-tooltip>\r\n                                <v-tooltip top v-if=\"isAdmin || checkRole('CAPNHATBAOCAO')\">\r\n                                  <template v-slot:activator=\"{ on, attrs }\">\r\n                                    <v-btn @click.stop=\"showUpdateThanhPhan(item)\" color=\"#2161b1\" text icon class=\" mr-2\" v-bind=\"attrs\" v-on=\"on\">\r\n                                      <v-icon size=\"18\">mdi-pencil</v-icon>\r\n                                    </v-btn>\r\n                                  </template>\r\n                                  <span>Sửa</span>\r\n                                </v-tooltip>\r\n                                <v-tooltip top v-if=\"isAdmin || checkRole('CAPNHATBAOCAO')\">\r\n                                  <template v-slot:activator=\"{ on, attrs }\">\r\n                                    <v-btn @click.stop=\"xoaThanhPhan(item)\" color=\"red\" text icon class=\"\" v-bind=\"attrs\" v-on=\"on\">\r\n                                      <v-icon size=\"18\">mdi-delete</v-icon>\r\n                                    </v-btn>\r\n                                  </template>\r\n                                  <span>Xóa</span>\r\n                                </v-tooltip>\r\n                              </div>\r\n                              <div v-else :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'][itemHeader.value] }}\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </template>\r\n                    </v-data-table>\r\n                    <pagination v-if=\"pageCount\" :pageInput=\"page\" :total=\"total\" :pageCount=\"pageCount\" @tiny:change-page=\"changePage\"></pagination>\r\n                  </v-col>\r\n                </v-row> -->\r\n\r\n                <!-- table danh sách thành phần  -->\r\n                <v-row class=\"my-0 py-0 pt-3\">\r\n                  <v-col cols=\"12\"  class=\"pt-0\">\r\n                    <v-data-table\r\n                      :headers=\"headers\"\r\n                      :items=\"danhSachThanhPhan\"\r\n                      :items-per-page=\"itemsPerPage\"\r\n                      item-key=\"primKey\"\r\n                      hide-default-footer\r\n                      class=\"table-base mt-2\"\r\n                      no-data-text=\"Không có\"\r\n                      :loading=\"loadingData\"\r\n                      loading-text=\"Đang tải... \"\r\n                    >\r\n                      <template v-slot:body=\"{ items, headers}\">\r\n                        <tbody>\r\n                          <tr v-for=\"(item, index) in items\" :key=\"index\" @click=\"showThongTinThanhPhan(item)\">\r\n                            <td v-for=\"(itemHeader, indexHeader) in headers\" :key=\"indexHeader\" :class=\"itemHeader['class']\" :width=\"itemHeader.hasOwnProperty('width') ? itemHeader.width : ''\">\r\n                              <div v-if=\"itemHeader.type == 'index'\">\r\n                                <div v-if=\"itemsPerPage\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">{{ (page+1) * itemsPerPage - itemsPerPage + index + 1 }}</div>\r\n                                <div v-else :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">{{ index + 1 }}</div>\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'date'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? dateLocale(item['noiDung'][itemHeader.value]) : '' }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'datetime'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? dateLocaleTime(item['noiDung'][itemHeader.value]) : ''}}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'object'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? item['noiDung'][itemHeader.value][itemHeader.mapping] : '' }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'money'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? currency(item['noiDung'][itemHeader.value]) : '' }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'array'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'].hasOwnProperty(itemHeader.value) ? convertDataArray(itemHeader, item['noiDung'][itemHeader.value]) : '' }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'calculator'\" :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ convertDataView(itemHeader, item['noiDung']) }}\r\n                              </div>\r\n                              <div v-else-if=\"itemHeader.type == 'action'\">\r\n                                <v-tooltip top >\r\n                                  <template v-slot:activator=\"{ on, attrs }\">\r\n                                    <v-btn @click.stop=\"showThongTinThanhPhan(item)\" color=\"#2161b1\" text icon class=\" mr-2\" v-bind=\"attrs\" v-on=\"on\">\r\n                                      <v-icon size=\"18\">mdi-file-document-multiple-outline</v-icon>\r\n                                    </v-btn>\r\n                                  </template>\r\n                                  <span>Chi tiết thành phần</span>\r\n                                </v-tooltip>\r\n                                <v-tooltip top v-if=\"isAdmin || checkRole('CAPNHATBAOCAO')\">\r\n                                  <template v-slot:activator=\"{ on, attrs }\">\r\n                                    <v-btn @click.stop=\"showUpdateThanhPhan(item)\" color=\"#2161b1\" text icon class=\" mr-2\" v-bind=\"attrs\" v-on=\"on\">\r\n                                      <v-icon size=\"18\">mdi-pencil</v-icon>\r\n                                    </v-btn>\r\n                                  </template>\r\n                                  <span>Sửa</span>\r\n                                </v-tooltip>\r\n                                <v-tooltip top v-if=\"isAdmin || checkRole('CAPNHATBAOCAO')\">\r\n                                  <template v-slot:activator=\"{ on, attrs }\">\r\n                                    <v-btn @click.stop=\"xoaThanhPhan(item)\" color=\"red\" text icon class=\"\" v-bind=\"attrs\" v-on=\"on\">\r\n                                      <v-icon size=\"18\">mdi-delete</v-icon>\r\n                                    </v-btn>\r\n                                  </template>\r\n                                  <span>Xóa</span>\r\n                                </v-tooltip>\r\n                              </div>\r\n                              <div v-else :style=\"itemHeader.hasOwnProperty('style') ? itemHeader.style : ''\">\r\n                                {{ item['noiDung'][itemHeader.value] }}\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </template>\r\n                    </v-data-table>\r\n                    <pagination v-if=\"pageCount\" :pageInput=\"page\" :total=\"total\" :pageCount=\"pageCount\" @tiny:change-page=\"changePage\"></pagination>\r\n                  </v-col>\r\n                </v-row>\r\n                \r\n                <!-- form them thanh phan -->\r\n                <v-card-text class=\"px-2 py-2\">\r\n                  <form-them-thanh-phan \r\n                    ref=\"formThanhPhan\" \r\n                    :thongtinthanhphan=\"thanhPhanEdit\" \r\n                    :mauThongKe=\"mauThongKeForm\" \r\n                    :dataInput=\"dataInput\" \r\n                    :readonly=\"readonlyForm\">\r\n                  </form-them-thanh-phan>\r\n                </v-card-text>\r\n\r\n            </v-flex>\r\n        </v-layout>\r\n        \r\n        <!--diaglog lọc mẫu theo loại & mẫu-->\r\n        <v-dialog\r\n        max-width=\"900\"\r\n        v-model=\"dialogChonMauBaoCao\"\r\n        persistent\r\n        >\r\n            <v-card>\r\n                <!-- bar -->\r\n                <v-toolbar\r\n                dark\r\n                color=\"primary\" class=\"px-3\"\r\n                >\r\n                    <v-toolbar-title>Chọn mẫu Báo Cáo</v-toolbar-title>\r\n                    <v-spacer></v-spacer>\r\n                    <v-toolbar-items>\r\n                        <v-btn\r\n                        small\r\n                        icon\r\n                        dark\r\n                        @click=\"dialogChonMauBaoCao = false\"\r\n                        >\r\n                        <v-icon>mdi-close</v-icon>\r\n                        </v-btn>\r\n                    </v-toolbar-items>\r\n                </v-toolbar>\r\n                \r\n                <!--diaglog body locMauThongKe -->\r\n                <v-card-text class=\"mt-5 px-2\">\r\n                    <v-form\r\n                        ref=\"formAddToChuc\"\r\n                        v-model=\"validFormAdd\"\r\n                        lazy-validation\r\n                    >\r\n                        <v-layout wrap>\r\n                            <v-col cols=\"12\" md=\"12\" class=\"py-0 mb-2\">\r\n                                <label>Loại báo cáo</label>\r\n                                <v-autocomplete\r\n                                  class=\"flex input-form mt-2\"\r\n                                  hide-no-data\r\n                                  label=\"Chọn loại báo cáo\"\r\n                                  :items=\"danhSachNhomBaoCao\"\r\n                                  v-model=\"nhomBaoCao\"\r\n                                  item-text=\"tenMuc\"\r\n                                  item-value=\"maMuc\"\r\n                                  dense\r\n                                  solo\r\n                                  hide-details=\"auto\"\r\n                                  clearable\r\n                                  return-object\r\n                                  @change=\"getDanhSachMauBaoCao\"\r\n                                >\r\n                                </v-autocomplete>\r\n                            </v-col>\r\n                            <v-col cols=\"12\" md=\"12\" class=\"py-0 mb-2\">\r\n                                <label>Mẫu báo cáo</label>\r\n                                <v-autocomplete\r\n                                class=\"flex input-form mt-2\"\r\n                                hide-no-data\r\n                                label=\"Chọn mẫu báo cáo\"\r\n                                :items=\"danhSachMauBaoCao\"\r\n                                v-model=\"loaiBaoCaoSearch\"\r\n                                item-text=\"tenGoi\"\r\n                                item-value=\"maMauBaoCao\"\r\n                                dense\r\n                                solo\r\n                                hide-details=\"auto\"\r\n                                clearable\r\n                                return-object\r\n                                >\r\n                                </v-autocomplete>\r\n                            </v-col>\r\n                        </v-layout>\r\n                    </v-form>\r\n                </v-card-text>\r\n                \r\n                <!--diaglog btn locMauThongKe-->\r\n                <v-card-actions class=\"justify-end pb-3\">                    \r\n                    <v-btn small class=\"mr-2\" color=\"primary\" :loading=\"loading\" :disabled=\"loading\" @click=\"getDanhSachBaoCao()\">\r\n                        <v-icon left>\r\n                            mdi-image-filter-center-focus-weak\r\n                        </v-icon>\r\n                        <span>Lọc mẫu</span>\r\n                    </v-btn>\r\n                </v-card-actions>\r\n\r\n            </v-card>\r\n        </v-dialog>\r\n        \r\n        <!--  dialogThemThanhPhan -->\r\n        <!-- <v-dialog\r\n          max-width=\"1200\"\r\n          v-model=\"dialogThemThanhPhan\"\r\n          persistent\r\n          fullscreen\r\n        >\r\n          <v-card>\r\n            <v-toolbar\r\n              dark\r\n              color=\"primary\"\r\n              class=\"px-3\"\r\n            >\r\n              <v-toolbar-title v-if=\"readonlyForm && editThanhPhan === null\">THÔNG TIN THÀNH PHẦN BÁO CÁO</v-toolbar-title>\r\n              <v-toolbar-title v-if=\"editThanhPhan === true && !readonlyForm\">CẬP NHẬT THÀNH PHẦN BÁO CÁO</v-toolbar-title>\r\n              <v-toolbar-title v-if=\"editThanhPhan === false && !readonlyForm\">THÊM THÀNH PHẦN BÁO CÁO</v-toolbar-title>\r\n              <v-spacer></v-spacer>\r\n              <v-toolbar-items>\r\n                <v-btn\r\n                  icon\r\n                  dark\r\n                  @click=\"exitForm\"\r\n                >\r\n                  <v-icon>mdi-close</v-icon>\r\n                </v-btn>\r\n              </v-toolbar-items>\r\n            </v-toolbar>\r\n            <v-card-text class=\"px-2 py-2\">\r\n              <form-them-thanh-phan \r\n                ref=\"formThanhPhan\" \r\n                :thongtinthanhphan=\"thanhPhanEdit\" \r\n                :mauThongKe=\"mauThongKeForm\" \r\n                :dataInput=\"dataInput\" \r\n                :readonly=\"readonlyForm\">\r\n              </form-them-thanh-phan>\r\n              <v-card-actions class=\"justify-center my-4\">\r\n                <v-btn small depressed color=\"red\" class=\"white--text mr-2\" :loading=\"loadingAction\" :disabled=\"loadingAction\" @click=\"exitForm\">\r\n                  <v-icon left>\r\n                    mdi-close\r\n                  </v-icon>\r\n                  Thoát\r\n                </v-btn>\r\n                <v-btn v-if=\"!readonlyForm\" small depressed class=\"mr-2\" color=\"primary\" :loading=\"loadingAction\" :disabled=\"loadingAction\" @click.native=\"submitThemThanhPhan\">\r\n                  <v-icon left dark size=\"18\">\r\n                    mdi-file-document-plus-outline\r\n                  </v-icon>\r\n                  <span v-if=\"editThanhPhan\">Cập nhật</span>\r\n                  <span v-else>Thêm thành phần</span>\r\n                </v-btn>\r\n              </v-card-actions>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-dialog> -->\r\n\r\n    </v-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport $ from 'jquery'\r\nimport Pagination from './Pagination.vue'\r\nimport FormMauThongKe from './FormMauThongKe.vue'\r\nimport toastr from 'toastr'\r\ntoastr.options = {\r\n  'closeButton': true,\r\n  'timeOut': '5000',\r\n  \"positionClass\": \"toast-top-center\"\r\n}\r\nexport default {\r\n    name: 'BaoCao',\r\n    components: {\r\n      Pagination,\r\n      'form-them-thanh-phan': FormMauThongKe\r\n    },\r\n    props: ['type', 'id'],\r\n    data() {\r\n      return {\r\n        dialogChonMauBaoCao: true,\r\n        readonlyForm: false,\r\n        mauThongKeForm: '',\r\n        dataInput: '',\r\n        formData: '',\r\n        chiTietBaoCao: '',\r\n        chiTietMauBaoCao: '',\r\n        selected: [],\r\n        keywordSearch: '',\r\n        loadingData: false,\r\n        danhSachThanhPhan: [],\r\n        tableConfig: '',\r\n        maBaoCaoSearch: '',\r\n        kyBaoCaoItems: [],\r\n        kyBaoCaoSearch: '',\r\n        donViDuocGiaoItems: [],\r\n        donViDuocGiaoSearch: '',\r\n        loaiBaoCaoItems: [],\r\n        loaiBaoCaoSearch: '',\r\n        trangThaiItems: [],\r\n        trangThaiSearch: '',\r\n        // headers: [],\r\n        page: 0,\r\n        itemsPerPage: 0,\r\n        total: 0,\r\n        pageCount: 0,\r\n        menuDate1: false,\r\n        menuDate2: false,\r\n        fromReceiveDate: '',\r\n        fromReceiveDateFormatted: '',\r\n        toReceiveDate: '',\r\n        toReceiveDateFormatted: '',\r\n        dialogThemThanhPhan: false,\r\n        editThanhPhan: false,\r\n        thanhPhanEdit: '',\r\n        loadingAction: false,\r\n        actionItems: [],\r\n        actionSelected: '',\r\n        validFormDoAction: false,\r\n        dialogDoAction: false,\r\n        ghiChuDoAction: '',\r\n        dialogLichSu: false,\r\n        danhSachTienTrinh: [],\r\n        nhomBaoCao: '',\r\n        danhSachMauBaoCao: '',\r\n        danhSachBaoCao: [],\r\n        headers: [\r\n          {\r\n              sortable: false,\r\n              text: 'STT',\r\n              align: 'center',\r\n              value: 'index'\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Mã báo cáo',\r\n              align: 'left',\r\n              value: 'maBaoCao',\r\n              class: 'th-center',\r\n              width: 150\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Loại báo cáo',\r\n              align: 'left',\r\n              value: 'tenBaoCao',\r\n              class: 'th-center'\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Kỳ báo cáo',\r\n              align: 'left',\r\n              value: 'kyBaoCao',\r\n              class: 'th-center',\r\n              width: 100\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Đơn vị được giao',\r\n              align: 'left',\r\n              value: 'coQuanThucHien',\r\n              class: 'th-center',\r\n              width: 200\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Ngày tạo',\r\n              align: 'left',\r\n              value: 'thoiGianTao',\r\n              class: 'th-center'\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Hạn xử lý',\r\n              align: 'left',\r\n              value: 'hanXuLy',\r\n              class: 'th-center'\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Tình trạng',\r\n              align: 'left',\r\n              value: 'tinhTrang',\r\n              class: 'th-center',\r\n              width: 120\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Thao tác',\r\n              align: 'center',\r\n              value: 'action',\r\n              class: 'th-center',\r\n              width: 100\r\n          },\r\n        ],\r\n      }\r\n    },\r\n    created () {\r\n      let vm = this\r\n      if (!vm.isAdmin && !vm.checkRole('XEMBAOCAODONVI') && !vm.checkRole('XEMTATCABAOCAO')) {\r\n        vm.$router.push({ path: '/login'})\r\n        return\r\n      }\r\n      vm.danhSachBaoCao = []\r\n      vm.getChiTietBaoCao()\r\n      vm.getDanhMuc('NHOMBAOCAO')\r\n      vm.getDanhSachMauBaoCao()\r\n      vm.getDanhSachBaoCao('reset')\r\n    },\r\n    watch: {\r\n      '$route': function (newRoute, oldRoute) {\r\n        let vm = this\r\n        vm.getChiTietBaoCao()\r\n      }\r\n    },\r\n    methods: {\r\n      // laythongtin() {\r\n      //   let vm = this\r\n      //   let filter = {\r\n      //     collectionName: 'baocao',\r\n          \r\n      //   }\r\n      //   // vm.$router.push({ path: '/thong-ke-mau-bao-cao/' + item.primKey})\r\n      //   vm.$store.dispatch('collectionListAll', '01').then(function (response) {\r\n      //     vm.danhSachBaoCao = response.content\r\n      //     // vm.total = response.totalElements\r\n      //     // vm.pageCount = response.totalPages\r\n      //     // vm.loadingData = false\r\n      //     console.log(response);\r\n      //   }).catch(function () {\r\n      //     vm.loadingData = false\r\n      //   })\r\n        \r\n      // },\r\n      getDanhSachBaoCao (type) {\r\n        let vm = this\r\n        if (type === 'reset') {\r\n          vm.total = 0\r\n          vm.pageCount = 0\r\n          vm.page = 0\r\n          vm.resetFormTimKiem()\r\n        }\r\n        if (vm.loadingData) {\r\n          return\r\n        }\r\n        vm.loadingData = true\r\n        let filter = {\r\n          collectionName: 'baocao',\r\n          data: {\r\n            page: vm.page,\r\n            size: vm.itemsPerPage,\r\n            orderFields: 'thoiGianTao',\r\n            orderTypes: 'asc',\r\n            // kyBaoCao_maMuc: vm.kyBaoCaoSearch ? vm.kyBaoCaoSearch['maMuc'] : '',\r\n            // namBaoCao: vm.namBaoCaoSearch ? vm.namBaoCaoSearch['maMuc'] : '',\r\n            // maBaoCao: vm.maBaoCaoSearch,\r\n            // tinhTrang_maMuc: vm.trangThaiSearch ? vm.trangThaiSearch['maMuc'] : '',\r\n            mauBaoCao_maMauBaoCao: vm.loaiBaoCaoSearch ? vm.loaiBaoCaoSearch['maMauBaoCao'] : '',\r\n            // coQuanThucHien_maHanhChinh: vm.donViDuocGiaoSearch ? vm.donViDuocGiaoSearch['maHanhChinh'] : '',\r\n            // tuNgay: vm.fromReceiveDateFormatted ? vm.parseDate(vm.fromReceiveDateFormatted) : '',\r\n            // denNgay: vm.toReceiveDateFormatted ? vm.parseDate(vm.toReceiveDateFormatted) : ''\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          vm.danhSachBaoCao = response.content\r\n          // console.log(vm.danhSachBaoCao[0].mauBaoCao.maDinhDanh)\r\n          vm.total = response.totalElements\r\n          vm.pageCount = response.totalPages\r\n          vm.loadingData = false\r\n          \r\n        }).catch(function () {\r\n          vm.loadingData = false\r\n        })\r\n        vm.dialogChonMauBaoCao = false\r\n      },\r\n      xemChiTietBaoCao (item) {\r\n        let vm = this\r\n        vm.$router.push({ path: '/bao-cao/' + vm.type + '/' + item.primKey})\r\n      },\r\n      // getChiTietBaoCao0 (type) {\r\n      //   let vm = this\r\n      //   if (type === 'reset') {\r\n      //     vm.total = 0\r\n      //     vm.pageCount = 0\r\n      //     vm.page = 0\r\n      //     vm.resetFormTimKiem()\r\n      //   }\r\n      //   if (vm.loadingData) {\r\n      //     return\r\n      //   }\r\n      //   vm.loadingData = true\r\n      //   let filter = {\r\n      //     collectionName: 'baocao',\r\n      //     data: {\r\n      //       page: vm.page,\r\n      //       size: vm.itemsPerPage,\r\n      //       orderFields: 'thoiGianTao',\r\n      //       orderTypes: 'asc',\r\n      //       kyBaoCao_maMuc: vm.kyBaoCaoSearch ? vm.kyBaoCaoSearch['maMuc'] : '',\r\n      //       namBaoCao: vm.namBaoCaoSearch ? vm.namBaoCaoSearch['maMuc'] : '',\r\n      //       maBaoCao: vm.maBaoCaoSearch,\r\n      //       tinhTrang_maMuc: vm.trangThaiSearch ? vm.trangThaiSearch['maMuc'] : '',\r\n      //       mauBaoCao_maMauBaoCao: vm.loaiBaoCaoSearch ? vm.loaiBaoCaoSearch['maMauBaoCao'] : '',\r\n      //       coQuanThucHien_maHanhChinh: vm.donViDuocGiaoSearch ? vm.donViDuocGiaoSearch['maHanhChinh'] : '',\r\n      //       tuNgay: vm.fromReceiveDateFormatted ? vm.parseDate(vm.fromReceiveDateFormatted) : '',\r\n      //       denNgay: vm.toReceiveDateFormatted ? vm.parseDate(vm.toReceiveDateFormatted) : ''\r\n      //     }\r\n      //   }\r\n      //   vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n      //     vm.danhSachBaoCao = response.content\r\n      //     vm.total = response.totalElements\r\n      //     vm.pageCount = response.totalPages\r\n      //     vm.loadingData = false\r\n      //   }).catch(function () {\r\n      //     vm.loadingData = false\r\n      //   })\r\n      // },\r\n\r\n      // show chiTietBaoCao\r\n      getDanhMuc (collection) {\r\n        let vm = this\r\n        let filter = {\r\n          collectionName: 'dulieudanhmuc',\r\n          data: {\r\n            orderFields: 'maMuc',\r\n            orderTypes: 'asc',\r\n            page: 0,\r\n            size: 1000,\r\n            danhMuc_maDanhMuc: collection\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          if (collection === 'NHOMBAOCAO') {\r\n            vm.danhSachNhomBaoCao = response.content\r\n          }\r\n        }).catch(function () {\r\n        })\r\n      },\r\n      getDanhSachMauBaoCao () {\r\n        let vm = this\r\n        let filter = {\r\n          collectionName: 'maubaocao',\r\n          data: {\r\n            orderFields: 'tenGoi',\r\n            orderTypes: 'asc',\r\n            nhomBaoCao_maMuc: vm.nhomBaoCao ? vm.nhomBaoCao.maMuc : '',\r\n            page: 0,\r\n            size: 1000,\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n            vm.danhSachMauBaoCao = response.content\r\n        }).catch(function () {\r\n        })\r\n      },\r\n\r\n      getChiTietBaoCao () {\r\n        let vm = this\r\n        if (vm.loadingData) {\r\n          return\r\n        }\r\n        vm.loadingData = true\r\n        let filter = {\r\n          collectionName: 'baocao',\r\n          id: '633cefbbca8ece15baf3870e',\r\n          // mauBaoCao: {\r\n          //   mauThongKe: {\r\n          //     maMau: '01',\r\n          //   },\r\n          // }\r\n        }\r\n        vm.actionItems = []\r\n        // vm.loadingData = true\r\n\r\n        vm.$store.dispatch('collectionDetail', filter).then(function (response) {\r\n          vm.loadingData = false\r\n          vm.chiTietBaoCao = response\r\n          // vm.danhSachTienTrinh = vm.chiTietBaoCao.tienTrinh\r\n          let roleUser = vm.$cookies.get('Roles', '') ? vm.$cookies.get('Roles', '').split(',') : []\r\n          let actions = vm.chiTietBaoCao.hasOwnProperty('chiTietQuyTrinh') ? vm.chiTietBaoCao.chiTietQuyTrinh : []\r\n          if (vm.isAdmin) {\r\n            vm.actionItems = actions\r\n          } else {\r\n            for (let index = 0; index < actions.length; index++) {\r\n              let vaiTroAction = actions[index]['vaiTro']\r\n              if (vaiTroAction && vaiTroAction.length) {\r\n                for (let index2 = 0; index2 < vaiTroAction.length; index2++) {\r\n                  let element = vaiTroAction[index2]['maMuc']\r\n                  let perm = roleUser.find(function (item2) {\r\n                    return item2 == element\r\n                  })\r\n                  if (perm) {\r\n                    vm.actionItems.push(actions[index])\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n          vm.getChiTietMauBaoCao(vm.chiTietBaoCao['mauBaoCao']['maDinhDanh'])\r\n        }).catch(function () {\r\n          vm.loadingData = false\r\n        })\r\n\r\n        \r\n      },\r\n      // show chi tiet ra table\r\n      getChiTietMauBaoCao (key) {\r\n        let vm = this\r\n        let filter = {\r\n          collectionName: 'maubaocao',\r\n          keySearch: 'madinhdanh',\r\n          id: key\r\n        }\r\n        vm.$store.dispatch('collectionDetailSearchTest', filter).then(function (response) {\r\n          vm.chiTietMauBaoCao = response.resp\r\n          vm.mauThongKeForm = vm.chiTietMauBaoCao.mauThongKe\r\n          vm.headers = vm.chiTietMauBaoCao.mauThongKe[0].listView[0]['headers']\r\n          vm.itemsPerPage = vm.chiTietMauBaoCao.mauHienThi[0].hasOwnProperty('itemsPerPage') ? vm.chiTietMauBaoCao.mauHienThi[0].itemsPerPage : 0\r\n          vm.getdanhSachThanhPhan()\r\n          console.log(filter)\r\n        }).catch(function () {\r\n        })\r\n      },\r\n      // lay danhSachThanhPhan\r\n      getdanhSachThanhPhan (type) {\r\n        let vm = this\r\n        if (type === 'reset') {\r\n          vm.total = 0\r\n          vm.pageCount = 0\r\n          vm.page = 0\r\n          // vm.resetFormTimKiem()\r\n        }\r\n        if (vm.loadingData) {\r\n          return\r\n        }\r\n        vm.loadingData = true\r\n        let filter = {\r\n          collectionName: 'thanhphanbaocao',\r\n          data: {\r\n            page: vm.page,\r\n            size: vm.itemsPerPage,\r\n            orderFields: 'baoCao_maBaoCao',\r\n            orderTypes: 'asc',\r\n            baoCao_maBaoCao: vm.chiTietBaoCao.maBaoCao\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          vm.danhSachThanhPhan = response.content\r\n          vm.total = response.totalElements\r\n          vm.pageCount = response.totalPages\r\n          vm.loadingData = false\r\n        }).catch(function () {\r\n          vm.loadingData = false\r\n        })\r\n      },\r\n      // click btn themMoiThanhPhan\r\n      showAddThanhPhan () {\r\n        let vm = this\r\n        if (vm.danhSachThanhPhan.length && vm.chiTietMauBaoCao.nhapNhieuThanhPhan != 'true') {\r\n          toastr.error('Không thể thêm thành phần. Loại báo cáo chỉ có 1 thành phần')\r\n          return\r\n        }\r\n        vm.readonlyForm = false\r\n        vm.dialogThemThanhPhan = true\r\n        vm.editThanhPhan = false\r\n        setTimeout(function () {\r\n          vm.$refs.formThanhPhan.initForm()\r\n          vm.$refs.formThanhPhan.resetForm()\r\n        }, 200)\r\n      },\r\n      // click btn editThanhPhan\r\n      showUpdateThanhPhan (item) {\r\n        let vm = this\r\n        vm.readonlyForm = false\r\n        vm.thanhPhanEdit = item\r\n        try {\r\n          vm.dataInput = Object.assign({}, item.noiDung)\r\n        } catch (error) {\r\n          vm.dataInput = {}\r\n        }\r\n        vm.dialogThemThanhPhan = true\r\n        vm.editThanhPhan = true\r\n        setTimeout(function () {\r\n          vm.$refs.formThanhPhan.initForm('update')\r\n        }, 200)\r\n      },\r\n      // click btn themThanhPhan\r\n      submitThemThanhPhan () {\r\n        let vm = this\r\n        let validate = vm.$refs.formThanhPhan.validateForm()\r\n        if (validate) {\r\n          vm.$refs.formThanhPhan.submitTaoBaoCao()\r\n          let formData = vm.$store.getters.getFormData\r\n          let filter = {\r\n            collectionName: 'thanhphanbaocao',\r\n            data: {\r\n              \"baoCao\": {\r\n                \"maDinhDanh\": vm.chiTietBaoCao['maDinhDanh'],\r\n                \"maBaoCao\": vm.chiTietBaoCao['maBaoCao']\r\n              },\r\n              \"mauBaoCao\": {\r\n                \"maDinhDanh\": vm.chiTietMauBaoCao.maDinhDanh,\r\n                \"maMauBaoCao\": vm.chiTietMauBaoCao.maMauBaoCao\r\n              },\r\n              \"kyBaoCao\": {\r\n                \"maMuc\": vm.chiTietBaoCao['kyBaoCao']['maMuc'],\r\n                \"tenMuc\": vm.chiTietBaoCao['kyBaoCao']['tenMuc']\r\n              },\r\n              \"noiDung\": formData\r\n            }\r\n          }\r\n          // console.log('dataBaoCao', filter.data)\r\n          vm.loadingAction = true\r\n          if (!vm.editThanhPhan) {\r\n            vm.$store.dispatch('collectionCreate', filter).then(function (result) {\r\n              vm.runProcessUploadFiles(result.resp)\r\n            }).catch(function (response) {\r\n              vm.loadingAction = false\r\n              toastr.remove()\r\n              toastr.error('Thêm mới thất bại')\r\n            })\r\n          } else {\r\n            filter['id'] = vm.thanhPhanEdit.primKey\r\n            vm.$store.dispatch('collectionUpdate', filter).then(function (result) {\r\n              vm.runProcessUploadFiles(vm.thanhPhanEdit)\r\n            }).catch(function (response) {\r\n              vm.loadingAction = false\r\n              toastr.remove()\r\n              toastr.error('Cập nhật thất bại')\r\n            })\r\n          }\r\n        }\r\n      },\r\n      // click chiTietThanhPhan\r\n      showThongTinThanhPhan (item) {\r\n        let vm = this\r\n        vm.readonlyForm = true\r\n        vm.editThanhPhan = null\r\n        vm.dataInput = Object.assign({}, item.noiDung)\r\n        vm.dialogThemThanhPhan = true\r\n        setTimeout(function () {\r\n          vm.$refs.formThanhPhan.initForm('update')\r\n        }, 200)\r\n      },\r\n      exitForm () {\r\n        let vm = this\r\n        vm.$refs.formThanhPhan.resetForm()\r\n        vm.dialogThemThanhPhan = false\r\n      },\r\n      xoaThanhPhan (item) {\r\n        let vm = this\r\n        vm.$store.commit('SET_SHOWCONFIRM', true)\r\n        let confirm = {\r\n          auth: false,\r\n          title: 'Xóa thành phần',\r\n          message: 'Bạn có chắc chắn muốn xóa thành phần báo cáo này',\r\n          button: {\r\n            yes: 'Có',\r\n            no: 'Không'\r\n          },\r\n          callback: () => {\r\n            let filter = {\r\n              collectionName: 'thanhphanbaocao',\r\n              id: item.primKey\r\n            }\r\n            vm.loading = true\r\n            vm.$store.dispatch('collectionDelete', filter).then(function (result) {\r\n              vm.loading = false\r\n              toastr.remove()\r\n              toastr.success('Xóa thành phần thành công')\r\n              vm.getdanhSachThanhPhan()\r\n            }).catch(function (response) {\r\n              vm.loading = false\r\n              toastr.remove()\r\n              toastr.error('Xóa thành phần thất bại')\r\n            })\r\n          }\r\n        }\r\n        vm.$store.commit('SET_CONFIG_CONFIRM_DIALOG', confirm)\r\n      },\r\n      showDoAction (item) {\r\n        let vm = this\r\n        vm.actionSelected = item\r\n        vm.dialogDoAction = true\r\n        vm.ghiChuDoAction = ''\r\n      },\r\n      doAction (item) {\r\n        let vm = this\r\n        vm.loadingAction = true\r\n        let userInfo = vm.$cookies.get('UserInfo', '')\r\n        let filter = {\r\n          id: vm.chiTietBaoCao.primKey,\r\n          collectionName: 'baocao',\r\n          data: Object.assign(vm.chiTietBaoCao, {\r\n            \"tinhTrang\": {\r\n              \"maMuc\": item.maTrangThai,\r\n              \"tenMuc\": item.tenTrangThai\r\n            },\r\n            \"tienTrinh\": {\r\n              \"hoVaTen\": userInfo ? userInfo.hoVaTen : '',\r\n              \"thoiGianCapNhat\": (new Date()).toISOString(),\r\n              \"hanhDong\": item.tenHanhDong,\r\n              \"maHanhDong\": item.maHanhDong,\r\n              \"noiDung\": String(vm.ghiChuDoAction).trim()\r\n            }\r\n          })\r\n        }\r\n        vm.$store.dispatch('collectionUpdate', filter).then(function (result) {\r\n          vm.loadingAction = false\r\n          toastr.remove()\r\n          toastr.success('Thực hiện thành công')\r\n          vm.dialogDoAction = false\r\n          vm.$router.push({ path: '/bao-cao/' + vm.type})\r\n        }).catch(function () {\r\n          vm.loadingAction = false\r\n          vm.dialogDoAction = false\r\n          toastr.remove()\r\n          toastr.error('Thực hiện thất bại')\r\n        })\r\n      },\r\n      checkRoleAction (role) {\r\n        let vm = this\r\n        let roleUser = vm.$cookies.get('Roles', '')\r\n        if (!role || !roleUser) {\r\n          return false\r\n        }\r\n        let roles = roleUser.split(',')\r\n        let exits = roles.find(function (item) {\r\n          return item == role\r\n        })\r\n        if (exits) {\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      },\r\n      uploadFiles (index) {\r\n        let vm = this\r\n        let files = ''\r\n        try {\r\n          files = $('#file_upload')[0].files\r\n        } catch (error) {\r\n        }\r\n        let file = files[index]\r\n        let fileName = file['name']\r\n        if (file['name']) {\r\n          fileName = file['name'].replace(/\\%/g, '')\r\n          fileName = fileName.replace(/\\//g, '')\r\n          fileName = fileName.replace(/\\\\/g, '')\r\n        }\r\n        let formData = new FormData()\r\n        formData.append('id', vm.thanhPhanEdit.primKey)\r\n        formData.append('files', file, fileName)\r\n\r\n        axios.post('/v1/datasharing/thanhphanbaocao/upload', formData, {\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'multipart/form-data; boundary=<calculated when request is sent>'\r\n          }\r\n        }).then(function (response) {\r\n          let files = ''\r\n          try {\r\n            files = $('#file_upload')[0].files\r\n          } catch (error) {\r\n          }\r\n          let file = files[index + 1]\r\n          if (!file) {\r\n            vm.loadingAction = false\r\n            vm.dialogThemThanhPhan = false\r\n            toastr.remove()\r\n            toastr.success('Thực hiện thành công')\r\n            vm.getdanhSachThanhPhan()\r\n            return\r\n          } else {\r\n            vm.uploadFiles(index + 1)\r\n          }\r\n        }).catch(function (xhr) {\r\n          toastr.clear()\r\n          toastr.error('Tài liệu ' + fileName + ' tải lên không thành công. Vui lòng kiểm tra lại.')\r\n          let files = ''\r\n          try {\r\n            files = $('#file_upload')[0].files\r\n          } catch (error) {\r\n          }\r\n          let file = files[index + 1]\r\n          if (!file) {\r\n            vm.loadingAction = false\r\n            vm.dialogThemThanhPhan = false\r\n            toastr.remove()\r\n            toastr.success('Thực hiện thành công')\r\n            vm.getdanhSachThanhPhan()\r\n            return\r\n          } else {\r\n            vm.uploadFiles(index + 1)\r\n          }\r\n        })\r\n      },\r\n      runProcessUploadFiles () {\r\n        let vm = this\r\n        let files = ''\r\n        try {\r\n          files = $('#file_upload')[0].files\r\n        } catch (error) {\r\n        }\r\n        let count = files.length\r\n        if (count) {\r\n          vm.uploadFiles(0)\r\n        } else {\r\n          vm.loadingAction = false\r\n          vm.dialogThemThanhPhan = false\r\n          toastr.remove()\r\n          toastr.success('Thực hiện thành công')\r\n          vm.getdanhSachThanhPhan()\r\n        }\r\n      },\r\n      viewHistory () {\r\n        let vm = this\r\n        vm.dialogLichSu = true\r\n      },\r\n      convertDataView (itemHeader, item) {\r\n        let output = ''\r\n        try {\r\n          let calu = itemHeader['calculator'].replace(/dataInput/g, 'item')\r\n          output = eval(calu)\r\n        } catch (error) {\r\n          output = ''\r\n        }\r\n        return output\r\n      },\r\n      convertDataArray (itemHeader, array) {\r\n        let output = ''\r\n        if (array) {\r\n          output = Array.from(array, function (item) {\r\n            return item[itemHeader['mapping']]\r\n          })\r\n        }\r\n        output = output.toString().replace(/,/g, ', ')\r\n        return output\r\n      },\r\n      getStatus(danhTinhDienTu) {\r\n        return danhTinhDienTu[0] ? danhTinhDienTu[0].tinhTrangSuDungTaiKhoan['tenMuc'] : 'Chưa tạo tài khoản'\r\n      },\r\n      getColor (danhTinhDienTu) {\r\n        let status = danhTinhDienTu[0] ? String(danhTinhDienTu[0].tinhTrangSuDungTaiKhoan['MaMuc']) : '0'\r\n        switch(status) {\r\n          case '1':\r\n              return 'color: blue'\r\n          case '2':\r\n              return 'color: green'\r\n          case '3':\r\n            return 'color: orange'\r\n          case '4':\r\n            return 'color: red'\r\n          default:\r\n            return 'color: black'\r\n        }\r\n      },\r\n      currency (value) {\r\n        if (value) {\r\n          let moneyCur = (value / 1).toFixed(0).replace('.', ',')\r\n          return moneyCur.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.')\r\n        }\r\n        return ''\r\n      },\r\n      dateLocale (dateInput) {\r\n        if (!dateInput) {\r\n          return ''\r\n        }\r\n        let date = new Date(dateInput)\r\n        return `${date.getDate().toString().padStart(2, '0')}/${(date.getMonth() + 1).toString().padStart(2, '0')}/${date.getFullYear()}`\r\n      },\r\n      dateLocaleTime (dateInput) {\r\n        let date = new Date(dateInput)\r\n        return `${date.getDate().toString().padStart(2, '0')}/${(date.getMonth() + 1).toString().padStart(2, '0')}/${date.getFullYear()} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\r\n      },\r\n      changePage (config) {\r\n        let vm = this\r\n        vm.page = config.page\r\n        vm.getdanhSachThanhPhan()\r\n      },\r\n      resetFormTimKiem () {\r\n        let vm = this\r\n        vm.$refs.formTimKiem.reset()\r\n        vm.$refs.formTimKiem.resetValidation()\r\n      },\r\n      changeDate(index) {\r\n        let vm = this\r\n        vm.menuDate1 = false\r\n        if (index === '1') {\r\n          vm.fromReceiveDateFormatted = vm.formatDate(vm.fromReceiveDate)\r\n        } else if (index === '2') {\r\n          vm.toReceiveDateFormatted = vm.formatDate(vm.toReceiveDate)\r\n        }\r\n      },\r\n      formatDate(date) {\r\n        if (!date) return ''\r\n        const [year, month, day] = date.split('-')\r\n        return `${day}/${month}/${year}`\r\n      },\r\n      parseDate(date) {\r\n        if (!date) return ''\r\n        if (String(date).indexOf('/') > 0) {\r\n          const [day, month, year] = date.split('/')\r\n          return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`\r\n        } else if (String(date).indexOf('-') > 0) {\r\n          const [day, month, year] = date.split('-')\r\n          return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`\r\n        } else {\r\n          let date1 = new Date(Number(date))\r\n          return `${date1.getFullYear()}-${(date1.getMonth() + 1).toString().padStart(2, '0')}-${date1.getDate().toString().padStart(2, '0')}`\r\n        }\r\n      },\r\n      getMinMax (date) {\r\n        if (!date) return null\r\n        const [day, month, year] = date.split('/')\r\n        return `${year}-${month}-${day}`\r\n      },\r\n      goBack () {\r\n        window.history.back()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\">\r\n  .bao-cao-1 {\r\n    width: 300px;\r\n    max-width: 235px;\r\n    /* border-bottom: 1px solid #DDDDDD; */\r\n  }\r\n  .bao-cao-1 .v-list {\r\n    padding-top: 0px;\r\n  }\r\n  .nav-content {\r\n    border-right: 1px solid #DDDDDD;\r\n    box-sizing: border-box;\r\n    // border-radius: 7px;\r\n    height: 100%;\r\n  }\r\n</style>\r\n\r\n\r\n"]}]}