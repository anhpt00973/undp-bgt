{"remainingRequest":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vuejs-sourcode\\undp-bgt\\src\\views\\BaoCaoTongHop.vue?vue&type=style&index=0&id=fd12a8ec&lang=scss&","dependencies":[{"path":"F:\\vuejs-sourcode\\undp-bgt\\src\\views\\BaoCaoTongHop.vue","mtime":1665314437505},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\css-loader\\dist\\cjs.js","mtime":1665053118453},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1665053120726},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\postcss-loader\\src\\index.js","mtime":1665053119174},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1665053118004},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665053118014},{"path":"F:\\vuejs-sourcode\\undp-bgt\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053120378}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI3RhYmxlLWRzLWJhb2NhbyB0YWJsZSB0ciB0ZCB7CiAgY3Vyc29yOiBwb2ludGVyOwp9Ci5iYW8tY2FvLTEgewogIHdpZHRoOiAzMDBweDsKICBtYXgtd2lkdGg6IDIzNXB4OwogIC8qIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjREREREREOyAqLwp9Ci5iYW8tY2FvLTEgLnYtbGlzdCB7CiAgcGFkZGluZy10b3A6IDBweDsKfQovLyAuYmFvLWNhby0yIHsKLy8gICB3aWR0aDogY2FsYygxMDAlIC0gMzAwcHgpOwovLyAgIHBhZGRpbmc6IDAgMTBweDsKLy8gfQoubmF2LWNvbnRlbnQgewogIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNEREREREQ7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAvLyBib3JkZXItcmFkaXVzOiA3cHg7CiAgaGVpZ2h0OiAxMDAlOwp9Cg=="},{"version":3,"sources":["BaoCaoTongHop.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+qBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BaoCaoTongHop.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-card\r\n    class=\"mx-auto pa-3\"\r\n    flat\r\n    id=\"table-ds-baocao\"\r\n  >\r\n    <v-layout wrap>\r\n      <v-flex class=\"bao-cao-2 py-2 pt-0\">\r\n        <div>\r\n          <!-- tim kiem nang cao btn -->\r\n          <v-row justify=\"end\" class=\"mt-0 mb-0 mx-0\" style=\"border-bottom: 1px solid #2161B1\">\r\n            <v-col class=\"d-flex align-center justify-start py-0 px-0\" style=\"color: #2161B1;font-weight: 500;\">\r\n              <div class=\"header-content\">\r\n                {{dynamicType}}\r\n              </div>\r\n              <div class=\"triangle-header\"></div>\r\n            </v-col>\r\n            <v-spacer></v-spacer>\r\n            <v-col class=\"d-flex align-center justify-end py-0 px-0\" style=\"max-width: 150px;\">\r\n              <v-btn\r\n                depressed\r\n                class=\"mx-0\"\r\n                small\r\n                color=\"primary\"\r\n                @click=\"showAdvanceSearch()\"\r\n                style=\"float: right\"\r\n                >\r\n                <v-icon size=\"18\" v-if=\"!advanceSearch\">mdi-filter-variant-plus</v-icon>\r\n                <v-icon size=\"18\" v-else>mdi-filter-variant</v-icon>\r\n                &nbsp;\r\n                Tìm kiếm nâng cao\r\n              </v-btn>\r\n            </v-col>\r\n          </v-row>\r\n          <!-- advanceSearch body-->\r\n          <div v-if=\"advanceSearch\">\r\n            <v-form\r\n              ref=\"formTimKiem\"\r\n              lazy-validation\r\n            >\r\n              <v-row align-content=\"center\" class=\"my-0 mt-2\">\r\n                <!-- ky bao cao  -->\r\n                <v-col cols=\"12\" :md=\"type == 'tra-cuu' ? 3 : 4\" class=\"py-0 mb-2\">\r\n                  <label>Kỳ báo cáo</label>\r\n                  <v-autocomplete\r\n                    class=\"flex input-form mt-2\"\r\n                    hide-no-data\r\n                    :items=\"kyBaoCaoItems\"\r\n                    v-model=\"kyBaoCaoSearch\"\r\n                    item-text=\"tenMuc\"\r\n                    item-value=\"maMuc\"\r\n                    dense\r\n                    solo\r\n                    hide-details=\"auto\"\r\n                    clearable\r\n                    return-object\r\n                  >\r\n                  </v-autocomplete>\r\n                </v-col>\r\n                <!-- nam bao cao -->\r\n                <v-col cols=\"12\" :md=\"type == 'tra-cuu' ? 3 : 4\" class=\"py-0 mb-2\">\r\n                  <label>Năm báo cáo</label>\r\n                  <v-autocomplete\r\n                    class=\"flex input-form mt-2\"\r\n                    hide-no-data\r\n                    :items=\"namBaoCaoItems\"\r\n                    v-model=\"namBaoCaoSearch\"\r\n                    item-text=\"tenMuc\"\r\n                    item-value=\"maMuc\"\r\n                    dense\r\n                    solo\r\n                    hide-details=\"auto\"\r\n                    clearable\r\n                    return-object\r\n                  >\r\n                  </v-autocomplete>\r\n                </v-col>\r\n                <!-- ma bao cao -->\r\n                <v-col cols=\"12\" :md=\"type == 'tra-cuu' ? 3 : 4\" class=\"my-0 py-0 mb-2\">\r\n                  <label>Mã báo cáo</label>\r\n                  <v-text-field\r\n                      class=\"input-form mt-2\"\r\n                      v-model=\"maBaoCaoSearch\"\r\n                      solo\r\n                      dense\r\n                      clearable\r\n                      hide-details=\"auto\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                <!-- tinh trang -->\r\n                <v-col cols=\"12\" md=\"3\" class=\"py-0 mb-2\" v-if=\"type == 'tra-cuu'\">\r\n                    <label>Tình trạng</label>\r\n                    <v-autocomplete\r\n                      class=\"flex input-form mt-2\"\r\n                      hide-no-data\r\n                      :items=\"trangThaiItems\"\r\n                      v-model=\"trangThaiSearch\"\r\n                      item-text=\"tenMuc\"\r\n                      item-value=\"maMuc\"\r\n                      dense\r\n                      solo\r\n                      hide-details=\"auto\"\r\n                      clearable\r\n                      return-object\r\n                    >\r\n                    </v-autocomplete>\r\n                </v-col>\r\n                <!-- loai bao cao -->\r\n                <v-col cols=\"12\"  class=\"py-0 mb-2\">\r\n                    <label>Loại báo cáo</label>\r\n                    <v-autocomplete\r\n                      class=\"flex input-form mt-2\"\r\n                      hide-no-data\r\n                      :items=\"loaiBaoCaoItems\"\r\n                      v-model=\"loaiBaoCaoSearch\"\r\n                      item-text=\"tenGoi\"\r\n                      item-value=\"maMauBaoCao\"\r\n                      dense\r\n                      solo\r\n                      hide-details=\"auto\"\r\n                      clearable\r\n                      return-object\r\n                    >\r\n                    </v-autocomplete>\r\n                </v-col>\r\n                <!-- don vi duoc giao  -->\r\n                <v-col cols=\"4\" class=\"py-0 mb-2\">\r\n                    <label>Đơn vị được giao</label>\r\n                    <v-autocomplete\r\n                      class=\"flex input-form mt-2\"\r\n                      hide-no-data\r\n                      :items=\"donViDuocGiaoItems\"\r\n                      v-model=\"donViDuocGiaoSearch\"\r\n                      item-text=\"tenGoi\"\r\n                      item-value=\"maHanhChinh\"\r\n                      dense\r\n                      solo\r\n                      hide-details=\"auto\"\r\n                      clearable\r\n                      return-object\r\n                    >\r\n                    </v-autocomplete>\r\n                </v-col>\r\n                <!-- han xu ly -->\r\n                <v-col cols=\"8\" class=\"py-0 mb-2\">\r\n                  <label>Hạn xử lý</label>\r\n                  <div class=\"layout wrap mb-3 mt-2\">\r\n                    <v-layout wrap style=\"width: calc(100% - 200px);\">\r\n                      <v-flex xs6 class=\"pr-2\">\r\n                        <v-menu\r\n                          ref=\"menuDate1\"\r\n                          v-model=\"menuDate1\"\r\n                          :close-on-content-click=\"true\"\r\n                          transition=\"scale-transition\"\r\n                          offset-y\r\n                          min-width=\"auto\"\r\n                        >\r\n                          <template v-slot:activator=\"{ on, attrs }\">\r\n                            <v-text-field\r\n                              class=\"input-form\"\r\n                              v-model=\"fromReceiveDateFormatted\"\r\n                              persistent-hint\r\n                              append-icon=\"mdi-calendar\"\r\n                              @blur=\"fromReceiveDate = parseDate(fromReceiveDateFormatted)\"\r\n                              placeholder=\"Từ ngày\"\r\n                              hide-details\r\n                              solo\r\n                              dense\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                              clearable\r\n                            >\r\n                            </v-text-field>\r\n                          </template>\r\n                          <v-date-picker :max=\"toReceiveDateFormatted ? getMinMax(toReceiveDateFormatted) : null\" v-model=\"fromReceiveDate\" locale=\"vi\" :first-day-of-week=\"1\" no-title @input=\"changeDate('1')\"></v-date-picker>\r\n                        </v-menu>\r\n                      </v-flex>\r\n                      <v-flex xs6 class=\"pl-2\">\r\n                        <v-menu\r\n                          ref=\"menuDate2\"\r\n                          v-model=\"menuDate2\"\r\n                          :close-on-content-click=\"true\"\r\n                          transition=\"scale-transition\"\r\n                          offset-y\r\n                          min-width=\"auto\"\r\n                        >\r\n                          <template v-slot:activator=\"{ on, attrs }\">\r\n                            <v-text-field\r\n                              class=\"input-form\"\r\n                              v-model=\"toReceiveDateFormatted\"\r\n                              persistent-hint\r\n                              append-icon=\"mdi-calendar\"\r\n                              @blur=\"toReceiveDate = parseDate(toReceiveDateFormatted)\"\r\n                              placeholder=\"Đến ngày\"\r\n                              hide-details\r\n                              solo\r\n                              dense\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                              clearable\r\n                            ></v-text-field>\r\n                            </template>\r\n                          <v-date-picker :min=\"fromReceiveDateFormatted ? getMinMax(fromReceiveDateFormatted) : null\" v-model=\"toReceiveDate\" locale=\"vi\" :first-day-of-week=\"1\" no-title @input=\"changeDate('2')\"></v-date-picker>\r\n                        </v-menu>\r\n                      </v-flex>\r\n                    </v-layout>\r\n                  </div>\r\n                </v-col>\r\n              </v-row>\r\n            </v-form>\r\n          </div>\r\n          <!-- tim kiem btn  -->\r\n          <v-row class=\"my-0\">\r\n            <v-col cols=\"12\" class=\"d-flex align-center justify-end py-0 pb-2 my-0\" v-if=\"advanceSearch\">\r\n              <v-btn color=\"primary\" depressed small class=\"mx-0 text-white\" @click=\"getDanhSachBaoCao()\">\r\n                <v-icon size=\"18\">mdi-magnify</v-icon>&nbsp;\r\n                Tìm kiếm\r\n              </v-btn>\r\n            </v-col>\r\n          </v-row>\r\n          <!-- data table  -->\r\n          <v-row class=\"my-0 mb-3\">\r\n            <v-col cols=\"12\" class=\"pt-0\">\r\n              <v-data-table\r\n                :headers=\"headers\"\r\n                :items=\"danhSachBaoCao\"\r\n                :items-per-page=\"itemsPerPage\"\r\n                item-key=\"primKey\"\r\n                hide-default-footer\r\n                class=\"table-base mt-2\"\r\n                no-data-text=\"Không có\"\r\n                :loading=\"loadingData\"\r\n                loading-text=\"Đang tải... \"\r\n              >\r\n                  <template v-slot:item.index=\"{ item, index }\">\r\n                    <div @click.stop=\"xemChiTietBaoCao(item)\">{{ (page+1) * itemsPerPage - itemsPerPage + index + 1 }}</div>\r\n                  </template>\r\n                  <template v-slot:item.maBaoCao=\"{ item }\">\r\n                    <div @click.stop=\"xemChiTietBaoCao(item)\">{{ item.maBaoCao }}</div>\r\n                  </template>\r\n                  <template v-slot:item.tenBaoCao=\"{ item }\">\r\n                    <div @click.stop=\"xemChiTietBaoCao(item)\">{{ item.tenBaoCao }}</div>\r\n                  </template>\r\n                  <template v-slot:item.kyBaoCao=\"{ item }\">\r\n                    <div @click.stop=\"xemChiTietBaoCao(item)\">{{ item.kyBaoCao.tenMuc }}</div>\r\n                  </template>\r\n                  <template v-slot:item.coQuanThucHien=\"{ item }\">\r\n                    <div @click.stop=\"xemChiTietBaoCao(item)\">{{ item.coQuanThucHien.tenGoi }}</div>\r\n                  </template>\r\n                  <template v-slot:item.thoiGianTao=\"{ item }\">\r\n                    <div @click.stop=\"xemChiTietBaoCao(item)\">{{ dateLocale(item.thoiGianTao) }}</div>\r\n                  </template>\r\n                  <template v-slot:item.hanXuLy=\"{ item }\">\r\n                    <div @click.stop=\"xemChiTietBaoCao(item)\">{{ dateLocale(item.hanXuLy) }}</div>\r\n                  </template>\r\n                  <template v-slot:item.tinhTrang=\"{ item }\">\r\n                    <div @click.stop=\"xemChiTietBaoCao(item)\">{{ item.tinhTrang.tenMuc }}</div>\r\n                  </template>\r\n                  <template v-slot:item.action=\"{ item }\">                   \r\n                    <v-tooltip top>\r\n                      <template v-slot:activator=\"{ on, attrs }\">\r\n                        <v-btn @click.stop=\"xemChiTietBaoCao(item)\" color=\"primary\" text icon class=\"\" v-bind=\"attrs\" v-on=\"on\">\r\n                          <v-icon size=\"20\">mdi-arrow-right-bold-circle-outline</v-icon>\r\n                        </v-btn>\r\n                      </template>\r\n                      <span>Chi tiết báo cáo</span>\r\n                    </v-tooltip>\r\n\r\n                    <v-tooltip top>\r\n                      <template v-slot:activator=\"{ on, attrs }\">\r\n                        <v-btn @click.stop=\"xoaBaoCao(item)\" color=\"red\" text icon class=\"ml-2\" v-bind=\"attrs\" v-on=\"on\">\r\n                          <v-icon size=\"18\">mdi-delete</v-icon>\r\n                        </v-btn>\r\n                      </template>\r\n                      <span>Xóa báo cáo</span>\r\n                    </v-tooltip>\r\n                  </template>\r\n              </v-data-table>\r\n              <pagination v-if=\"pageCount\" :pageInput=\"page\" :total=\"total\" :pageCount=\"pageCount\" @tiny:change-page=\"changePage\"></pagination>\r\n            </v-col>\r\n          </v-row>\r\n\r\n        </div>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from './Pagination.vue'\r\nimport toastr from 'toastr'\r\ntoastr.options = {\r\n  'closeButton': true,\r\n  'timeOut': '5000',\r\n  \"positionClass\": \"toast-top-center\"\r\n}\r\nexport default {\r\n    name: 'BaoCao',\r\n    components: {\r\n      Pagination\r\n    },\r\n    props: ['type'],\r\n    data() {\r\n      return {\r\n        dynamicType: '',\r\n        selected: [],\r\n        keywordSearch: '',\r\n        loadingData: false,\r\n        danhSachBaoCao: [],\r\n        maBaoCaoSearch: '',\r\n        kyBaoCaoItems: [],\r\n        kyBaoCaoSearch: '',\r\n        donViDuocGiaoItems: [],\r\n        donViDuocGiaoSearch: '',\r\n        loaiBaoCaoItems: [],\r\n        loaiBaoCaoSearch: '',\r\n        trangThaiItems: [],\r\n        trangThaiSearch: '',\r\n        namBaoCaoSearch: '',\r\n        headers: [\r\n          {\r\n              sortable: false,\r\n              text: 'STT',\r\n              align: 'center',\r\n              value: 'index'\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Mã báo cáo',\r\n              align: 'left',\r\n              value: 'maBaoCao',\r\n              class: 'th-center',\r\n              width: 150\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Loại báo cáo',\r\n              align: 'left',\r\n              value: 'tenBaoCao',\r\n              class: 'th-center'\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Kỳ báo cáo',\r\n              align: 'left',\r\n              value: 'kyBaoCao',\r\n              class: 'th-center',\r\n              width: 100\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Đơn vị được giao',\r\n              align: 'left',\r\n              value: 'coQuanThucHien',\r\n              class: 'th-center',\r\n              width: 200\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Ngày tạo',\r\n              align: 'left',\r\n              value: 'thoiGianTao',\r\n              class: 'th-center'\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Hạn xử lý',\r\n              align: 'left',\r\n              value: 'hanXuLy',\r\n              class: 'th-center'\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Tình trạng',\r\n              align: 'left',\r\n              value: 'tinhTrang',\r\n              class: 'th-center',\r\n              width: 120\r\n          },\r\n          {\r\n              sortable: false,\r\n              text: 'Thao tác',\r\n              align: 'center',\r\n              value: 'action',\r\n              class: 'th-center',\r\n              width: 100\r\n          },\r\n        ],\r\n        page: 0,\r\n        itemsPerPage: 15,\r\n        total: 0,\r\n        pageCount: 0,\r\n        advanceSearch: false,\r\n        selectedItem: '1',\r\n        itemSelect: '',\r\n        items: [\r\n          { text: 'Báo cáo xử lý', value: '1', collectionName: 'Báo cáo xử lý'},\r\n          { text: 'Báo cáo chờ duyệt', value: '2', collectionName: 'Báo cáo chờ duyệt' },\r\n          { text: 'Tổng hợp báo cáo', value: '3', collectionName: 'Tổng hợp báo cáo' },\r\n          { text: 'Kỳ báo cáo', value: '4', collectionName: 'Kỳ báo cáo' }\r\n        ],\r\n        menuDate1: false,\r\n        menuDate2: false,\r\n        fromReceiveDate: '',\r\n        fromReceiveDateFormatted: '',\r\n        toReceiveDate: '',\r\n        toReceiveDateFormatted: '',\r\n      }\r\n    },\r\n    created () {\r\n      let vm = this\r\n      if (!vm.isAdmin && !vm.checkRole('XEMBAOCAODONVI') && !vm.checkRole('XEMTATCABAOCAO')) {\r\n        vm.$router.push({ path: '/login'})\r\n        return\r\n      }\r\n      if (vm.type === 'bao-cao-moi') {\r\n        vm.dynamicType = \"Báo cáo tạo mới\"\r\n      }\r\n      if (vm.type === 'cho-xu-ly') {\r\n        vm.dynamicType = \"Báo cáo chờ xử lý\"\r\n      }\r\n      if (vm.type === 'cho-duyet') {\r\n        vm.dynamicType = \"Báo cáo chờ duyệt\"\r\n      }\r\n      if (vm.type === 'tra-cuu') {\r\n        vm.dynamicType = \"Tra cứu báo cáo\"\r\n      }\r\n      if (vm.type === 'tong-hop') {\r\n        vm.dynamicType = \"Tổng hợp báo cáo\"\r\n      }\r\n      vm.selectedItem = vm.items[0].value\r\n      vm.itemSelect = vm.items[0]\r\n      vm.$store.commit('SET_INDEXTAB', 0)\r\n      vm.danhSachBaoCao = []\r\n      vm.getDanhSachBaoCao('reset')\r\n      vm.getDanhMuc('KYBAOCAO')\r\n      vm.getDanhMuc('TINHTRANGXULY')\r\n      vm.getDanhSachMauBaoCao()\r\n      vm.getDanhSachDonVi()\r\n    },\r\n    computed: {\r\n      namBaoCaoItems() {\r\n        let arr = [];\r\n        let year = new Date().getFullYear();\r\n        for (let i = 0; i <= 19; i++) {\r\n          arr.push({ tenMuc: \"Năm \" + (year - i), maMuc: year - i });\r\n        }\r\n        return arr;\r\n      }\r\n    },\r\n    watch: {\r\n      '$route': function (newRoute, oldRoute) {\r\n        let vm = this\r\n        if (vm.type === 'bao-cao-moi') {\r\n          vm.dynamicType = \"Báo cáo tạo mới\"\r\n        }\r\n        if (vm.type === 'cho-xu-ly') {\r\n          vm.dynamicType = \"Báo cáo chờ xử lý\"\r\n        }\r\n        if (vm.type === 'cho-duyet') {\r\n          vm.dynamicType = \"Báo cáo chờ duyệt\"\r\n        }\r\n        if (vm.type === 'tra-cuu') {\r\n          vm.dynamicType = \"Tra cứu báo cáo\"\r\n        }\r\n        if (vm.type === 'tong-hop') {\r\n          vm.dynamicType = \"Tổng hợp báo cáo\"\r\n        }\r\n        vm.$store.commit('SET_INDEXTAB', 2)\r\n      },\r\n      type (val) {\r\n        let vm = this\r\n        vm.resetFormTimKiem()\r\n        vm.advanceSearch = false\r\n        vm.getDanhSachBaoCao('reset')\r\n      }\r\n    },\r\n    methods: {\r\n      getDanhSachBaoCao (type) {\r\n        let vm = this\r\n        if (type === 'reset') {\r\n          vm.total = 0\r\n          vm.pageCount = 0\r\n          vm.page = 0\r\n          vm.resetFormTimKiem()\r\n        }\r\n        if (vm.loadingData) {\r\n          return\r\n        }\r\n        vm.loadingData = true\r\n        let filter = {\r\n          collectionName: 'baocao',\r\n          data: {\r\n            page: vm.page,\r\n            size: vm.itemsPerPage,\r\n            orderFields: 'thoiGianTao',\r\n            orderTypes: 'asc',\r\n            kyBaoCao_maMuc: vm.kyBaoCaoSearch ? vm.kyBaoCaoSearch['maMuc'] : '',\r\n            namBaoCao: vm.namBaoCaoSearch ? vm.namBaoCaoSearch['maMuc'] : '',\r\n            maBaoCao: vm.maBaoCaoSearch,\r\n            tinhTrang_maMuc: vm.trangThaiSearch ? vm.trangThaiSearch['maMuc'] : '',\r\n            mauBaoCao_maMauBaoCao: vm.loaiBaoCaoSearch ? vm.loaiBaoCaoSearch['maMauBaoCao'] : '',\r\n            coQuanThucHien_maHanhChinh: vm.donViDuocGiaoSearch ? vm.donViDuocGiaoSearch['maHanhChinh'] : '',\r\n            tuNgay: vm.fromReceiveDateFormatted ? vm.parseDate(vm.fromReceiveDateFormatted) : '',\r\n            denNgay: vm.toReceiveDateFormatted ? vm.parseDate(vm.toReceiveDateFormatted) : ''\r\n          }\r\n        }\r\n        if (vm.type !== 'tra-cuu') {\r\n          if (vm.type === 'cho-xu-ly') {\r\n            filter.data.tinhTrang_maMuc = \"PROCESSING\"\r\n          }\r\n          if (vm.type === 'cho-duyet') {\r\n            filter.data.tinhTrang_maMuc = \"APPROVAL\"\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          vm.danhSachBaoCao = response.content\r\n          vm.total = response.totalElements\r\n          vm.pageCount = response.totalPages\r\n          vm.loadingData = false\r\n        }).catch(function () {\r\n          vm.loadingData = false\r\n        })\r\n      },\r\n      xemChiTietBaoCao (item) {\r\n        let vm = this\r\n        vm.$router.push({ path: '/bao-cao/' + vm.type + '/' + item.primKey})\r\n      },\r\n      xoaBaoCao (item) {\r\n        let vm = this\r\n        vm.$store.commit('SET_SHOWCONFIRM', true)\r\n        let confirm = {\r\n          auth: false,\r\n          title: 'Xóa báo cáo',\r\n          message: 'Bạn có chắc chắn muốn xóa báo cáo này',\r\n          button: {\r\n            yes: 'Có',\r\n            no: 'Không'\r\n          },\r\n          callback: () => {\r\n            let filter = {\r\n              collectionName: 'baocao',\r\n              id: item.primKey\r\n            }\r\n            vm.loading = true\r\n            vm.$store.dispatch('collectionDelete', filter).then(function (result) {\r\n              vm.loading = false\r\n              toastr.remove()\r\n              toastr.success('Xóa báo cáo thành công')\r\n              vm.getDanhSachBaoCao()\r\n            }).catch(function (response) {\r\n              vm.loading = false\r\n              toastr.remove()\r\n              toastr.error('Xóa báo cáo thất bại')\r\n            })\r\n          }\r\n        }\r\n        vm.$store.commit('SET_CONFIG_CONFIRM_DIALOG', confirm)\r\n      },\r\n      getDanhMuc (collection) {\r\n        let vm = this\r\n        let filter = {\r\n          collectionName: 'dulieudanhmuc',\r\n          data: {\r\n            orderFields: 'maMuc',\r\n            orderTypes: 'asc',\r\n            page: 0,\r\n            size: 1000,\r\n            danhMuc_maDanhMuc: collection\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          if (collection === 'KYBAOCAO') {\r\n            vm.kyBaoCaoItems = response.content\r\n          }\r\n          if (collection === 'TINHTRANGXULY') {\r\n            vm.trangThaiItems = response.content\r\n          }\r\n        }).catch(function () {\r\n        })\r\n      },\r\n      getDanhSachMauBaoCao () {\r\n        let vm = this\r\n        let filter = {\r\n          collectionName: 'maubaocao',\r\n          data: {\r\n            orderFields: 'tenGoi',\r\n            orderTypes: 'asc',\r\n            page: 0,\r\n            size: 1000\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          vm.loaiBaoCaoItems = response.content\r\n        }).catch(function () {\r\n        })\r\n      },\r\n      getDanhSachDonVi () {\r\n        let vm = this\r\n        let filter = {\r\n          collectionName: 'coquandonvi',\r\n          data: {\r\n            orderFields: 'tenGoi',\r\n            orderTypes: 'asc',\r\n            page: 0,\r\n            size: 1000\r\n          }\r\n        }\r\n        vm.$store.dispatch('collectionFilter', filter).then(function (response) {\r\n          vm.donViDuocGiaoItems = response.content\r\n        }).catch(function () {\r\n        })\r\n      },\r\n      getColor (danhTinhDienTu) {\r\n        let status = danhTinhDienTu[0] ? String(danhTinhDienTu[0].tinhTrangSuDungTaiKhoan['maMuc']) : '0'\r\n        switch(status) {\r\n          case '1':\r\n              return 'color: blue'\r\n          case '2':\r\n              return 'color: green'\r\n          case '3':\r\n            return 'color: orange'\r\n          case '4':\r\n            return 'color: red'\r\n          default:\r\n            return 'color: black'\r\n        }\r\n      },\r\n      dateLocale (dateInput) {\r\n        if (!dateInput) {\r\n          return ''\r\n        }\r\n        let date = new Date(dateInput)\r\n        return `${date.getDate().toString().padStart(2, '0')}/${(date.getMonth() + 1).toString().padStart(2, '0')}/${date.getFullYear()}`\r\n      },\r\n      changePage (config) {\r\n        let vm = this\r\n        vm.page = config.page\r\n        vm.getDanhSachBaoCao()\r\n      },\r\n      showAdvanceSearch () {\r\n        let vm = this\r\n        vm.advanceSearch = !vm.advanceSearch\r\n      },\r\n      resetFormTimKiem () {\r\n        let vm = this\r\n        if (vm.$refs.formTimKiem) {\r\n          vm.$refs.formTimKiem.reset()\r\n          vm.$refs.formTimKiem.resetValidation()\r\n        }        \r\n      },\r\n      changeDate(index) {\r\n        let vm = this\r\n        vm.menuDate1 = false\r\n        if (index === '1') {\r\n          vm.fromReceiveDateFormatted = vm.formatDate(vm.fromReceiveDate)\r\n        } else if (index === '2') {\r\n          vm.toReceiveDateFormatted = vm.formatDate(vm.toReceiveDate)\r\n        }\r\n      },\r\n      formatDate(date) {\r\n        if (!date) return ''\r\n        const [year, month, day] = date.split('-')\r\n        return `${day}/${month}/${year}`\r\n      },\r\n      parseDate(date) {\r\n        if (!date) return ''\r\n        if (String(date).indexOf('/') > 0) {\r\n          const [day, month, year] = date.split('/')\r\n          return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`\r\n        } else if (String(date).indexOf('-') > 0) {\r\n          const [day, month, year] = date.split('-')\r\n          return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`\r\n        } else {\r\n          let date1 = new Date(Number(date))\r\n          return `${date1.getFullYear()}-${(date1.getMonth() + 1).toString().padStart(2, '0')}-${date1.getDate().toString().padStart(2, '0')}`\r\n        }\r\n      },\r\n      getMinMax (date) {\r\n        if (!date) return null\r\n        const [day, month, year] = date.split('/')\r\n        return `${year}-${month}-${day}`\r\n      },\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  #table-ds-baocao table tr td {\r\n    cursor: pointer;\r\n  }\r\n  .bao-cao-1 {\r\n    width: 300px;\r\n    max-width: 235px;\r\n    /* border-bottom: 1px solid #DDDDDD; */\r\n  }\r\n  .bao-cao-1 .v-list {\r\n    padding-top: 0px;\r\n  }\r\n  // .bao-cao-2 {\r\n  //   width: calc(100% - 300px);\r\n  //   padding: 0 10px;\r\n  // }\r\n  .nav-content {\r\n    border-right: 1px solid #DDDDDD;\r\n    box-sizing: border-box;\r\n    // border-radius: 7px;\r\n    height: 100%;\r\n  }\r\n</style>"]}]}